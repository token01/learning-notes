import{_ as p}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as i,c as a,a as o,b as t,d as r,e as s,r as e}from"./app.900d58e3.js";const g={},l=s('<h2 id="微信" tabindex="-1"><a class="header-anchor" href="#微信" aria-hidden="true">#</a> 微信</h2><p>名词解释：</p><ul><li><strong>appid</strong>：公众号、小程序、移动应用唯一标识</li><li><strong>mchid</strong>：商户申请微信支付后，由微信支付分配的商户收款账号。</li><li><strong>openid</strong>，微信用户在公众号 <strong>appid</strong> 下的唯一用户标识，可用于永久标记一个用户</li><li><strong>sub_appid</strong>：子 <strong>appid</strong>，服务商模式/银行服务商模式起作用</li><li><strong>sub_mch_id</strong>：子商户号， 服务商模式/银行服务商模式起作用</li><li><strong>sub_openid</strong>：子 <strong>appid</strong> 下的唯一标识</li><li><strong>channel_id</strong>：服务商模式下，微信支付分配给收单服务商的ID</li></ul><p>微信支付接入可以分为</p><ul><li>普通商户</li><li>服务商模式</li><li>普通服务商</li><li>银行类服务商</li></ul><p>银行类服务商与普通类服务商的最大区别在于，普通类服务商不能清算资金，微信将会直接把资金清算给商户账户。</p><p><img src="https://img2020.cnblogs.com/other/1419561/202003/1419561-20200307182820919-1430456766.jpg" alt="" loading="lazy"></p><p>而银行类服务商是可以为下属特约商户清算资金的。</p><p><img src="https://img2020.cnblogs.com/other/1419561/202003/1419561-20200307182821261-1288199620.jpg" alt="" loading="lazy"></p><blockquote><p>现有银行类服务商实际上是通过银联/网联转接微信</p></blockquote><p>银行服务商省申请资质要求较高，一般只有银行、支付机构可以申请成为银行类服务商。两者申请要求如下：</p><p><img src="https://img2020.cnblogs.com/other/1419561/202003/1419561-20200307182821423-1778222315.jpg" alt="" loading="lazy"></p>',12),d={href:"https://pay.weixin.qq.com/partner/public/home",target:"_blank",rel:"noopener noreferrer"},h=o("h3",{id:"普通商户",tabindex:"-1"},[o("a",{class:"header-anchor",href:"#普通商户","aria-hidden":"true"},"#"),t(" 普通商户")],-1),c=o("p",null,[t("普通商户模式下，商户需要向微信申请 "),o("strong",null,"appid"),t(" 以及 "),o("strong",null,"mchid"),t("。接入微信普通商户版本的支付接口。")],-1),m={href:"https://pay.weixin.qq.com/wiki/doc/api/index.html",target:"_blank",rel:"noopener noreferrer"},_=s('<p>JSAPI 支付模式，需要提前登陆授权，需要获取用户的 <strong>openid</strong>。三者关系如下图：</p><p><img src="https://img2020.cnblogs.com/other/1419561/202003/1419561-20200307182821561-1776141502.jpg" alt="" loading="lazy"></p><p>同一个 <strong>mchid</strong> 可以绑定多个 <strong>appid</strong>，两者可以是同一个公司主体，也可以不同公司主体（<strong>限定资格开放</strong>）。<strong>mchid</strong> 最多可以绑定 50 个 <strong>appid</strong>；</p><p>同一个 <strong>appid</strong> 又可以被多个 <strong>mch</strong> id 绑定，不过需要注意的是，<strong>mchid</strong> 费率必须不相同。</p><p>所以 <strong>appid</strong> 与 <strong>mchid</strong> 原则上是多对多的关系。</p><p><img src="https://img2020.cnblogs.com/other/1419561/202003/1419561-20200307182821742-1850849746.jpg" alt="" loading="lazy"></p><p>这里需要注意，微信清算资金实际上是基于 <strong>mchid</strong>。即同一个 mchid，使用多个 <strong>appid</strong> 做交易，第二天资金是清算到 <strong>mchid</strong> 绑定的商户的账户。</p><h3 id="服务商模式" tabindex="-1"><a class="header-anchor" href="#服务商模式" aria-hidden="true">#</a> 服务商模式</h3><p>第三方服务商向微信申请自己的 <strong>appid</strong>，并通过 <strong>appid</strong> 申请服务商<strong>mch_id</strong>，以此获得微信支付服务商能力。再通过服务商 <strong>mch_id</strong> 为所服务的特约商户申请创建微信支付 <strong>sub_mch_id</strong>，创建好的 <strong>sub_mch_id</strong> 默认和服务商的<strong>mch_id</strong> 建立父子授权关系。银行服务商模式可以通过接入入驻特约商户，而普通服务商只能通过页面入驻。</p><p>服务商模式下，可以配置特约商户使用自己申请 <strong>appid</strong>，传入 <strong>sub_appid</strong> 字段。</p><p><img src="https://img2020.cnblogs.com/other/1419561/202003/1419561-20200307182821945-514823327.jpg" alt="" loading="lazy"></p><blockquote><p>官方解释：</p><p><strong>sub_appid</strong> 可为公众号，<strong>APP <strong>或小程序的 <strong>appid</strong>，服务商在服务商商户平台可手动为每个特约商户绑定与渠道商主体或特约商户主体一致的公众号，APP或小程序的appid;针对小程序,还支持绑定服务商主体的小程序 <strong>appid</strong>。目前最多配置5个. 手工配置路径：”服务商商户平台-服务商功能-子商户管理-开发配置-特约商户</strong>appid</strong> 配置</p></blockquote><p>服务商模式下使用 JSAPI，若特约商户想基于自己 <strong>appid</strong> 做交易，可以基于特约商户 <strong>appid</strong> 登陆授权获取 <strong>openid</strong>，然后传入 <strong>sub_appid</strong> 与 <strong>sub_openid</strong> 。</p><p>若没传入，只能使用服务商 <strong>appid</strong> 登陆授权，获取 <strong>openid</strong>。</p><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h3><p>普通商户模式，需要商户自己开发团队对接微信。而服务商模式，一般有服务商开发自己的收款功能，特约商户入驻即可使用，无需二次开发，适合个人/小微企业。另外服务商也可以提供包装之后的接口，有开发的能力也可以接入。</p><h3 id="微信帮助文档" tabindex="-1"><a class="header-anchor" href="#微信帮助文档" aria-hidden="true">#</a> 微信帮助文档</h3>',17),u={href:"https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=7_10&index=1#",target:"_blank",rel:"noopener noreferrer"},b={href:"https://pay.weixin.qq.com/static/pay_setting/appid_protocol.shtml",target:"_blank",rel:"noopener noreferrer"},x=s('<h2 id="支付宝" tabindex="-1"><a class="header-anchor" href="#支付宝" aria-hidden="true">#</a> 支付宝</h2><p>名词解释：</p><ul><li><strong>app_id</strong>：支付宝分配给开发者的应用 ID</li><li>商户 <strong>uid/pid</strong>：支付宝商户号</li><li><strong>buyer_id</strong>：买家的支付宝唯一用户号（2088开头的16位纯数字）</li><li><strong>org_pid</strong>：银行服务商模式下，收单机构(例如银行）的标识，填写该机构在支付宝的 <strong>pid</strong></li><li><strong>merchant_id</strong>，银行服务商模式下，特约商户入驻成功之后，分配商户号</li></ul><p>支付宝接入分为：</p><ul><li>普通商户</li><li>服务商</li><li>ISV：独立软件开发商</li><li>银行类服务商</li></ul><p>支付宝银行类服务商与微信类似，服务商可以自己清算资金。</p><p><img src="https://img2020.cnblogs.com/other/1419561/202003/1419561-20200307182822080-1840781475.jpg" alt="" loading="lazy"></p><p>不过支付宝的这个模式比较简单，服务商只需要通过后台接口入驻特约商户成功，得到支付宝分配的商户编号。交易时上送商户编号与机构编码即成功。</p><h3 id="普通商户-1" tabindex="-1"><a class="header-anchor" href="#普通商户-1" aria-hidden="true">#</a> 普通商户</h3><p>普通商户需要向支付宝申请入驻，将会得到商务号。接着需要创建应用得到 <strong>appid</strong>，上架成功后，需要进行签约。签约成功之后，这个 <strong>appid</strong> 与商户号建立唯一的绑定的关系。</p><p>同一个商户号可以绑定多个 <strong>appid</strong>，但是同一个 <strong>appid</strong> 只能绑定唯一个商户号。</p><blockquote><p>其实从支付宝的接口也可以看出，支付宝只要求传入 <strong>appid</strong>，后台肯定是跟库 <strong>appid</strong> 查找对应的商户号。</p><p>这点虽然没有微信灵活，但是支付宝理解起来简单。微信 <strong>appid</strong> 与 <strong>mchid</strong> 多对多的关系，有点复杂。</p></blockquote><p><img src="https://img2020.cnblogs.com/other/1419561/202003/1419561-20200307182822284-1436718277.jpg" alt="" loading="lazy"></p><h3 id="银行类服务商" tabindex="-1"><a class="header-anchor" href="#银行类服务商" aria-hidden="true">#</a> 银行类服务商</h3><p>这里服务商直接触过银行类服务商，其他类型服务商不太清楚。</p><p>银行类服务商交易接口与普通商户模式相比，仅仅多出了 **merchant_id **与 <strong>org_pid</strong>，其他信息与普通商户的接口一致。</p><h3 id="总结-1" tabindex="-1"><a class="header-anchor" href="#总结-1" aria-hidden="true">#</a> 总结</h3><p>同微信。</p><blockquote><p>ps:虽然支付宝官网上文档倒是挺多的，但是就是没有找到说的很明白的文档。。。这一点微信还是挺舒服的，示例图画的很清晰，赞一个 ღ( ´･ᴗ･` )比心。</p></blockquote><h3 id="帮助资料" tabindex="-1"><a class="header-anchor" href="#帮助资料" aria-hidden="true">#</a> 帮助资料</h3>',20),f={href:"https://docs.open.alipay.com/200/105314/",target:"_blank",rel:"noopener noreferrer"},y={href:"https://opendocs.alipay.com/isv/10272/ru478a",target:"_blank",rel:"noopener noreferrer"},k={href:"https://www.cnblogs.com/goodAndyxublog/p/12436075.html",target:"_blank",rel:"noopener noreferrer"};function q(w,z){const n=e("ExternalLinkIcon");return i(),a("div",null,[l,o("blockquote",null,[o("p",null,[t("官网地址："),o("a",d,[t("https://pay.weixin.qq.com/partner/public/home"),r(n)])])]),h,c,o("p",null,[t("文档地址："),o("a",m,[t("https://pay.weixin.qq.com/wiki/doc/api/index.html"),r(n)])]),_,o("p",null,[o("a",u,[t("https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=7_10&index=1#"),r(n)])]),o("p",null,[o("a",b,[t("https://pay.weixin.qq.com/static/pay_setting/appid_protocol.shtml"),r(n)])]),x,o("p",null,[o("a",f,[t("https://docs.open.alipay.com/200/105314/"),r(n)])]),o("p",null,[o("a",y,[t("https://opendocs.alipay.com/isv/10272/ru478a"),r(n)])]),o("blockquote",null,[o("p",null,[t("参考链接："),o("a",k,[t("https://www.cnblogs.com/goodAndyxublog/p/12436075.html"),r(n)]),t("，整理：musk")])])])}const A=p(g,[["render",q],["__file","yiwdnlxwxzfbzfdxggn.html.vue"]]);export{A as default};
