import{_ as t}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as e,c as o,a as n,b as a,d as p,f as c,r as l}from"./app.f6fb4051.js";const i={},r=c(`<h1 id="vuex" tabindex="-1"><a class="header-anchor" href="#vuex" aria-hidden="true">#</a> Vuex</h1><h2 id="_1-\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_1-\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 1. \u662F\u4EC0\u4E48\uFF1F</h2><p>\u5B98\u65B9\u6587\u6863\u4ECB\u7ECD\u5982\u4E0B</p><blockquote><p>Vuex \u662F\u4E00\u4E2A\u4E13\u4E3A Vue.js \u5E94\u7528\u7A0B\u5E8F\u5F00\u53D1\u7684<strong>\u72B6\u6001\u7BA1\u7406\u6A21\u5F0F</strong>\u3002\u5B83\u91C7\u7528\u96C6\u4E2D\u5F0F\u5B58\u50A8\u7BA1\u7406\u5E94\u7528\u7684\u6240\u6709\u7EC4\u4EF6\u7684\u72B6\u6001\uFF0C\u5E76\u4EE5\u76F8\u5E94\u7684\u89C4\u5219\u4FDD\u8BC1\u72B6\u6001\u4EE5\u4E00\u79CD\u53EF\u9884\u6D4B\u7684\u65B9\u5F0F\u53D1\u751F\u53D8\u5316\u3002</p></blockquote><p>Vue\u63D0\u4F9B\u7684\u72B6\u6001\u7BA1\u7406\u5DE5\u5177\uFF0C\u7528\u4E8E\u7EDF\u4E00\u7BA1\u7406\u6211\u4EEC\u9879\u76EE\u4E2D\u5404\u79CD\u6570\u636E\u7684\u4EA4\u4E92\u548C\u91CD\u7528\uFF0C\u5B58\u50A8\u6211\u4EEC\u9700\u8981\u7528\u5230\u6570\u636E\u5BF9\u8C61\u3002</p><p>\u7B80\u800C\u8A00\u4E4B\uFF1A\u5168\u5C40\u72B6\u6001\u7BA1\u7406\u5DE5\u5177\uFF0C\u5171\u4EAB\u53D8\u91CF</p><h2 id="_2-\u4E3A\u4EC0\u4E48\u9700\u8981" tabindex="-1"><a class="header-anchor" href="#_2-\u4E3A\u4EC0\u4E48\u9700\u8981" aria-hidden="true">#</a> 2. \u4E3A\u4EC0\u4E48\u9700\u8981\uFF1F</h2><p>\u5B98\u7F51\u4E3E\u4E86\u4E00\u4E2A\u4F8B\u5B50\uFF0C\u591A\u4E2A\u7EC4\u4EF6\u5171\u4EAB\u72B6\u6001\u9762\u4E34\u7684\u95EE\u9898</p><ul><li><p>\u591A\u4E2A\u89C6\u56FE\u4F9D\u8D56\u4E8E\u540C\u4E00\u72B6\u6001</p><p>\u4F20\u53C2\u7684\u65B9\u6CD5\u5BF9\u4E8E\u591A\u5C42\u5D4C\u5957\u7684\u7EC4\u4EF6\u5C06\u4F1A\u975E\u5E38\u7E41\u7410\uFF0C\u5E76\u4E14\u5BF9\u4E8E\u5144\u5F1F\u7EC4\u4EF6\u95F4\u7684\u72B6\u6001\u4F20\u9012\u65E0\u80FD\u4E3A\u529B</p></li><li><p>\u6765\u81EA\u4E0D\u540C\u89C6\u56FE\u7684\u884C\u4E3A\u9700\u8981\u53D8\u66F4\u540C\u4E00\u72B6\u6001</p><p>\u6211\u4EEC\u7ECF\u5E38\u4F1A\u91C7\u7528\u7236\u5B50\u7EC4\u4EF6\u76F4\u63A5\u5F15\u7528\u6216\u8005\u901A\u8FC7\u4E8B\u4EF6\u6765\u53D8\u66F4\u548C\u540C\u6B65\u72B6\u6001\u7684\u591A\u4EFD\u62F7\u8D1D\u3002\u4EE5\u4E0A\u7684\u8FD9\u4E9B\u6A21\u5F0F\u975E\u5E38\u8106\u5F31\uFF0C\u901A\u5E38\u4F1A\u5BFC\u81F4\u65E0\u6CD5\u7EF4\u62A4\u7684\u4EE3\u7801\u3002</p></li></ul><p>\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u628A<strong>\u5171\u4EAB\u72B6\u6001\u62BD\u53D6\u51FA\u6765\uFF0C\u4EE5\u4E00\u4E2A\u5168\u5C40\u5355\u4F8B\u6A21\u5F0F\u7BA1\u7406</strong></p><blockquote><p>\u5728\u8FD9\u79CD\u6A21\u5F0F\u4E0B\uFF0C\u6211\u4EEC\u7684\u7EC4\u4EF6\u6811\u6784\u6210\u4E86\u4E00\u4E2A\u5DE8\u5927\u7684\u201C\u89C6\u56FE\u201D\uFF0C\u4E0D\u7BA1\u5728\u6811\u7684\u54EA\u4E2A\u4F4D\u7F6E\uFF0C\u4EFB\u4F55\u7EC4\u4EF6\u90FD\u80FD\u83B7\u53D6\u72B6\u6001\u6216\u8005\u89E6\u53D1\u884C\u4E3A\uFF01</p></blockquote><h2 id="_3-\u5982\u4F55\u5F15\u5165vuex" tabindex="-1"><a class="header-anchor" href="#_3-\u5982\u4F55\u5F15\u5165vuex" aria-hidden="true">#</a> 3. \u5982\u4F55\u5F15\u5165Vuex?</h2><ol><li>\u4E0B\u8F7D<code>vuex</code>: <code>npm install vuex --save</code></li><li>\u5728<code>main.js</code>\u6DFB\u52A0:</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span> Vuex <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//\u5F85\u6DFB\u52A0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
    store<span class="token punctuation">,</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-\u6838\u5FC3\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_4-\u6838\u5FC3\u6982\u5FF5" aria-hidden="true">#</a> 4. \u6838\u5FC3\u6982\u5FF5</h2><p><img src="https://abelsun-1256449468.cos.ap-beijing.myqcloud.com/image/image-20210525190735823.png" alt="image-20210525190735823"></p><h3 id="_4-1-state" tabindex="-1"><a class="header-anchor" href="#_4-1-state" aria-hidden="true">#</a> 4.1 State</h3><p><code>state</code>\u5C31\u662FVuex\u4E2D\u7684<strong>\u516C\u5171\u7684\u72B6\u6001</strong></p><blockquote><p>\u53EF\u4EE5\u5C06<code>state</code>\u770B\u4F5C\u662F\u6240\u6709\u7EC4\u4EF6\u7684<code>data</code>, \u7528\u4E8E\u4FDD\u5B58\u6240\u6709\u7EC4\u4EF6\u7684\u516C\u5171\u6570\u636E.</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span> 
    <span class="token literal-property property">products</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u9F20\u6807&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u952E\u76D8&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u8033\u673A&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u663E\u793A\u5C4F&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-getters" tabindex="-1"><a class="header-anchor" href="#_4-2-getters" aria-hidden="true">#</a> 4.2 Getters</h3><p><code>getters</code>\u5C5E\u6027\u7406\u89E3\u4E3A\u6240\u6709\u7EC4\u4EF6\u7684<code>computed</code>\u5C5E\u6027, \u4E5F\u5C31\u662F<strong>\u8BA1\u7B97\u5C5E\u6027</strong></p><blockquote><p>getters\u7684\u8FD4\u56DE\u503C\u4F1A\u6839\u636E\u5B83\u7684\u4F9D\u8D56\u88AB\u7F13\u5B58\u8D77\u6765\uFF0C\u4E14\u53EA\u6709\u5F53\u5B83\u7684\u4F9D\u8D56\u503C\u53D1\u751F\u4E86\u6539\u53D8\u624D\u4F1A\u88AB\u91CD\u65B0\u8BA1\u7B97</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//main.js</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">products</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u9F20\u6807&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u952E\u76D8&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u8033\u673A&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u663E\u793A\u5C4F&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//\u6DFB\u52A0getters</span>
    <span class="token function-variable function">saleProducts</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> saleProducts <span class="token operator">=</span> state<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> <span class="token parameter">product</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> product<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
          <span class="token literal-property property">price</span><span class="token operator">:</span> product<span class="token punctuation">.</span>price <span class="token operator">/</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> saleProducts<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-mutations" tabindex="-1"><a class="header-anchor" href="#_4-3-mutations" aria-hidden="true">#</a> 4.3 <strong>Mutations</strong></h3><p><code>mutaions</code>\u7406\u89E3\u4E3A<code>store</code>\u4E2D\u7684<strong>methods</strong></p><blockquote><p><code>mutations</code>\u5BF9\u8C61\u4E2D\u4FDD\u5B58\u7740\u66F4\u6539\u6570\u636E\u7684\u56DE\u8C03\u51FD\u6570,\u8BE5\u51FD\u6570\u540D\u5B98\u65B9\u89C4\u5B9A\u53EB<code>type</code>, \u7B2C\u4E00\u4E2A\u53C2\u6570\u662F<code>state</code>, \u7B2C\u4E8C\u53C2\u6570\u662F<code>payload</code>, \u4E5F\u5C31\u662F\u81EA\u5B9A\u4E49\u7684\u53C2\u6570.</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//main.js</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">products</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u9F20\u6807&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u952E\u76D8&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u8033\u673A&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u663E\u793A\u5C4F&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function-variable function">saleProducts</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> saleProducts <span class="token operator">=</span> state<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> <span class="token parameter">product</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> product<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
          <span class="token literal-property property">price</span><span class="token operator">:</span> product<span class="token punctuation">.</span>price <span class="token operator">/</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> saleProducts<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//\u6DFB\u52A0mutations</span>
    <span class="token function">minusPrice</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> newPrice <span class="token operator">=</span> state<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token parameter">product</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        product<span class="token punctuation">.</span>price <span class="token operator">-=</span> payload
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u70B9\u51FB\u89E6\u53D1</p><p><strong>\u6CE8\u610F:\u8C03\u7528mutaions\u4E2D\u56DE\u8C03\u51FD\u6570, \u53EA\u80FD\u4F7F\u7528store.commit(type, payload)</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//ProductListTwo.vue</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">products</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>products
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">minusPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;minusPrice&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u63D0\u4EA4\`minusPrice,payload\u4E3A2</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-actions" tabindex="-1"><a class="header-anchor" href="#_4-4-actions" aria-hidden="true">#</a> 4.4 Actions</h3><p><code>actions</code> \u7C7B\u4F3C\u4E8E <code>mutations</code>\uFF0C\u4E0D\u540C\u5728\u4E8E\uFF1A</p><ul><li><code>actions</code>\u63D0\u4EA4\u7684\u662F<code>mutations</code>\u800C\u4E0D\u662F\u76F4\u63A5\u53D8\u66F4\u72B6\u6001</li><li><code>actions</code>\u4E2D\u53EF\u4EE5\u5305\u542B\u5F02\u6B65\u64CD\u4F5C, <code>mutations</code>\u4E2D\u7EDD\u5BF9\u4E0D\u5141\u8BB8\u51FA\u73B0\u5F02\u6B65</li><li><code>actions</code>\u4E2D\u7684\u56DE\u8C03\u51FD\u6570\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\u662F<code>context</code>, \u662F\u4E00\u4E2A\u4E0E<code>store</code>\u5B9E\u4F8B\u5177\u6709\u76F8\u540C\u5C5E\u6027\u548C\u65B9\u6CD5\u7684\u5BF9\u8C61</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//main.js</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span><span class="token punctuation">{</span>
    products<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token char">&#39;\u9F20\u6807&#39;</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token char">&#39;\u952E\u76D8&#39;</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token char">&#39;\u8033\u673A&#39;</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token char">&#39;\u663E\u793A\u5C4F&#39;</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span><span class="token punctuation">{</span>
    saleProducts<span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      let saleProducts <span class="token operator">=</span> state<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> product <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> product<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
          price<span class="token operator">:</span> product<span class="token punctuation">.</span>price <span class="token operator">/</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> saleProducts<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span><span class="token punctuation">{</span>
    minusPrice <span class="token punctuation">(</span>state<span class="token punctuation">,</span> payload <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      let newPrice <span class="token operator">=</span> state<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> product <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        product<span class="token punctuation">.</span>price <span class="token operator">-=</span> payload
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//\u6DFB\u52A0actions</span>
    <span class="token function">minusPriceAsync</span><span class="token punctuation">(</span> context<span class="token punctuation">,</span> payload <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span> &#39;minusPrice&#39;<span class="token punctuation">,</span> payload <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//context\u63D0\u4EA4</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u70B9\u51FB\u89E6\u53D1</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">products</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>products
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">minusPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;minusPrice&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">minusPriceAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&#39;minusPriceAsync&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u5206\u53D1actions\u4E2D\u7684minusPriceAsync\u8FD9\u4E2A\u5F02\u6B65\u51FD\u6570</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5-modules" tabindex="-1"><a class="header-anchor" href="#_4-5-modules" aria-hidden="true">#</a> 4.5 Modules</h3><blockquote><p>\u7531\u4E8E\u4F7F\u7528\u5355\u4E00\u72B6\u6001\u6811\uFF0C\u5E94\u7528\u7684\u6240\u6709\u72B6\u6001\u4F1A\u96C6\u4E2D\u5230\u4E00\u4E2A\u6BD4\u8F83\u5927\u7684\u5BF9\u8C61\u3002\u5F53\u5E94\u7528\u53D8\u5F97\u975E\u5E38\u590D\u6742\u65F6\uFF0Cstore \u5BF9\u8C61\u5C31\u6709\u53EF\u80FD\u53D8\u5F97\u76F8\u5F53\u81C3\u80BF\u3002\u4E3A\u4E86\u89E3\u51B3\u4EE5\u4E0A\u95EE\u9898\uFF0CVuex \u5141\u8BB8\u6211\u4EEC\u5C06 store \u5206\u5272\u6210\u6A21\u5757\uFF08module\uFF09\u3002\u6BCF\u4E2A\u6A21\u5757\u62E5\u6709\u81EA\u5DF1\u7684 state\u3001mutation\u3001action\u3001getter\u3001\u751A\u81F3\u662F\u5D4C\u5957\u5B50\u6A21\u5757\u2014\u2014\u4ECE\u4E0A\u81F3\u4E0B\u8FDB\u884C\u540C\u6837\u65B9\u5F0F\u7684\u5206\u5272</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> moduleB <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> moduleA<span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> moduleB
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>a <span class="token comment">// -&gt; moduleA \u7684\u72B6\u6001</span>
store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>b <span class="token comment">// -&gt; moduleB \u7684\u72B6\u6001</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u53C2\u8003\u6587\u7AE0" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u6587\u7AE0" aria-hidden="true">#</a> \u53C2\u8003\u6587\u7AE0</h2>`,41),u={href:"https://www.jianshu.com/p/a804606ad8e9",target:"_blank",rel:"noopener noreferrer"},k={href:"https://vuex.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"};function d(v,m){const s=l("ExternalLinkIcon");return e(),o("div",null,[r,n("p",null,[n("a",u,[a("Vue.js\u2014\u2014\u5341\u5206\u949F\u5165\u95E8Vuex"),p(s)])]),n("p",null,[n("a",k,[a("Vuex\u5B98\u65B9\u6587\u6863"),p(s)])])])}const h=t(i,[["render",d],["__file","vuex-overview.html.vue"]]);export{h as default};
