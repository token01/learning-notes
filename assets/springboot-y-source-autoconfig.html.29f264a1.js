import{_ as c}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as i,c as l,a as n,b as a,d as s,w as u,f as o,r as t}from"./app.81272278.js";const r={},k=o(`<h1 id="springboot\u8FDB\u9636-springboot\u81EA\u52A8\u88C5\u914D\u539F\u7406\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#springboot\u8FDB\u9636-springboot\u81EA\u52A8\u88C5\u914D\u539F\u7406\u89E3\u6790" aria-hidden="true">#</a> SpringBoot\u8FDB\u9636 - SpringBoot\u81EA\u52A8\u88C5\u914D\u539F\u7406\u89E3\u6790</h1><h2 id="_1-\u524D\u8A00" tabindex="-1"><a class="header-anchor" href="#_1-\u524D\u8A00" aria-hidden="true">#</a> 1. \u524D\u8A00</h2><p>\u5728\u4F7F\u7528SpringBoot\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u5982\u4E0B\u65B9\u5F0F\u5373\u53EF\u76F4\u63A5\u542F\u52A8\u4E00\u4E2AWeb\u7A0B\u5E8F\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">DemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u548C\u6211\u4EEC\u4E4B\u524D\u4F7F\u7528\u666E\u901ASpring\u65F6\u7E41\u7410\u7684\u914D\u7F6E\u76F8\u6BD4\u7B80\u76F4\u4E0D\u8981\u592A\u65B9\u4FBF\uFF0C\u90A3\u4E48SpringBoot\u5B9E\u73B0\u8FD9\u4E9B\u7684\u539F\u7406\u662F\u4EC0\u4E48\uFF1F</p><h2 id="_2-springbootapplication\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2-springbootapplication\u6CE8\u89E3" aria-hidden="true">#</a> 2. <code>@SpringBootApplication</code>\u6CE8\u89E3</h2><p>\u9996\u5148\u6211\u4EEC\u770B\u5230\u7C7B\u4E0A\u65B9\u5305\u542B\u4E86\u4E00\u4E2A<code>@SpringBootApplication</code>\u6CE8\u89E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootConfiguration</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>
    excludeFilters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>
    type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span>
    classes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">TypeExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>
    type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span>
    classes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AutoConfigurationExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span>
        annotation <span class="token operator">=</span> <span class="token class-name">EnableAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span>
    <span class="token punctuation">)</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exclude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span>
        annotation <span class="token operator">=</span> <span class="token class-name">EnableAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span>
    <span class="token punctuation">)</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">excludeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span>
        annotation <span class="token operator">=</span> <span class="token class-name">ComponentScan</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        attribute <span class="token operator">=</span> <span class="token string">&quot;basePackages&quot;</span>
    <span class="token punctuation">)</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">scanBasePackages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span>
        annotation <span class="token operator">=</span> <span class="token class-name">ComponentScan</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        attribute <span class="token operator">=</span> <span class="token string">&quot;basePackageClasses&quot;</span>
    <span class="token punctuation">)</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">scanBasePackageClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E2A\u6CE8\u89E3\u4E0A\u8FB9\u5305\u542B\u7684\u4E1C\u897F\u8FD8\u662F\u6BD4\u8F83\u591A\u7684\uFF0C\u54B1\u4EEC\u5148\u770B\u4E00\u4E0B\u4E24\u4E2A\u7B80\u5355\u7684\u70ED\u70ED\u8EAB</p><h3 id="_2-1-componentscan-\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2-1-componentscan-\u6CE8\u89E3" aria-hidden="true">#</a> 2.1 <code>@ComponentScan</code> \u6CE8\u89E3</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>excludeFilters <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span> classes <span class="token operator">=</span> <span class="token class-name">TypeExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span> classes <span class="token operator">=</span> <span class="token class-name">AutoConfigurationExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E2A\u6CE8\u89E3\u54B1\u4EEC\u90FD\u662F\u6BD4\u8F83\u719F\u6089\u7684\uFF0C\u65E0\u975E\u5C31\u662F\u81EA\u52A8\u626B\u63CF\u5E76\u52A0\u8F7D\u7B26\u5408\u6761\u4EF6\u7684Bean\u5230\u5BB9\u5668\u4E2D\uFF0C\u8FD9\u4E2A\u6CE8\u89E3\u4F1A\u9ED8\u8BA4\u626B\u63CF\u58F0\u660E\u7C7B\u6240\u5728\u7684\u5305\u5F00\u59CB\u626B\u63CF\uFF0C\u4F8B\u5982\uFF1A \u7C7B<code>com.zszdevelop.Demo</code>\u7C7B\u4E0A\u6807\u6CE8\u4E86<code>@ComponentScan</code> \u6CE8\u89E3\uFF0C\u5219<code>com.zszdevelop.controller</code>\u3001<code>com.zszdevelop.service</code>\u7B49\u7B49\u5305\u4E0B\u7684\u7C7B\u90FD\u53EF\u4EE5\u88AB\u626B\u63CF\u5230</p><p>\u8FD9\u4E2A\u6CE8\u89E3\u4E00\u5171\u5305\u542B\u4EE5\u4E0B\u51E0\u4E2A\u5C5E\u6027\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>basePackages\uFF1A\u6307\u5B9A\u591A\u4E2A\u5305\u540D\u8FDB\u884C\u626B\u63CF
basePackageClasses\uFF1A\u5BF9\u6307\u5B9A\u7684\u7C7B\u548C\u63A5\u53E3\u6240\u5C5E\u7684\u5305\u8FDB\u884C\u626B
excludeFilters\uFF1A\u6307\u5B9A\u4E0D\u626B\u63CF\u7684\u8FC7\u6EE4\u5668
includeFilters\uFF1A\u6307\u5B9A\u626B\u63CF\u7684\u8FC7\u6EE4\u5668
lazyInit\uFF1A\u662F\u5426\u5BF9\u6CE8\u518C\u626B\u63CF\u7684bean\u8BBE\u7F6E\u4E3A\u61D2\u52A0\u8F7D
nameGenerator\uFF1A\u4E3A\u626B\u63CF\u5230\u7684bean\u81EA\u52A8\u547D\u540D
resourcePattern\uFF1A\u63A7\u5236\u53EF\u7528\u4E8E\u626B\u63CF\u7684\u7C7B\u6587\u4EF6
scopedProxy\uFF1A\u6307\u5B9A\u4EE3\u7406\u662F\u5426\u5E94\u8BE5\u88AB\u626B\u63CF
scopeResolver\uFF1A\u6307\u5B9A\u626B\u63CFbean\u7684\u8303\u56F4
useDefaultFilters\uFF1A\u662F\u5426\u5F00\u542F\u5BF9<span class="token annotation punctuation">@Component</span>\uFF0C<span class="token annotation punctuation">@Repository</span>\uFF0C<span class="token annotation punctuation">@Service</span>\uFF0C<span class="token annotation punctuation">@Controller</span>\u7684\u7C7B\u8FDB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-springbootconfiguration\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2-2-springbootconfiguration\u6CE8\u89E3" aria-hidden="true">#</a> 2.2 <code>@SpringBootConfiguration</code>\u6CE8\u89E3</h3><p>\u5BF9<code>Configuration</code>\u6CE8\u89E3\u7684\u4E00\u4E2A\u5C01\u88C5\u800C\u5DF2</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootConfiguration</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-enableautoconfiguration\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2-3-enableautoconfiguration\u6CE8\u89E3" aria-hidden="true">#</a> 2.3 <code>@EnableAutoConfiguration</code>\u6CE8\u89E3</h3><p>\u542F\u7528 SpringBoot \u7684\u81EA\u52A8\u914D\u7F6E\u673A\u5236\u3002</p><p><strong>\u5229\u7528<code>@Import</code>\u6CE8\u89E3\uFF0C\u5C06\u6240\u6709\u7B26\u5408\u81EA\u52A8\u88C5\u914D\u6761\u4EF6\u7684bean\u6CE8\u5165\u5230IOC\u5BB9\u5668\u4E2D</strong></p><blockquote><p>\u8FD9\u4E2A\u6CE8\u89E3\u53EF\u662F\u91CD\u5934\u620F\u4E86\uFF0CSpringBoot\u53F7\u79F0\u7684\u7EA6\u5B9A\u5927\u4E8E\u914D\u7F6E\uFF0C\u4E5F\u5C31\u662F\u672C\u6587\u7684\u91CD\u70B9\u81EA\u52A8\u88C5\u914D\u7684\u539F\u7406\u5C31\u5728\u8FD9\u91CC\u4E86</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableAutoConfiguration</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token constant">ENABLED_OVERRIDE_PROPERTY</span> <span class="token operator">=</span> <span class="token string">&quot;spring.boot.enableautoconfiguration&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exclude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">excludeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-1-enableautoconfiguration\u6CE8\u89E3\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_2-3-1-enableautoconfiguration\u6CE8\u89E3\u4F5C\u7528" aria-hidden="true">#</a> 2.3.1 <code>@EnableAutoConfiguration</code>\u6CE8\u89E3\u4F5C\u7528</h4><p><strong>\u5229\u7528<code>@Import</code>\u6CE8\u89E3\uFF0C\u5C06\u6240\u6709\u7B26\u5408\u81EA\u52A8\u88C5\u914D\u6761\u4EF6\u7684bean\u6CE8\u5165\u5230IOC\u5BB9\u5668\u4E2D</strong></p>`,24),d=o(`<h4 id="_2-3-1-import-\u5BFC\u5165\u7684-autoconfigurationimportselector-class-\u6E90\u7801" tabindex="-1"><a class="header-anchor" href="#_2-3-1-import-\u5BFC\u5165\u7684-autoconfigurationimportselector-class-\u6E90\u7801" aria-hidden="true">#</a> 2.3.1 @Import \u5BFC\u5165\u7684 AutoConfigurationImportSelector.class \u6E90\u7801</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 1. \u5F53\u524D\u7CFB\u7EDF\u662F\u5426\u7981\u7528\u4E86\u81EA\u52A8\u88C5\u914D\u7684\u529F\u80FD</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEnabled</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// \u5982\u679C\u5F53\u524D\u7CFB\u7EDF\u7981\u7528\u4E86\u81EA\u52A8\u88C5\u914D\u7684\u529F\u80FD\u5219\u4F1A\u8FD4\u56DE\u5982\u4E0B\u8FD9\u4E2A\u7A7A\u7684\u6570\u7EC4\uFF0C\u540E\u7EED\u4E5F\u5C31\u65E0\u6CD5\u6CE8\u5165bean\u4E86</span>
			<span class="token keyword">return</span> <span class="token constant">NO_IMPORTS</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 2. \u52A0\u8F7D\u6240\u6709Spring\u9884\u5148\u5B9A\u4E49\u7684\u914D\u7F6E\u6761\u4EF6\u4FE1\u606F\uFF0C</span>
		<span class="token comment">// \u8FD9\u4E9B\u914D\u7F6E\u4FE1\u606F\u5728org.springframework.boot.autoconfigure\u5305\u4E0B\u7684META-INF/spring-autoconfigure-metadata.properties\u6587\u4EF6\u4E2D</span>
		<span class="token class-name">AutoConfigurationMetadata</span> autoConfigurationMetadata <span class="token operator">=</span> <span class="token class-name">AutoConfigurationMetadataLoader</span>
				<span class="token punctuation">.</span><span class="token function">loadMetadata</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>beanClassLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 3. \u8FC7\u6EE4\u51FA\u6EE1\u8DB3\u6761\u4EF6\u7684\u914D\u7F6E\u4FE1\u606F</span>
		<span class="token class-name">AutoConfigurationEntry</span> autoConfigurationEntry <span class="token operator">=</span> <span class="token function">getAutoConfigurationEntry</span><span class="token punctuation">(</span>
				autoConfigurationMetadata<span class="token punctuation">,</span> annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">toStringArray</span><span class="token punctuation">(</span>autoConfigurationEntry<span class="token punctuation">.</span><span class="token function">getConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
	 * \u7B2C\u4E00\u6B65\uFF1A\u5224\u65AD\u5F53\u524D\u7CFB\u7EDF\u662F\u5426\u7981\u7528\u4E86\u81EA\u52A8\u88C5\u914D\u7684\u529F\u80FD
	 * <span class="token keyword">@param</span> <span class="token parameter">metadata</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">getEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>
					<span class="token class-name">EnableAutoConfiguration</span><span class="token punctuation">.</span><span class="token constant">ENABLED_OVERRIDE_PROPERTY</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
					<span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
	 * \u7B2C\u4E8C\u6B65\uFF1A\u52A0\u8F7D\u6240\u6709Spring\u9884\u5148\u5B9A\u4E49\u7684\u914D\u7F6E\u6761\u4EF6\u4FE1\u606F\uFF08properties\u4E2D\uFF09
	 * \u8FD9\u4E9B\u914D\u7F6E\u4FE1\u606F\u5728org.springframework.boot.autoconfigure\u5305\u4E0B\u7684META-INF/spring-autoconfigure-metadata.properties\u6587\u4EF6\u4E2D
	 * <span class="token keyword">@param</span> <span class="token parameter">classLoader</span>
	 * <span class="token keyword">@param</span> <span class="token parameter">path</span>
	 * <span class="token keyword">@return</span>
	 */</span>
	<span class="token keyword">static</span> <span class="token class-name">AutoConfigurationMetadata</span> <span class="token function">loadMetadata</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span> classLoader<span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span>URL<span class="token punctuation">&gt;</span></span> urls <span class="token operator">=</span> <span class="token punctuation">(</span>classLoader <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> classLoader<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
					<span class="token operator">:</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span class="token function">getSystemResources</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>urls<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				properties<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span><span class="token class-name">PropertiesLoaderUtils</span>
						<span class="token punctuation">.</span><span class="token function">loadProperties</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UrlResource</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token function">loadMetadata</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span>
					<span class="token string">&quot;Unable to load @ConditionalOnClass location [&quot;</span> <span class="token operator">+</span> path <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
	 * \u7B2C\u4E09\u6B65\uFF1A\u8FC7\u6EE4\u51FA\u6EE1\u8DB3\u6761\u4EF6\u7684\u914D\u7F6E\u4FE1\u606F
	 */</span>
	<span class="token keyword">protected</span> <span class="token class-name">AutoConfigurationEntry</span> <span class="token function">getAutoConfigurationEntry</span><span class="token punctuation">(</span>
			<span class="token class-name">AutoConfigurationMetadata</span> autoConfigurationMetadata<span class="token punctuation">,</span>
			<span class="token class-name">AnnotationMetadata</span> annotationMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEnabled</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token constant">EMPTY_ENTRY</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 1.\u83B7\u53D6@EnableAutoConfiguration\u6CE8\u89E3\u4E0A\u7684exclude\u3001excludeName\u5C5E\u6027\uFF0C\u8FD9\u4E24\u4E2A\u5C5E\u6027\u7684\u4F5C\u7528\u90FD\u662F\u6392\u9664\u4E00\u4E9B\u7C7B\u7684</span>
		<span class="token class-name">AnnotationAttributes</span> attributes <span class="token operator">=</span> <span class="token function">getAttributes</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 2. \u52A0\u8F7D\u6574\u4E2A\u9879\u76EE\u6240\u6709\u7684spring.factories\u6587\u4EF6</span>
		<span class="token comment">// \u521A\u624D\u56FE\u7247\u4E2Dspring-autoconfigure-metadata.properties\u6587\u4EF6\u7684\u4E0A\u65B9\u5B58\u5728\u4E00\u4E2A\u6587\u4EF6spring.factories\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u53EF\u5C31\u4E0D\u6B62\u5B58\u5728\u4E8E\`org.springframework.boot.autoconfigure\`\u5305\u91CC\u4E86</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span>
				attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 3. \u79FB\u9664\u91CD\u590D\u7684\u914D\u7F6E</span>
		configurations <span class="token operator">=</span> <span class="token function">removeDuplicates</span><span class="token punctuation">(</span>configurations<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 4. \u53BB\u9664\u6211\u4EEC\u6307\u5B9A\u6392\u9664\u7684\u914D\u7F6E\u7C7B</span>
		<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> exclusions <span class="token operator">=</span> <span class="token function">getExclusions</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">checkExcludedClasses</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
		configurations<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 5. \u5C31\u662F\u6839\u636E\u52A0\u8F7D\u7684\u914D\u7F6E\u6761\u4EF6\u4FE1\u606F\u6765\u5224\u65AD\u5404\u4E2A\u914D\u7F6E\u7C7B\u4E0A\u7684\`@ConditionalXXX\`\u7CFB\u5217\u6CE8\u89E3\u662F\u5426\u6EE1\u8DB3\u9700\u6C42</span>
		configurations <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> autoConfigurationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 6. \u6700\u540E\u5C31\u662F\u53D1\u5E03\u81EA\u52A8\u88C5\u914D\u5B8C\u6210\u4E8B\u4EF6\uFF0C\u7136\u540E\u8FD4\u56DE\u6240\u6709\u80FD\u591F\u81EA\u52A8\u88C5\u914D\u7684\u7C7B\u7684\u5168\u9650\u5B9A\u540D</span>
		<span class="token function">fireAutoConfigurationImportEvents</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AutoConfigurationEntry</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-2-enableautoconfiguration-\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#_2-3-2-enableautoconfiguration-\u6D41\u7A0B" aria-hidden="true">#</a> 2.3.2 @EnableAutoConfiguration \u6D41\u7A0B</h4><ol><li><p>\u7B2C\u4E00\u884Cif\u65F6\u4F1A\u9996\u5148\u5224\u65AD\u5F53\u524D\u7CFB\u7EDF\u662F\u5426\u7981\u7528\u4E86\u81EA\u52A8\u88C5\u914D\u7684\u529F\u80FD\uFF0C\u5224\u65AD\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">getEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>
					<span class="token class-name">EnableAutoConfiguration</span><span class="token punctuation">.</span><span class="token constant">ENABLED_OVERRIDE_PROPERTY</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
					<span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u5F53\u524D\u7CFB\u7EDF\u7981\u7528\u4E86\u81EA\u52A8\u88C5\u914D\u7684\u529F\u80FD\u5219\u4F1A\u8FD4\u56DE\u5982\u4E0B\u8FD9\u4E2A\u7A7A\u7684\u6570\u7EC4\uFF0C\u540E\u7EED\u4E5F\u5C31\u65E0\u6CD5\u6CE8\u5165bean\u4E86</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">NO_IMPORTS</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u52A0\u8F7D\u6240\u6709Spring\u9884\u5148\u5B9A\u4E49\u7684\u914D\u7F6E\u6761\u4EF6\u4FE1\u606F</p><blockquote><p>\u8FD9\u4E9B\u914D\u7F6E\u4FE1\u606F\u5728org.springframework.boot.autoconfigure\u5305\u4E0B\u7684<strong>META-INF/spring-autoconfigure-metadata.properties</strong>\u6587\u4EF6\u4E2D</p></blockquote><ul><li>\u8BE5\u6587\u4EF6\u7684\u5185\u5BB9\u683C\u5F0F</li></ul><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">org.springframework.boot.actuate.autoconfigure.web.servlet.WebMvcEndpointChildContextConfiguration.ConditionalOnClass</span><span class="token punctuation">=</span><span class="token value attr-value">org.springframework.web.servlet.DispatcherServlet</span>
<span class="token key attr-name">org.springframework.boot.actuate.autoconfigure.metrics.jdbc.DataSourcePoolMetricsAutoConfiguration.ConditionalOnClass</span><span class="token punctuation">=</span><span class="token value attr-value">javax.sql.DataSource,io.micrometer.core.instrument.MeterRegistry</span>
<span class="token key attr-name">org.springframework.boot.actuate.autoconfigure.flyway.FlywayEndpointAutoConfiguration.AutoConfigureAfter</span><span class="token punctuation">=</span><span class="token value attr-value">org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u52A0\u8F7D\u4E4B\u540E\u7684\u7ED3\u679C\u56FE</li></ul><p><img src="https://abelsun-1256449468.cos.ap-beijing.myqcloud.com/image/image-20220511220015163.png" alt="image-20220511220015163"></p></li><li><p>\u8FC7\u6EE4\u51FA\u6EE1\u8DB3\u6761\u4EF6\u7684\u914D\u7F6E\u4FE1\u606F</p><ol><li><p>\u83B7\u53D6<code>@EnableAutoConfiguration</code>\u6CE8\u89E3\u4E0A\u7684exclude\u3001excludeName\u5C5E\u6027\uFF0C\u8FD9\u4E24\u4E2A\u5C5E\u6027\u7684\u4F5C\u7528\u90FD\u662F\u6392\u9664\u4E00\u4E9B\u7C7B\u7684</p></li><li><p>\u52A0\u8F7D\u6574\u4E2A\u9879\u76EE\u6240\u6709\u7684spring.factories\u6587\u4EF6</p><blockquote><p>\u521A\u624D\u56FE\u7247\u4E2Dspring-autoconfigure-metadata.properties\u6587\u4EF6\u7684\u4E0A\u65B9\u5B58\u5728\u4E00\u4E2A\u6587\u4EF6spring.factories\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u53EF\u5C31\u4E0D\u6B62\u5B58\u5728\u4E8E<code>org.springframework.boot.autoconfigure</code>\u5305\u91CC\u4E86</p></blockquote></li><li><p>\u5220\u9664\u91CD\u590D\u7684\u81EA\u52A8\u914D\u7F6E\u7C7B</p></li><li><p>\u53BB\u9664\u6211\u4EEC\u6307\u5B9A\u6392\u9664\u7684\u914D\u7F6E\u7C7B</p></li><li><p>\u5C31\u662F<strong>\u6839\u636E\u52A0\u8F7D\u7684\u914D\u7F6E\u6761\u4EF6\u4FE1\u606F\u6765\u5224\u65AD\u5404\u4E2A\u914D\u7F6E\u7C7B\u4E0A\u7684<code>@ConditionalXXX</code>\u7CFB\u5217\u6CE8\u89E3\u662F\u5426\u6EE1\u8DB3\u9700\u6C42</strong></p></li><li><p>\u6700\u540E\u5C31\u662F\u53D1\u5E03\u81EA\u52A8\u88C5\u914D\u5B8C\u6210\u4E8B\u4EF6\uFF0C\u7136\u540E\u8FD4\u56DE\u6240\u6709\u80FD\u591F\u81EA\u52A8\u88C5\u914D\u7684\u7C7B\u7684\u5168\u9650\u5B9A\u540D</p></li></ol></li></ol><h2 id="\u53C2\u8003\u6587\u7AE0" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u6587\u7AE0" aria-hidden="true">#</a> \u53C2\u8003\u6587\u7AE0</h2>`,5),v={href:"https://mp.weixin.qq.com/s/I3-sM55JSb4BFJ-zPosZgQ",target:"_blank",rel:"noopener noreferrer"};function m(b,g){const e=t("RouterLink"),p=t("ExternalLinkIcon");return i(),l("div",null,[k,n("blockquote",null,[n("p",null,[a("\u5173\u4E8E@Import\u53EF\u67E5\u770B "),s(e,{to:"/dependencies/spring-boot/springboot-y-annotation-enable-import.html"},{default:u(()=>[a("Spring Boot \u81EA\u52A8\u914D\u7F6E\u4E4B@Enable\u4E0E@Import\u6CE8\u89E3")]),_:1})])]),d,n("p",null,[n("a",v,[a("SpringBoot\u81EA\u52A8\u88C5\u914D\u539F\u7406\u89E3\u6790"),s(p)])])])}const h=c(r,[["render",m],["__file","springboot-y-source-autoconfig.html.vue"]]);export{h as default};
