import{_ as i}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as l,c as o,a as e,b as a,d as r,e as d,r as n}from"./app.cfc5ed85.js";const s={},c={href:"https://mp.weixin.qq.com/s/JFjFs_7xduCmHOegbJ-Gbg",target:"_blank",rel:"noopener noreferrer"},p={href:"https://mp.weixin.qq.com/s/zSTyZ-8CFalwAYSB0PN6wA",target:"_blank",rel:"noopener noreferrer"},b=d(`<h2 id="\u57FA\u7840" tabindex="-1"><a class="header-anchor" href="#\u57FA\u7840" aria-hidden="true">#</a> \u57FA\u7840</h2><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-1992b6dd-1c1d-4b8b-b98a-8407e8c51ff9.jpg" alt=""></p><p>\u4F5C\u4E3A SQL Boy\uFF0C\u57FA\u7840\u90E8\u5206\u4E0D\u4F1A\u6709\u4EBA\u4E0D\u4F1A\u5427\uFF1F\u9762\u8BD5\u4E5F\u4E0D\u600E\u4E48\u95EE\uFF0C\u57FA\u7840\u638C\u63E1\u4E0D\u9519\u7684\u5C0F\u4F19\u4F34\u53EF\u4EE5<strong>\u8DF3\u8FC7</strong>\u8FD9\u4E00\u90E8\u5206\u3002\u5F53\u7136\uFF0C\u53EF\u80FD\u4F1A\u73B0\u573A\u5199\u4E00\u4E9B SQL \u8BED\u53E5\uFF0CSQ \u8BED\u53E5\u53EF\u4EE5\u901A\u8FC7\u725B\u5BA2\u3001LeetCode\u3001LintCode \u4E4B\u7C7B\u7684\u7F51\u7AD9\u6765\u7EC3\u4E60\u3002</p><h3 id="_1-\u4EC0\u4E48\u662F\u5185\u8FDE\u63A5\u3001\u5916\u8FDE\u63A5\u3001\u4EA4\u53C9\u8FDE\u63A5\u3001\u7B1B\u5361\u5C14\u79EF\u5462" tabindex="-1"><a class="header-anchor" href="#_1-\u4EC0\u4E48\u662F\u5185\u8FDE\u63A5\u3001\u5916\u8FDE\u63A5\u3001\u4EA4\u53C9\u8FDE\u63A5\u3001\u7B1B\u5361\u5C14\u79EF\u5462" aria-hidden="true">#</a> 1. \u4EC0\u4E48\u662F\u5185\u8FDE\u63A5\u3001\u5916\u8FDE\u63A5\u3001\u4EA4\u53C9\u8FDE\u63A5\u3001\u7B1B\u5361\u5C14\u79EF\u5462\uFF1F</h3><ul><li>\u5185\u8FDE\u63A5\uFF08inner join\uFF09\uFF1A\u53D6\u5F97\u4E24\u5F20\u8868\u4E2D\u6EE1\u8DB3\u5B58\u5728\u8FDE\u63A5\u5339\u914D\u5173\u7CFB\u7684\u8BB0\u5F55\u3002</li><li>\u5916\u8FDE\u63A5\uFF08outer join\uFF09\uFF1A\u4E0D\u53EA\u53D6\u5F97\u4E24\u5F20\u8868\u4E2D\u6EE1\u8DB3\u5B58\u5728\u8FDE\u63A5\u5339\u914D\u5173\u7CFB\u7684\u8BB0\u5F55\uFF0C\u8FD8\u5305\u62EC\u67D0\u5F20\u8868\uFF08\u6216\u4E24\u5F20\u8868\uFF09\u4E2D\u4E0D\u6EE1\u8DB3\u5339\u914D\u5173\u7CFB\u7684\u8BB0\u5F55\u3002</li><li>\u4EA4\u53C9\u8FDE\u63A5\uFF08cross join\uFF09\uFF1A\u663E\u793A\u4E24\u5F20\u8868\u6240\u6709\u8BB0\u5F55\u4E00\u4E00\u5BF9\u5E94\uFF0C\u6CA1\u6709\u5339\u914D\u5173\u7CFB\u8FDB\u884C\u7B5B\u9009\uFF0C\u5B83\u662F\u7B1B\u5361\u5C14\u79EF\u5728 SQL \u4E2D\u7684\u5B9E\u73B0\uFF0C\u5982\u679C A \u8868\u6709 m \u884C\uFF0CB \u8868\u6709 n \u884C\uFF0C\u90A3\u4E48 A \u548C B \u4EA4\u53C9\u8FDE\u63A5\u7684\u7ED3\u679C\u5C31\u6709 m*n \u884C\u3002</li><li>\u7B1B\u5361\u5C14\u79EF\uFF1A\u662F\u6570\u5B66\u4E2D\u7684\u4E00\u4E2A\u6982\u5FF5\uFF0C\u4F8B\u5982\u96C6\u5408 A={a,b}\uFF0C\u96C6\u5408 B={1,2,3}\uFF0C\u90A3\u4E48 A\u2716\uFE0FB=<code>{&lt;a,o&gt;,&lt;a,1&gt;,&lt;a,2&gt;,&lt;b,0&gt;,&lt;b,1&gt;,&lt;b,2&gt;,}</code>\u3002</li></ul><h3 id="_2-\u90A3-mysql-\u7684\u5185\u8FDE\u63A5\u3001\u5DE6\u8FDE\u63A5\u3001\u53F3\u8FDE\u63A5\u6709\u6709\u4EC0\u4E48\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_2-\u90A3-mysql-\u7684\u5185\u8FDE\u63A5\u3001\u5DE6\u8FDE\u63A5\u3001\u53F3\u8FDE\u63A5\u6709\u6709\u4EC0\u4E48\u533A\u522B" aria-hidden="true">#</a> 2. \u90A3 MySQL \u7684\u5185\u8FDE\u63A5\u3001\u5DE6\u8FDE\u63A5\u3001\u53F3\u8FDE\u63A5\u6709\u6709\u4EC0\u4E48\u533A\u522B\uFF1F</h3><p>MySQL \u7684\u8FDE\u63A5\u4E3B\u8981\u5206\u4E3A\u5185\u8FDE\u63A5\u548C\u5916\u8FDE\u63A5\uFF0C\u5916\u8FDE\u63A5\u5E38\u7528\u7684\u6709\u5DE6\u8FDE\u63A5\u3001\u53F3\u8FDE\u63A5\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-fcdaad5f-c50e-4834-9f9a-0b676cc6be83.jpg" alt=""></p><p>MySQL-joins-\u6765\u6E90\u83DC\u9E1F\u6559\u7A0B</p><ul><li>inner join \u5185\u8FDE\u63A5\uFF0C\u5728\u4E24\u5F20\u8868\u8FDB\u884C\u8FDE\u63A5\u67E5\u8BE2\u65F6\uFF0C\u53EA\u4FDD\u7559\u4E24\u5F20\u8868\u4E2D\u5B8C\u5168\u5339\u914D\u7684\u7ED3\u679C\u96C6</li><li>left join \u5728\u4E24\u5F20\u8868\u8FDB\u884C\u8FDE\u63A5\u67E5\u8BE2\u65F6\uFF0C\u4F1A\u8FD4\u56DE\u5DE6\u8868\u6240\u6709\u7684\u884C\uFF0C\u5373\u4F7F\u5728\u53F3\u8868\u4E2D\u6CA1\u6709\u5339\u914D\u7684\u8BB0\u5F55\u3002</li><li>right join \u5728\u4E24\u5F20\u8868\u8FDB\u884C\u8FDE\u63A5\u67E5\u8BE2\u65F6\uFF0C\u4F1A\u8FD4\u56DE\u53F3\u8868\u6240\u6709\u7684\u884C\uFF0C\u5373\u4F7F\u5728\u5DE6\u8868\u4E2D\u6CA1\u6709\u5339\u914D\u7684\u8BB0\u5F55\u3002</li></ul><h3 id="_3-\u8BF4\u4E00\u4E0B\u6570\u636E\u5E93\u7684\u4E09\u5927\u8303\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-\u8BF4\u4E00\u4E0B\u6570\u636E\u5E93\u7684\u4E09\u5927\u8303\u5F0F" aria-hidden="true">#</a> 3.\u8BF4\u4E00\u4E0B\u6570\u636E\u5E93\u7684\u4E09\u5927\u8303\u5F0F\uFF1F</h3><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-16e74a6b-a42a-464e-9b10-0252ee7ecc6e.jpg" alt="\u6570\u636E\u5E93\u4E09\u8303\u5F0F"></p><ul><li>\u7B2C\u4E00\u8303\u5F0F\uFF1A\u6570\u636E\u8868\u4E2D\u7684\u6BCF\u4E00\u5217\uFF08\u6BCF\u4E2A\u5B57\u6BB5\uFF09\u90FD\u4E0D\u53EF\u4EE5\u518D\u62C6\u5206\u3002\u4F8B\u5982\u7528\u6237\u8868\uFF0C\u7528\u6237\u5730\u5740\u8FD8\u53EF\u4EE5\u62C6\u5206\u6210\u56FD\u5BB6\u3001\u7701\u4EFD\u3001\u5E02\uFF0C\u8FD9\u6837\u624D\u662F\u7B26\u5408\u7B2C\u4E00\u8303\u5F0F\u7684\u3002</li><li>\u7B2C\u4E8C\u8303\u5F0F\uFF1A\u5728\u7B2C\u4E00\u8303\u5F0F\u7684\u57FA\u7840\u4E0A\uFF0C\u975E\u4E3B\u952E\u5217\u5B8C\u5168\u4F9D\u8D56\u4E8E\u4E3B\u952E\uFF0C\u800C\u4E0D\u80FD\u662F\u4F9D\u8D56\u4E8E\u4E3B\u952E\u7684\u4E00\u90E8\u5206\u3002\u4F8B\u5982\u8BA2\u5355\u8868\u91CC\uFF0C\u5B58\u50A8\u4E86\u5546\u54C1\u4FE1\u606F\uFF08\u5546\u54C1\u4EF7\u683C\u3001\u5546\u54C1\u7C7B\u578B\uFF09\uFF0C\u90A3\u5C31\u9700\u8981\u628A\u5546\u54C1 ID \u548C\u8BA2\u5355 ID \u4F5C\u4E3A\u8054\u5408\u4E3B\u952E\uFF0C\u624D\u6EE1\u8DB3\u7B2C\u4E8C\u8303\u5F0F\u3002</li><li>\u7B2C\u4E09\u8303\u5F0F\uFF1A\u5728\u6EE1\u8DB3\u7B2C\u4E8C\u8303\u5F0F\u7684\u57FA\u7840\u4E0A\uFF0C\u8868\u4E2D\u7684\u975E\u4E3B\u952E\u53EA\u4F9D\u8D56\u4E8E\u4E3B\u952E\uFF0C\u800C\u4E0D\u4F9D\u8D56\u4E8E\u5176\u4ED6\u975E\u4E3B\u952E\u3002\u4F8B\u5982\u8BA2\u5355\u8868\uFF0C\u5C31\u4E0D\u80FD\u5B58\u50A8\u7528\u6237\u4FE1\u606F\uFF08\u59D3\u540D\u3001\u5730\u5740\uFF09\u3002</li></ul><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-5351d57d-1cea-49c8-b6bb-b7d49abb4427.jpg" alt="\u4F60\u8BBE\u8BA1\u9075\u5B88\u8303\u5F0F\u5417\uFF1F"></p><p>\u4E09\u5927\u8303\u5F0F\u7684\u4F5C\u7528\u662F\u4E3A\u4E86\u63A7\u5236\u6570\u636E\u5E93\u7684\u5197\u4F59\uFF0C\u662F\u5BF9\u7A7A\u95F4\u7684\u8282\u7701\uFF0C\u5B9E\u9645\u4E0A\uFF0C\u4E00\u822C\u4E92\u8054\u7F51\u516C\u53F8\u7684\u8BBE\u8BA1\u90FD\u662F\u53CD\u8303\u5F0F\u7684\uFF0C\u901A\u8FC7\u5197\u4F59\u4E00\u4E9B\u6570\u636E\uFF0C\u907F\u514D\u8DE8\u8868\u8DE8\u5E93\uFF0C\u5229\u7528\u7A7A\u95F4\u6362\u65F6\u95F4\uFF0C\u63D0\u9AD8\u6027\u80FD\u3002</p><h3 id="_4-varchar-\u4E0E-char-\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_4-varchar-\u4E0E-char-\u7684\u533A\u522B" aria-hidden="true">#</a> 4.varchar \u4E0E char \u7684\u533A\u522B\uFF1F</h3><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-40f42d59-a295-4543-8a03-43925da4d6d9.jpg" alt="varchar"></p><p><strong>char</strong>\uFF1A</p><ul><li>char \u8868\u793A\u5B9A\u957F\u5B57\u7B26\u4E32\uFF0C\u957F\u5EA6\u662F\u56FA\u5B9A\u7684\uFF1B</li><li>\u5982\u679C\u63D2\u5165\u6570\u636E\u7684\u957F\u5EA6\u5C0F\u4E8E char \u7684\u56FA\u5B9A\u957F\u5EA6\u65F6\uFF0C\u5219\u7528\u7A7A\u683C\u586B\u5145\uFF1B</li><li>\u56E0\u4E3A\u957F\u5EA6\u56FA\u5B9A\uFF0C\u6240\u4EE5\u5B58\u53D6\u901F\u5EA6\u8981\u6BD4 varchar \u5FEB\u5F88\u591A\uFF0C\u751A\u81F3\u80FD\u5FEB 50%\uFF0C\u4F46\u6B63\u56E0\u4E3A\u5176\u957F\u5EA6\u56FA\u5B9A\uFF0C\u6240\u4EE5\u4F1A\u5360\u636E\u591A\u4F59\u7684\u7A7A\u95F4\uFF0C\u662F\u7A7A\u95F4\u6362\u65F6\u95F4\u7684\u505A\u6CD5\uFF1B</li><li>\u5BF9\u4E8E char \u6765\u8BF4\uFF0C\u6700\u591A\u80FD\u5B58\u653E\u7684\u5B57\u7B26\u4E2A\u6570\u4E3A 255\uFF0C\u548C\u7F16\u7801\u65E0\u5173</li></ul><p><strong>varchar</strong>\uFF1A</p><ul><li>varchar \u8868\u793A\u53EF\u53D8\u957F\u5B57\u7B26\u4E32\uFF0C\u957F\u5EA6\u662F\u53EF\u53D8\u7684\uFF1B</li><li>\u63D2\u5165\u7684\u6570\u636E\u662F\u591A\u957F\uFF0C\u5C31\u6309\u7167\u591A\u957F\u6765\u5B58\u50A8\uFF1B</li><li>varchar \u5728\u5B58\u53D6\u65B9\u9762\u4E0E char \u76F8\u53CD\uFF0C\u5B83\u5B58\u53D6\u6162\uFF0C\u56E0\u4E3A\u957F\u5EA6\u4E0D\u56FA\u5B9A\uFF0C\u4F46\u6B63\u56E0\u5982\u6B64\uFF0C\u4E0D\u5360\u636E\u591A\u4F59\u7684\u7A7A\u95F4\uFF0C\u662F\u65F6\u95F4\u6362\u7A7A\u95F4\u7684\u505A\u6CD5\uFF1B</li><li>\u5BF9\u4E8E varchar \u6765\u8BF4\uFF0C\u6700\u591A\u80FD\u5B58\u653E\u7684\u5B57\u7B26\u4E2A\u6570\u4E3A 65532</li></ul><p>\u65E5\u5E38\u7684\u8BBE\u8BA1\uFF0C\u5BF9\u4E8E\u957F\u5EA6\u76F8\u5BF9\u56FA\u5B9A\u7684\u5B57\u7B26\u4E32\uFF0C\u53EF\u4EE5\u4F7F\u7528 char\uFF0C\u5BF9\u4E8E\u957F\u5EA6\u4E0D\u786E\u5B9A\u7684\uFF0C\u4F7F\u7528 varchar \u66F4\u5408\u9002\u4E00\u4E9B\u3002</p><h3 id="_5-blob-\u548C-text-\u6709\u4EC0\u4E48\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_5-blob-\u548C-text-\u6709\u4EC0\u4E48\u533A\u522B" aria-hidden="true">#</a> 5.blob \u548C text \u6709\u4EC0\u4E48\u533A\u522B\uFF1F</h3><ul><li>blob \u7528\u4E8E\u5B58\u50A8\u4E8C\u8FDB\u5236\u6570\u636E\uFF0C\u800C text \u7528\u4E8E\u5B58\u50A8\u5927\u5B57\u7B26\u4E32\u3002</li><li>blob \u6CA1\u6709\u5B57\u7B26\u96C6\uFF0Ctext \u6709\u4E00\u4E2A\u5B57\u7B26\u96C6\uFF0C\u5E76\u4E14\u6839\u636E\u5B57\u7B26\u96C6\u7684\u6821\u5BF9\u89C4\u5219\u5BF9\u503C\u8FDB\u884C\u6392\u5E8F\u548C\u6BD4\u8F83</li></ul><h3 id="_6-datetime-\u548C-timestamp-\u7684\u5F02\u540C" tabindex="-1"><a class="header-anchor" href="#_6-datetime-\u548C-timestamp-\u7684\u5F02\u540C" aria-hidden="true">#</a> 6.DATETIME \u548C TIMESTAMP \u7684\u5F02\u540C\uFF1F</h3><p><strong>\u76F8\u540C\u70B9</strong>\uFF1A</p><ol><li>\u4E24\u4E2A\u6570\u636E\u7C7B\u578B\u5B58\u50A8\u65F6\u95F4\u7684\u8868\u73B0\u683C\u5F0F\u4E00\u81F4\u3002\u5747\u4E3A <code>YYYY-MM-DD HH:MM:SS</code></li><li>\u4E24\u4E2A\u6570\u636E\u7C7B\u578B\u90FD\u5305\u542B\u300C\u65E5\u671F\u300D\u548C\u300C\u65F6\u95F4\u300D\u90E8\u5206\u3002</li><li>\u4E24\u4E2A\u6570\u636E\u7C7B\u578B\u90FD\u53EF\u4EE5\u5B58\u50A8\u5FAE\u79D2\u7684\u5C0F\u6570\u79D2\uFF08\u79D2\u540E 6 \u4F4D\u5C0F\u6570\u79D2\uFF09</li></ol><p><strong>\u533A\u522B</strong>\uFF1A</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-d94e5e1c-2614-4b8b-acdb-efb333032854.jpg" alt=""></p><p>DATETIME \u548C TIMESTAMP \u7684\u533A\u522B</p><ol><li><strong>\u65E5\u671F\u8303\u56F4</strong>\uFF1ADATETIME \u7684\u65E5\u671F\u8303\u56F4\u662F <code>1000-01-01 00:00:00.000000</code> \u5230 <code>9999-12-31 23:59:59.999999</code>\uFF1BTIMESTAMP \u7684\u65F6\u95F4\u8303\u56F4\u662F<code>1970-01-01 00:00:01.000000</code> UTC <code>\u5230 \`\`2038-01-09 03:14:07.999999</code> UTC</li><li><strong>\u5B58\u50A8\u7A7A\u95F4</strong>\uFF1ADATETIME \u7684\u5B58\u50A8\u7A7A\u95F4\u4E3A 8 \u5B57\u8282\uFF1BTIMESTAMP \u7684\u5B58\u50A8\u7A7A\u95F4\u4E3A 4 \u5B57\u8282</li><li><strong>\u65F6\u533A\u76F8\u5173</strong>\uFF1ADATETIME \u5B58\u50A8\u65F6\u95F4\u4E0E\u65F6\u533A\u65E0\u5173\uFF1BTIMESTAMP \u5B58\u50A8\u65F6\u95F4\u4E0E\u65F6\u533A\u6709\u5173\uFF0C\u663E\u793A\u7684\u503C\u4E5F\u4F9D\u8D56\u4E8E\u65F6\u533A</li><li><strong>\u9ED8\u8BA4\u503C</strong>\uFF1ADATETIME \u7684\u9ED8\u8BA4\u503C\u4E3A null\uFF1BTIMESTAMP \u7684\u5B57\u6BB5\u9ED8\u8BA4\u4E0D\u4E3A\u7A7A(not null)\uFF0C\u9ED8\u8BA4\u503C\u4E3A\u5F53\u524D\u65F6\u95F4(CURRENT_TIMESTAMP)</li></ol><h3 id="_7-mysql-\u4E2D-in-\u548C-exists-\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_7-mysql-\u4E2D-in-\u548C-exists-\u7684\u533A\u522B" aria-hidden="true">#</a> 7.MySQL \u4E2D in \u548C exists \u7684\u533A\u522B\uFF1F</h3><p>MySQL \u4E2D\u7684 in \u8BED\u53E5\u662F\u628A\u5916\u8868\u548C\u5185\u8868\u4F5C hash \u8FDE\u63A5\uFF0C\u800C exists \u8BED\u53E5\u662F\u5BF9\u5916\u8868\u4F5C loop \u5FAA\u73AF\uFF0C\u6BCF\u6B21 loop \u5FAA\u73AF\u518D\u5BF9\u5185\u8868\u8FDB\u884C\u67E5\u8BE2\u3002\u6211\u4EEC\u53EF\u80FD\u8BA4\u4E3A exists \u6BD4 in \u8BED\u53E5\u7684\u6548\u7387\u8981\u9AD8\uFF0C\u8FD9\u79CD\u8BF4\u6CD5\u5176\u5B9E\u662F\u4E0D\u51C6\u786E\u7684\uFF0C\u8981\u533A\u5206\u60C5\u666F\uFF1A</p><ol><li>\u5982\u679C\u67E5\u8BE2\u7684\u4E24\u4E2A\u8868\u5927\u5C0F\u76F8\u5F53\uFF0C\u90A3\u4E48\u7528 in \u548C exists \u5DEE\u522B\u4E0D\u5927\u3002</li><li>\u5982\u679C\u4E24\u4E2A\u8868\u4E2D\u4E00\u4E2A\u8F83\u5C0F\uFF0C\u4E00\u4E2A\u662F\u5927\u8868\uFF0C\u5219\u5B50\u67E5\u8BE2\u8868\u5927\u7684\u7528 exists\uFF0C\u5B50\u67E5\u8BE2\u8868\u5C0F\u7684\u7528 in\u3002</li><li>not in \u548C not exists\uFF1A\u5982\u679C\u67E5\u8BE2\u8BED\u53E5\u4F7F\u7528\u4E86 not in\uFF0C\u90A3\u4E48\u5185\u5916\u8868\u90FD\u8FDB\u884C\u5168\u8868\u626B\u63CF\uFF0C\u6CA1\u6709\u7528\u5230\u7D22\u5F15\uFF1B\u800C not extsts \u7684\u5B50\u67E5\u8BE2\u4F9D\u7136\u80FD\u7528\u5230\u8868\u4E0A\u7684\u7D22\u5F15\u3002\u6240\u4EE5\u65E0\u8BBA\u90A3\u4E2A\u8868\u5927\uFF0C\u7528 not exists \u90FD\u6BD4 not in \u8981\u5FEB\u3002</li></ol><h3 id="_8-mysql-\u91CC\u8BB0\u5F55\u8D27\u5E01\u7528\u4EC0\u4E48\u5B57\u6BB5\u7C7B\u578B\u6BD4\u8F83\u597D" tabindex="-1"><a class="header-anchor" href="#_8-mysql-\u91CC\u8BB0\u5F55\u8D27\u5E01\u7528\u4EC0\u4E48\u5B57\u6BB5\u7C7B\u578B\u6BD4\u8F83\u597D" aria-hidden="true">#</a> 8.MySQL \u91CC\u8BB0\u5F55\u8D27\u5E01\u7528\u4EC0\u4E48\u5B57\u6BB5\u7C7B\u578B\u6BD4\u8F83\u597D\uFF1F</h3><p>\u8D27\u5E01\u5728\u6570\u636E\u5E93\u4E2D MySQL \u5E38\u7528 Decimal \u548C Numric \u7C7B\u578B\u8868\u793A\uFF0C\u8FD9\u4E24\u79CD\u7C7B\u578B\u88AB MySQL \u5B9E\u73B0\u4E3A\u540C\u6837\u7684\u7C7B\u578B\u3002\u4ED6\u4EEC\u88AB\u7528\u4E8E\u4FDD\u5B58\u4E0E\u8D27\u5E01\u6709\u5173\u7684\u6570\u636E\u3002</p><p>\u4F8B\u5982 salary DECIMAL(9,2)\uFF0C9(precision)\u4EE3\u8868\u5C06\u88AB\u7528\u4E8E\u5B58\u50A8\u503C\u7684\u603B\u7684\u5C0F\u6570\u4F4D\u6570\uFF0C\u800C 2(scale)\u4EE3\u8868\u5C06\u88AB\u7528\u4E8E\u5B58\u50A8\u5C0F\u6570\u70B9\u540E\u7684\u4F4D\u6570\u3002\u5B58\u50A8\u5728 salary \u5217\u4E2D\u7684\u503C\u7684\u8303\u56F4\u662F\u4ECE-9999999.99 \u5230 9999999.99\u3002</p><p>DECIMAL \u548C NUMERIC \u503C\u4F5C\u4E3A\u5B57\u7B26\u4E32\u5B58\u50A8\uFF0C\u800C\u4E0D\u662F\u4F5C\u4E3A\u4E8C\u8FDB\u5236\u6D6E\u70B9\u6570\uFF0C\u4EE5\u4FBF\u4FDD\u5B58\u90A3\u4E9B\u503C\u7684\u5C0F\u6570\u7CBE\u5EA6\u3002</p><p>\u4E4B\u6240\u4EE5\u4E0D\u4F7F\u7528 float \u6216\u8005 double \u7684\u539F\u56E0\uFF1A\u56E0\u4E3A float \u548C double \u662F\u4EE5\u4E8C\u8FDB\u5236\u5B58\u50A8\u7684\uFF0C\u6240\u4EE5\u6709\u4E00\u5B9A\u7684\u8BEF\u5DEE\u3002</p><h3 id="_9-mysql-\u600E\u4E48\u5B58\u50A8-emoji\u{1F60A}" tabindex="-1"><a class="header-anchor" href="#_9-mysql-\u600E\u4E48\u5B58\u50A8-emoji\u{1F60A}" aria-hidden="true">#</a> 9.MySQL \u600E\u4E48\u5B58\u50A8 emoji\u{1F60A}?</h3><p>MySQL \u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\u5B57\u7B26\u4E32\u5B58\u50A8 emoji\u3002</p><p>\u4F46\u662F\u9700\u8981\u6CE8\u610F\u7684\uFF0Cutf8 \u7F16\u7801\u662F\u4E0D\u884C\u7684\uFF0CMySQL \u4E2D\u7684 utf8 \u662F\u9609\u5272\u7248\u7684 utf8\uFF0C\u5B83\u6700\u591A\u53EA\u7528 3 \u4E2A\u5B57\u8282\u5B58\u50A8\u5B57\u7B26\uFF0C\u6240\u4EE5\u5B58\u50A8\u4E0D\u4E86\u8868\u60C5\u3002\u90A3\u8BE5\u600E\u4E48\u529E\uFF1F</p><p>\u9700\u8981\u4F7F\u7528 utf8mb4 \u7F16\u7801\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>alter table blogs modify content text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci not null;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_10-drop\u3001delete-\u4E0E-truncate-\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_10-drop\u3001delete-\u4E0E-truncate-\u7684\u533A\u522B" aria-hidden="true">#</a> 10.drop\u3001delete \u4E0E truncate \u7684\u533A\u522B\uFF1F</h3><p>\u4E09\u8005\u90FD\u8868\u793A\u5220\u9664\uFF0C\u4F46\u662F\u4E09\u8005\u6709\u4E00\u4E9B\u5DEE\u522B\uFF1A</p><table><thead><tr><th>delete</th><th>truncate</th><th>drop</th></tr></thead><tbody><tr><td>\u7C7B\u578B</td><td>\u5C5E\u4E8E DML</td><td>\u5C5E\u4E8E DDL</td></tr><tr><td>\u56DE\u6EDA</td><td>\u53EF\u56DE\u6EDA</td><td>\u4E0D\u53EF\u56DE\u6EDA</td></tr><tr><td>\u5220\u9664\u5185\u5BB9</td><td>\u8868\u7ED3\u6784\u8FD8\u5728\uFF0C\u5220\u9664\u8868\u7684\u5168\u90E8\u6216\u8005\u4E00\u90E8\u5206\u6570\u636E\u884C</td><td>\u8868\u7ED3\u6784\u8FD8\u5728\uFF0C\u5220\u9664\u8868\u4E2D\u7684\u6240\u6709\u6570\u636E</td></tr><tr><td>\u5220\u9664\u901F\u5EA6</td><td>\u5220\u9664\u901F\u5EA6\u6162\uFF0C\u9700\u8981\u9010\u884C\u5220\u9664</td><td>\u5220\u9664\u901F\u5EA6\u5FEB</td></tr></tbody></table><p>\u56E0\u6B64\uFF0C\u5728\u4E0D\u518D\u9700\u8981\u4E00\u5F20\u8868\u7684\u65F6\u5019\uFF0C\u7528 drop\uFF1B\u5728\u60F3\u5220\u9664\u90E8\u5206\u6570\u636E\u884C\u65F6\u5019\uFF0C\u7528 delete\uFF1B\u5728\u4FDD\u7559\u8868\u800C\u5220\u9664\u6240\u6709\u6570\u636E\u7684\u65F6\u5019\u7528 truncate\u3002</p><h3 id="_11-union-\u4E0E-union-all-\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_11-union-\u4E0E-union-all-\u7684\u533A\u522B" aria-hidden="true">#</a> 11.UNION \u4E0E UNION ALL \u7684\u533A\u522B\uFF1F</h3><ul><li>\u5982\u679C\u4F7F\u7528 UNION\uFF0C\u4F1A\u5728\u8868\u94FE\u63A5\u540E\u7B5B\u9009\u6389\u91CD\u590D\u7684\u8BB0\u5F55\u884C</li><li>\u5982\u679C\u4F7F\u7528 UNION ALL\uFF0C\u4E0D\u4F1A\u5408\u5E76\u91CD\u590D\u7684\u8BB0\u5F55\u884C</li><li>\u4ECE\u6548\u7387\u4E0A\u8BF4\uFF0CUNION ALL \u8981\u6BD4 UNION \u5FEB\u5F88\u591A\uFF0C\u5982\u679C\u5408\u5E76\u6CA1\u6709\u523B\u610F\u8981\u5220\u9664\u91CD\u590D\u884C\uFF0C\u90A3\u4E48\u5C31\u4F7F\u7528 UNION All</li></ul><h3 id="_12-count-1-\u3001count-\u4E0E-count-\u5217\u540D-\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_12-count-1-\u3001count-\u4E0E-count-\u5217\u540D-\u7684\u533A\u522B" aria-hidden="true">#</a> 12.count(1)\u3001count(*) \u4E0E count(\u5217\u540D) \u7684\u533A\u522B\uFF1F</h3><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-2c754ee2-20c4-4c03-9db0-22c7c9eb7f01.jpg" alt="\u4E09\u79CD\u8BA1\u6570\u65B9\u5F0F"></p><p><strong>\u6267\u884C\u6548\u679C</strong>\uFF1A</p><ul><li>count(*)\u5305\u62EC\u4E86\u6240\u6709\u7684\u5217\uFF0C\u76F8\u5F53\u4E8E\u884C\u6570\uFF0C\u5728\u7EDF\u8BA1\u7ED3\u679C\u7684\u65F6\u5019\uFF0C\u4E0D\u4F1A\u5FFD\u7565\u5217\u503C\u4E3A NULL</li><li>count(1)\u5305\u62EC\u4E86\u5FFD\u7565\u6240\u6709\u5217\uFF0C\u7528 1 \u4EE3\u8868\u4EE3\u7801\u884C\uFF0C\u5728\u7EDF\u8BA1\u7ED3\u679C\u7684\u65F6\u5019\uFF0C\u4E0D\u4F1A\u5FFD\u7565\u5217\u503C\u4E3A NULL</li><li>count(\u5217\u540D)\u53EA\u5305\u62EC\u5217\u540D\u90A3\u4E00\u5217\uFF0C\u5728\u7EDF\u8BA1\u7ED3\u679C\u7684\u65F6\u5019\uFF0C\u4F1A\u5FFD\u7565\u5217\u503C\u4E3A\u7A7A\uFF08\u8FD9\u91CC\u7684\u7A7A\u4E0D\u662F\u53EA\u7A7A\u5B57\u7B26\u4E32\u6216\u8005 0\uFF0C\u800C\u662F\u8868\u793A null\uFF09\u7684\u8BA1\u6570\uFF0C\u5373\u67D0\u4E2A\u5B57\u6BB5\u503C\u4E3A NULL \u65F6\uFF0C\u4E0D\u7EDF\u8BA1\u3002</li></ul><p><strong>\u6267\u884C\u901F\u5EA6</strong>\uFF1A</p><ul><li>\u5217\u540D\u4E3A\u4E3B\u952E\uFF0Ccount(\u5217\u540D)\u4F1A\u6BD4 count(1)\u5FEB</li><li>\u5217\u540D\u4E0D\u4E3A\u4E3B\u952E\uFF0Ccount(1)\u4F1A\u6BD4 count(\u5217\u540D)\u5FEB</li><li>\u5982\u679C\u8868\u591A\u4E2A\u5217\u5E76\u4E14\u6CA1\u6709\u4E3B\u952E\uFF0C\u5219 count\uFF081\uFF09 \u7684\u6267\u884C\u6548\u7387\u4F18\u4E8E count\uFF08*\uFF09</li><li>\u5982\u679C\u6709\u4E3B\u952E\uFF0C\u5219 select count\uFF08\u4E3B\u952E\uFF09\u7684\u6267\u884C\u6548\u7387\u662F\u6700\u4F18\u7684</li><li>\u5982\u679C\u8868\u53EA\u6709\u4E00\u4E2A\u5B57\u6BB5\uFF0C\u5219 select count\uFF08*\uFF09\u6700\u4F18\u3002</li></ul><h3 id="_13-\u4E00\u6761-sql-\u67E5\u8BE2\u8BED\u53E5\u7684\u6267\u884C\u987A\u5E8F" tabindex="-1"><a class="header-anchor" href="#_13-\u4E00\u6761-sql-\u67E5\u8BE2\u8BED\u53E5\u7684\u6267\u884C\u987A\u5E8F" aria-hidden="true">#</a> 13.\u4E00\u6761 SQL \u67E5\u8BE2\u8BED\u53E5\u7684\u6267\u884C\u987A\u5E8F\uFF1F</h3><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-47ddea92-cf8f-49c4-ab2e-69a829ff1be2.jpg" alt="\u67E5\u8BE2\u8BED\u53E5\u6267\u884C\u987A\u5E8F"></p><ol><li><strong>FROM</strong>\uFF1A\u5BF9 FROM \u5B50\u53E5\u4E2D\u7684\u5DE6\u8868&lt;left_table&gt;\u548C\u53F3\u8868&lt;right_table&gt;\u6267\u884C\u7B1B\u5361\u513F\u79EF\uFF08Cartesianproduct\uFF09\uFF0C\u4EA7\u751F\u865A\u62DF\u8868 VT1</li><li><strong>ON</strong>\uFF1A\u5BF9\u865A\u62DF\u8868 VT1 \u5E94\u7528 ON \u7B5B\u9009\uFF0C\u53EA\u6709\u90A3\u4E9B\u7B26\u5408&lt;join_condition&gt;\u7684\u884C\u624D\u88AB\u63D2\u5165\u865A\u62DF\u8868 VT2 \u4E2D</li><li><strong>JOIN</strong>\uFF1A\u5982\u679C\u6307\u5B9A\u4E86 OUTER JOIN\uFF08\u5982 LEFT OUTER JOIN\u3001RIGHT OUTER JOIN\uFF09\uFF0C\u90A3\u4E48\u4FDD\u7559\u8868\u4E2D\u672A\u5339\u914D\u7684\u884C\u4F5C\u4E3A\u5916\u90E8\u884C\u6DFB\u52A0\u5230\u865A\u62DF\u8868 VT2 \u4E2D\uFF0C\u4EA7\u751F\u865A\u62DF\u8868 VT3\u3002\u5982\u679C FROM \u5B50\u53E5\u5305\u542B\u4E24\u4E2A\u4EE5\u4E0A\u8868\uFF0C\u5219\u5BF9\u4E0A\u4E00\u4E2A\u8FDE\u63A5\u751F\u6210\u7684\u7ED3\u679C\u8868 VT3 \u548C\u4E0B\u4E00\u4E2A\u8868\u91CD\u590D\u6267\u884C\u6B65\u9AA4 1\uFF09\uFF5E\u6B65\u9AA4 3\uFF09\uFF0C\u76F4\u5230\u5904\u7406\u5B8C\u6240\u6709\u7684\u8868\u4E3A\u6B62</li><li><strong>WHERE</strong>\uFF1A\u5BF9\u865A\u62DF\u8868 VT3 \u5E94\u7528 WHERE \u8FC7\u6EE4\u6761\u4EF6\uFF0C\u53EA\u6709\u7B26\u5408&lt;where_condition&gt;\u7684\u8BB0\u5F55\u624D\u88AB\u63D2\u5165\u865A\u62DF\u8868 VT4 \u4E2D</li><li><strong>GROUP BY</strong>\uFF1A\u6839\u636E GROUP BY \u5B50\u53E5\u4E2D\u7684\u5217\uFF0C\u5BF9 VT4 \u4E2D\u7684\u8BB0\u5F55\u8FDB\u884C\u5206\u7EC4\u64CD\u4F5C\uFF0C\u4EA7\u751F VT5</li><li><strong>CUBE|ROLLUP</strong>\uFF1A\u5BF9\u8868 VT5 \u8FDB\u884C CUBE \u6216 ROLLUP \u64CD\u4F5C\uFF0C\u4EA7\u751F\u8868 VT6</li><li><strong>HAVING</strong>\uFF1A\u5BF9\u865A\u62DF\u8868 VT6 \u5E94\u7528 HAVING \u8FC7\u6EE4\u5668\uFF0C\u53EA\u6709\u7B26\u5408&lt;having_condition&gt;\u7684\u8BB0\u5F55\u624D\u88AB\u63D2\u5165\u865A\u62DF\u8868 VT7 \u4E2D\u3002</li><li><strong>SELECT</strong>\uFF1A\u7B2C\u4E8C\u6B21\u6267\u884C SELECT \u64CD\u4F5C\uFF0C\u9009\u62E9\u6307\u5B9A\u7684\u5217\uFF0C\u63D2\u5165\u5230\u865A\u62DF\u8868 VT8 \u4E2D</li><li><strong>DISTINCT</strong>\uFF1A\u53BB\u9664\u91CD\u590D\u6570\u636E\uFF0C\u4EA7\u751F\u865A\u62DF\u8868 VT9</li><li><strong>ORDER BY</strong>\uFF1A\u5C06\u865A\u62DF\u8868 VT9 \u4E2D\u7684\u8BB0\u5F55\u6309\u7167&lt;order_by_list&gt;\u8FDB\u884C\u6392\u5E8F\u64CD\u4F5C\uFF0C\u4EA7\u751F\u865A\u62DF\u8868 VT10\u300211\uFF09</li><li><strong>LIMIT</strong>\uFF1A\u53D6\u51FA\u6307\u5B9A\u884C\u7684\u8BB0\u5F55\uFF0C\u4EA7\u751F\u865A\u62DF\u8868 VT11\uFF0C\u5E76\u8FD4\u56DE\u7ED9\u67E5\u8BE2\u7528\u6237</li></ol><h2 id="\u6570\u636E\u5E93\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u5E93\u67B6\u6784" aria-hidden="true">#</a> \u6570\u636E\u5E93\u67B6\u6784</h2><h3 id="_14-\u8BF4\u8BF4-mysql-\u7684\u57FA\u7840\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#_14-\u8BF4\u8BF4-mysql-\u7684\u57FA\u7840\u67B6\u6784" aria-hidden="true">#</a> 14.\u8BF4\u8BF4 MySQL \u7684\u57FA\u7840\u67B6\u6784?</h3><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-77626fdb-d2b0-4256-a483-d1c60e68d8ec.jpg" alt=""></p><p>MySQL \u903B\u8F91\u67B6\u6784\u56FE\u4E3B\u8981\u5206\u4E09\u5C42\uFF1A</p><ul><li>\u5BA2\u6237\u7AEF\uFF1A\u6700\u4E0A\u5C42\u7684\u670D\u52A1\u5E76\u4E0D\u662F MySQL \u6240\u72EC\u6709\u7684\uFF0C\u5927\u591A\u6570\u57FA\u4E8E\u7F51\u7EDC\u7684\u5BA2\u6237\u7AEF/\u670D\u52A1\u5668\u7684\u5DE5\u5177\u6216\u8005\u670D\u52A1\u90FD\u6709\u7C7B\u4F3C\u7684\u67B6\u6784\u3002\u6BD4\u5982\u8FDE\u63A5\u5904\u7406\u3001\u6388\u6743\u8BA4\u8BC1\u3001\u5B89\u5168\u7B49\u7B49\u3002</li><li>Server \u5C42\uFF1A\u5927\u591A\u6570 MySQL \u7684\u6838\u5FC3\u670D\u52A1\u529F\u80FD\u90FD\u5728\u8FD9\u4E00\u5C42\uFF0C\u5305\u62EC\u67E5\u8BE2\u89E3\u6790\u3001\u5206\u6790\u3001\u4F18\u5316\u3001\u7F13\u5B58\u4EE5\u53CA\u6240\u6709\u7684\u5185\u7F6E\u51FD\u6570\uFF08\u4F8B\u5982\uFF0C\u65E5\u671F\u3001\u65F6\u95F4\u3001\u6570\u5B66\u548C\u52A0\u5BC6\u51FD\u6570\uFF09\uFF0C\u6240\u6709\u8DE8\u5B58\u50A8\u5F15\u64CE\u7684\u529F\u80FD\u90FD\u5728\u8FD9\u4E00\u5C42\u5B9E\u73B0\uFF1A\u5B58\u50A8\u8FC7\u7A0B\u3001\u89E6\u53D1\u5668\u3001\u89C6\u56FE\u7B49\u3002</li><li>\u5B58\u50A8\u5F15\u64CE\u5C42\uFF1A\u7B2C\u4E09\u5C42\u5305\u542B\u4E86\u5B58\u50A8\u5F15\u64CE\u3002\u5B58\u50A8\u5F15\u64CE\u8D1F\u8D23 MySQL \u4E2D\u6570\u636E\u7684\u5B58\u50A8\u548C\u63D0\u53D6\u3002Server \u5C42\u901A\u8FC7 API \u4E0E\u5B58\u50A8\u5F15\u64CE\u8FDB\u884C\u901A\u4FE1\u3002\u8FD9\u4E9B\u63A5\u53E3\u5C4F\u853D\u4E86\u4E0D\u540C\u5B58\u50A8\u5F15\u64CE\u4E4B\u95F4\u7684\u5DEE\u5F02\uFF0C\u4F7F\u5F97\u8FD9\u4E9B\u5DEE\u5F02\u5BF9\u4E0A\u5C42\u7684\u67E5\u8BE2\u8FC7\u7A0B\u900F\u660E\u3002</li></ul><h3 id="_15-\u4E00\u6761-sql-\u67E5\u8BE2\u8BED\u53E5\u5728-mysql-\u4E2D\u5982\u4F55\u6267\u884C\u7684" tabindex="-1"><a class="header-anchor" href="#_15-\u4E00\u6761-sql-\u67E5\u8BE2\u8BED\u53E5\u5728-mysql-\u4E2D\u5982\u4F55\u6267\u884C\u7684" aria-hidden="true">#</a> 15.\u4E00\u6761 SQL \u67E5\u8BE2\u8BED\u53E5\u5728 MySQL \u4E2D\u5982\u4F55\u6267\u884C\u7684\uFF1F</h3><ul><li>\u5148\u68C0\u67E5\u8BE5\u8BED\u53E5<code>\u662F\u5426\u6709\u6743\u9650</code>\uFF0C\u5982\u679C\u6CA1\u6709\u6743\u9650\uFF0C\u76F4\u63A5\u8FD4\u56DE\u9519\u8BEF\u4FE1\u606F\uFF0C\u5982\u679C\u6709\u6743\u9650\u4F1A\u5148\u67E5\u8BE2\u7F13\u5B58 (MySQL8.0 \u7248\u672C\u4EE5\u524D)\u3002</li><li>\u5982\u679C\u6CA1\u6709\u7F13\u5B58\uFF0C\u5206\u6790\u5668\u8FDB\u884C<code>\u8BED\u6CD5\u5206\u6790</code>\uFF0C\u63D0\u53D6 sql \u8BED\u53E5\u4E2D select \u7B49\u5173\u952E\u5143\u7D20\uFF0C\u7136\u540E\u5224\u65AD sql \u8BED\u53E5\u662F\u5426\u6709\u8BED\u6CD5\u9519\u8BEF\uFF0C\u6BD4\u5982\u5173\u952E\u8BCD\u662F\u5426\u6B63\u786E\u7B49\u7B49\u3002</li><li>\u8BED\u6CD5\u89E3\u6790\u4E4B\u540E\uFF0CMySQL \u7684\u670D\u52A1\u5668\u4F1A\u5BF9\u67E5\u8BE2\u7684\u8BED\u53E5\u8FDB\u884C\u4F18\u5316\uFF0C\u786E\u5B9A\u6267\u884C\u7684\u65B9\u6848\u3002</li><li>\u5B8C\u6210\u67E5\u8BE2\u4F18\u5316\u540E\uFF0C\u6309\u7167\u751F\u6210\u7684\u6267\u884C\u8BA1\u5212<code>\u8C03\u7528\u6570\u636E\u5E93\u5F15\u64CE\u63A5\u53E3</code>\uFF0C\u8FD4\u56DE\u6267\u884C\u7ED3\u679C\u3002</li></ul><h2 id="\u5B58\u50A8\u5F15\u64CE" tabindex="-1"><a class="header-anchor" href="#\u5B58\u50A8\u5F15\u64CE" aria-hidden="true">#</a> \u5B58\u50A8\u5F15\u64CE</h2><h3 id="_16-mysql-\u6709\u54EA\u4E9B\u5E38\u89C1\u5B58\u50A8\u5F15\u64CE" tabindex="-1"><a class="header-anchor" href="#_16-mysql-\u6709\u54EA\u4E9B\u5E38\u89C1\u5B58\u50A8\u5F15\u64CE" aria-hidden="true">#</a> 16.MySQL \u6709\u54EA\u4E9B\u5E38\u89C1\u5B58\u50A8\u5F15\u64CE\uFF1F</h3><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-db586190-6d1f-49ef-a5b5-496c13e7050d.jpg" alt="\u4E3B\u8981\u5B58\u50A8\u5F15\u64CE"></p><p>\u4E3B\u8981\u5B58\u50A8\u5F15\u64CE\u4EE5\u53CA\u529F\u80FD\u5982\u4E0B\uFF1A</p><table><thead><tr><th>\u529F\u80FD</th><th>MylSAM</th><th>MEMORY</th><th>InnoDB</th></tr></thead><tbody><tr><td>\u5B58\u50A8\u9650\u5236</td><td>256TB</td><td>RAM</td><td>64TB</td></tr><tr><td>\u652F\u6301\u4E8B\u52A1</td><td>No</td><td>No</td><td>Yes</td></tr><tr><td>\u652F\u6301\u5168\u6587\u7D22\u5F15</td><td>Yes</td><td>No</td><td>Yes</td></tr><tr><td>\u652F\u6301\u6811\u7D22\u5F15</td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>\u652F\u6301\u54C8\u5E0C\u7D22\u5F15</td><td>No</td><td>Yes</td><td>Yes</td></tr><tr><td>\u652F\u6301\u6570\u636E\u7F13\u5B58</td><td>No</td><td>N/A</td><td>Yes</td></tr><tr><td>\u652F\u6301\u5916\u952E</td><td>No</td><td>No</td><td>Yes</td></tr></tbody></table><p>MySQL5.5 \u4E4B\u524D\uFF0C\u9ED8\u8BA4\u5B58\u50A8\u5F15\u64CE\u662F MylSAM\uFF0C5.5 \u4E4B\u540E\u53D8\u6210\u4E86 InnoDB\u3002</p><blockquote><p>InnoDB \u652F\u6301\u7684\u54C8\u5E0C\u7D22\u5F15\u662F\u81EA\u9002\u5E94\u7684\uFF0CInnoDB \u4F1A\u6839\u636E\u8868\u7684\u4F7F\u7528\u60C5\u51B5\u81EA\u52A8\u4E3A\u8868\u751F\u6210\u54C8\u5E0C\u7D22\u5F15\uFF0C\u4E0D\u80FD\u4EBA\u4E3A\u5E72\u9884\u662F\u5426\u5728\u4E00\u5F20\u8868\u4E2D\u751F\u6210\u54C8\u5E0C\u7D22\u5F15\u3002</p></blockquote><blockquote><p>MySQL 5.6 \u5F00\u59CB InnoDB \u652F\u6301\u5168\u6587\u7D22\u5F15\u3002</p></blockquote><h3 id="_17-\u90A3\u5B58\u50A8\u5F15\u64CE\u5E94\u8BE5\u600E\u4E48\u9009\u62E9" tabindex="-1"><a class="header-anchor" href="#_17-\u90A3\u5B58\u50A8\u5F15\u64CE\u5E94\u8BE5\u600E\u4E48\u9009\u62E9" aria-hidden="true">#</a> 17.\u90A3\u5B58\u50A8\u5F15\u64CE\u5E94\u8BE5\u600E\u4E48\u9009\u62E9\uFF1F</h3><p>\u5927\u81F4\u4E0A\u53EF\u4EE5\u8FD9\u4E48\u9009\u62E9\uFF1A</p><ul><li>\u5927\u591A\u6570\u60C5\u51B5\u4E0B\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u7684 InnoDB \u5C31\u591F\u4E86\u3002\u5982\u679C\u8981\u63D0\u4F9B\u63D0\u4EA4\u3001\u56DE\u6EDA\u548C\u6062\u590D\u7684\u4E8B\u52A1\u5B89\u5168\uFF08ACID \u517C\u5BB9\uFF09\u80FD\u529B\uFF0C\u5E76\u8981\u6C42\u5B9E\u73B0\u5E76\u53D1\u63A7\u5236\uFF0CInnoDB \u5C31\u662F\u6BD4\u8F83\u9760\u524D\u7684\u9009\u62E9\u4E86\u3002</li><li>\u5982\u679C\u6570\u636E\u8868\u4E3B\u8981\u7528\u6765\u63D2\u5165\u548C\u67E5\u8BE2\u8BB0\u5F55\uFF0C\u5219 MyISAM \u5F15\u64CE\u63D0\u4F9B\u8F83\u9AD8\u7684\u5904\u7406\u6548\u7387\u3002</li><li>\u5982\u679C\u53EA\u662F\u4E34\u65F6\u5B58\u653E\u6570\u636E\uFF0C\u6570\u636E\u91CF\u4E0D\u5927\uFF0C\u5E76\u4E14\u4E0D\u9700\u8981\u8F83\u9AD8\u7684\u6570\u636E\u5B89\u5168\u6027\uFF0C\u53EF\u4EE5\u9009\u62E9\u5C06\u6570\u636E\u4FDD\u5B58\u5728\u5185\u5B58\u7684 MEMORY \u5F15\u64CE\u4E2D\uFF0CMySQL \u4E2D\u4F7F\u7528\u8BE5\u5F15\u64CE\u4F5C\u4E3A\u4E34\u65F6\u8868\uFF0C\u5B58\u653E\u67E5\u8BE2\u7684\u4E2D\u95F4\u7ED3\u679C\u3002</li></ul><p>\u4F7F\u7528\u54EA\u4E00\u79CD\u5F15\u64CE\u53EF\u4EE5\u6839\u636E\u9700\u8981\u7075\u6D3B\u9009\u62E9\uFF0C\u56E0\u4E3A\u5B58\u50A8\u5F15\u64CE\u662F\u57FA\u4E8E\u8868\u7684\uFF0C\u6240\u4EE5\u4E00\u4E2A\u6570\u636E\u5E93\u4E2D\u591A\u4E2A\u8868\u53EF\u4EE5\u4F7F\u7528\u4E0D\u540C\u7684\u5F15\u64CE\u4EE5\u6EE1\u8DB3\u5404\u79CD\u6027\u80FD\u548C\u5B9E\u9645\u9700\u6C42\u3002\u4F7F\u7528\u5408\u9002\u7684\u5B58\u50A8\u5F15\u64CE\u5C06\u4F1A\u63D0\u9AD8\u6574\u4E2A\u6570\u636E\u5E93\u7684\u6027\u80FD\u3002</p><h3 id="_18-innodb-\u548C-mylsam-\u4E3B\u8981\u6709\u4EC0\u4E48\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_18-innodb-\u548C-mylsam-\u4E3B\u8981\u6709\u4EC0\u4E48\u533A\u522B" aria-hidden="true">#</a> 18.InnoDB \u548C MylSAM \u4E3B\u8981\u6709\u4EC0\u4E48\u533A\u522B\uFF1F</h3><p>PS:MySQL8.0 \u90FD\u5F00\u59CB\u6162\u6162\u6D41\u884C\u4E86\uFF0C\u5982\u679C\u4E0D\u662F\u9762\u8BD5\uFF0CMylSAM \u5176\u5B9E\u53EF\u4EE5\u4E0D\u7528\u600E\u4E48\u4E86\u89E3\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-b7aa040e-a3a7-4133-8c43-baccc3c8d012.jpg" alt="InnoDB \u548C MylSAM \u4E3B\u8981\u6709\u4EC0\u4E48\u533A\u522B"></p><p><strong>1. \xA0 \u5B58\u50A8\u7ED3\u6784</strong>\uFF1A\u6BCF\u4E2A MyISAM \u5728\u78C1\u76D8\u4E0A\u5B58\u50A8\u6210\u4E09\u4E2A\u6587\u4EF6\uFF1BInnoDB \u6240\u6709\u7684\u8868\u90FD\u4FDD\u5B58\u5728\u540C\u4E00\u4E2A\u6570\u636E\u6587\u4EF6\u4E2D\uFF08\u4E5F\u53EF\u80FD\u662F\u591A\u4E2A\u6587\u4EF6\uFF0C\u6216\u8005\u662F\u72EC\u7ACB\u7684\u8868\u7A7A\u95F4\u6587\u4EF6\uFF09\uFF0CInnoDB \u8868\u7684\u5927\u5C0F\u53EA\u53D7\u9650\u4E8E\u64CD\u4F5C\u7CFB\u7EDF\u6587\u4EF6\u7684\u5927\u5C0F\uFF0C\u4E00\u822C\u4E3A 2GB\u3002</p><p><strong>2. \u4E8B\u52A1\u652F\u6301</strong>\uFF1AMyISAM \u4E0D\u63D0\u4F9B\u4E8B\u52A1\u652F\u6301\uFF1BInnoDB \u63D0\u4F9B\u4E8B\u52A1\u652F\u6301\u4E8B\u52A1\uFF0C\u5177\u6709\u4E8B\u52A1(commit)\u3001\u56DE\u6EDA(rollback)\u548C\u5D29\u6E83\u4FEE\u590D\u80FD\u529B(crash recovery capabilities)\u7684\u4E8B\u52A1\u5B89\u5168\u7279\u6027\u3002</p><p><strong>3 \xA0 \u6700\u5C0F\u9501\u7C92\u5EA6</strong>\uFF1AMyISAM \u53EA\u652F\u6301\u8868\u7EA7\u9501\uFF0C\u66F4\u65B0\u65F6\u4F1A\u9501\u4F4F\u6574\u5F20\u8868\uFF0C\u5BFC\u81F4\u5176\u5B83\u67E5\u8BE2\u548C\u66F4\u65B0\u90FD\u4F1A\u88AB\u963B\u585E InnoDB \u652F\u6301\u884C\u7EA7\u9501\u3002</p><p><strong>4. \u7D22\u5F15\u7C7B\u578B</strong>\uFF1AMyISAM \u7684\u7D22\u5F15\u4E3A\u975E\u805A\u7C07\u7D22\u5F15\uFF0C\u6570\u636E\u7ED3\u6784\u662F B \u6811\uFF1BInnoDB \u7684\u7D22\u5F15\u662F\u805A\u7C07\u7D22\u5F15\uFF0C\u6570\u636E\u7ED3\u6784\u662F B+\u6811\u3002</p><p><strong>5. \xA0 \u4E3B\u952E\u5FC5\u9700</strong>\uFF1AMyISAM \u5141\u8BB8\u6CA1\u6709\u4EFB\u4F55\u7D22\u5F15\u548C\u4E3B\u952E\u7684\u8868\u5B58\u5728\uFF1BInnoDB \u5982\u679C\u6CA1\u6709\u8BBE\u5B9A\u4E3B\u952E\u6216\u8005\u975E\u7A7A\u552F\u4E00\u7D22\u5F15\uFF0C**\u5C31\u4F1A\u81EA\u52A8\u751F\u6210\u4E00\u4E2A 6 \u5B57\u8282\u7684\u4E3B\u952E(\u7528\u6237\u4E0D\u53EF\u89C1)**\uFF0C\u6570\u636E\u662F\u4E3B\u7D22\u5F15\u7684\u4E00\u90E8\u5206\uFF0C\u9644\u52A0\u7D22\u5F15\u4FDD\u5B58\u7684\u662F\u4E3B\u7D22\u5F15\u7684\u503C\u3002</p><p><strong>6. \u8868\u7684\u5177\u4F53\u884C\u6570</strong>\uFF1AMyISAM \u4FDD\u5B58\u4E86\u8868\u7684\u603B\u884C\u6570\uFF0C\u5982\u679C select count(*) from table;\u4F1A\u76F4\u63A5\u53D6\u51FA\u51FA\u8BE5\u503C; InnoDB \u6CA1\u6709\u4FDD\u5B58\u8868\u7684\u603B\u884C\u6570\uFF0C\u5982\u679C\u4F7F\u7528 select count(*) from table\uFF1B\u5C31\u4F1A\u904D\u5386\u6574\u4E2A\u8868;\u4F46\u662F\u5728\u52A0\u4E86 wehre \u6761\u4EF6\u540E\uFF0CMyISAM \u548C InnoDB \u5904\u7406\u7684\u65B9\u5F0F\u90FD\u4E00\u6837\u3002</p><p><strong>7. \xA0 \u5916\u952E\u652F\u6301</strong>\uFF1AMyISAM \u4E0D\u652F\u6301\u5916\u952E\uFF1BInnoDB \u652F\u6301\u5916\u952E\u3002</p><h2 id="\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u65E5\u5FD7" aria-hidden="true">#</a> \u65E5\u5FD7</h2><h3 id="_19-mysql-\u65E5\u5FD7\u6587\u4EF6\u6709\u54EA\u4E9B-\u5206\u522B\u4ECB\u7ECD\u4E0B\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#_19-mysql-\u65E5\u5FD7\u6587\u4EF6\u6709\u54EA\u4E9B-\u5206\u522B\u4ECB\u7ECD\u4E0B\u4F5C\u7528" aria-hidden="true">#</a> 19.MySQL \u65E5\u5FD7\u6587\u4EF6\u6709\u54EA\u4E9B\uFF1F\u5206\u522B\u4ECB\u7ECD\u4E0B\u4F5C\u7528\uFF1F</h3><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-c0ef6e68-bb33-48fc-b3a2-b9cdadd8e403.jpg" alt="MySQL \u4E3B\u8981\u65E5\u5FD7"></p><p>MySQL \u65E5\u5FD7\u6587\u4EF6\u6709\u5F88\u591A\uFF0C\u5305\u62EC \uFF1A</p><ul><li><strong>\u9519\u8BEF\u65E5\u5FD7</strong>\uFF08error log\uFF09\uFF1A\u9519\u8BEF\u65E5\u5FD7\u6587\u4EF6\u5BF9 MySQL \u7684\u542F\u52A8\u3001\u8FD0\u884C\u3001\u5173\u95ED\u8FC7\u7A0B\u8FDB\u884C\u4E86\u8BB0\u5F55\uFF0C\u80FD\u5E2E\u52A9\u5B9A\u4F4D MySQL \u95EE\u9898\u3002</li><li><strong>\u6162\u67E5\u8BE2\u65E5\u5FD7</strong>\uFF08slow query log\uFF09\uFF1A\u6162\u67E5\u8BE2\u65E5\u5FD7\u662F\u7528\u6765\u8BB0\u5F55\u6267\u884C\u65F6\u95F4\u8D85\u8FC7 long_query_time \u8FD9\u4E2A\u53D8\u91CF\u5B9A\u4E49\u7684\u65F6\u957F\u7684\u67E5\u8BE2\u8BED\u53E5\u3002\u901A\u8FC7\u6162\u67E5\u8BE2\u65E5\u5FD7\uFF0C\u53EF\u4EE5\u67E5\u627E\u51FA\u54EA\u4E9B\u67E5\u8BE2\u8BED\u53E5\u7684\u6267\u884C\u6548\u7387\u5F88\u4F4E\uFF0C\u4EE5\u4FBF\u8FDB\u884C\u4F18\u5316\u3002</li><li><strong>\u4E00\u822C\u67E5\u8BE2\u65E5\u5FD7</strong>\uFF08general log\uFF09\uFF1A\u4E00\u822C\u67E5\u8BE2\u65E5\u5FD7\u8BB0\u5F55\u4E86\u6240\u6709\u5BF9 MySQL \u6570\u636E\u5E93\u8BF7\u6C42\u7684\u4FE1\u606F\uFF0C\u65E0\u8BBA\u8BF7\u6C42\u662F\u5426\u6B63\u786E\u6267\u884C\u3002</li><li><strong>\u4E8C\u8FDB\u5236\u65E5\u5FD7</strong>\uFF08bin log\uFF09\uFF1A\u5173\u4E8E\u4E8C\u8FDB\u5236\u65E5\u5FD7\uFF0C\u5B83\u8BB0\u5F55\u4E86\u6570\u636E\u5E93\u6240\u6709\u6267\u884C\u7684 DDL \u548C DML \u8BED\u53E5\uFF08\u9664\u4E86\u6570\u636E\u67E5\u8BE2\u8BED\u53E5 select\u3001show \u7B49\uFF09\uFF0C\u4EE5\u4E8B\u4EF6\u5F62\u5F0F\u8BB0\u5F55\u5E76\u4FDD\u5B58\u5728\u4E8C\u8FDB\u5236\u6587\u4EF6\u4E2D\u3002</li></ul><p>\u8FD8\u6709\u4E24\u4E2A InnoDB \u5B58\u50A8\u5F15\u64CE\u7279\u6709\u7684\u65E5\u5FD7\u6587\u4EF6\uFF1A</p><ul><li><strong>\u91CD\u505A\u65E5\u5FD7</strong>\uFF08redo log\uFF09\uFF1A\u91CD\u505A\u65E5\u5FD7\u81F3\u5173\u91CD\u8981\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u8BB0\u5F55\u4E86\u5BF9\u4E8E InnoDB \u5B58\u50A8\u5F15\u64CE\u7684\u4E8B\u52A1\u65E5\u5FD7\u3002</li><li><strong>\u56DE\u6EDA\u65E5\u5FD7</strong>\uFF08undo log\uFF09\uFF1A\u56DE\u6EDA\u65E5\u5FD7\u540C\u6837\u4E5F\u662F InnoDB \u5F15\u64CE\u63D0\u4F9B\u7684\u65E5\u5FD7\uFF0C\u987E\u540D\u601D\u4E49\uFF0C\u56DE\u6EDA\u65E5\u5FD7\u7684\u4F5C\u7528\u5C31\u662F\u5BF9\u6570\u636E\u8FDB\u884C\u56DE\u6EDA\u3002\u5F53\u4E8B\u52A1\u5BF9\u6570\u636E\u5E93\u8FDB\u884C\u4FEE\u6539\uFF0CInnoDB \u5F15\u64CE\u4E0D\u4EC5\u4F1A\u8BB0\u5F55 redo log\uFF0C\u8FD8\u4F1A\u751F\u6210\u5BF9\u5E94\u7684 undo log \u65E5\u5FD7\uFF1B\u5982\u679C\u4E8B\u52A1\u6267\u884C\u5931\u8D25\u6216\u8C03\u7528\u4E86 rollback\uFF0C\u5BFC\u81F4\u4E8B\u52A1\u9700\u8981\u56DE\u6EDA\uFF0C\u5C31\u53EF\u4EE5\u5229\u7528 undo log \u4E2D\u7684\u4FE1\u606F\u5C06\u6570\u636E\u56DE\u6EDA\u5230\u4FEE\u6539\u4E4B\u524D\u7684\u6837\u5B50\u3002</li></ul><h3 id="_20-binlog-\u548C-redo-log-\u6709\u4EC0\u4E48\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_20-binlog-\u548C-redo-log-\u6709\u4EC0\u4E48\u533A\u522B" aria-hidden="true">#</a> 20.binlog \u548C redo log \u6709\u4EC0\u4E48\u533A\u522B\uFF1F</h3><ul><li>bin log \u4F1A\u8BB0\u5F55\u6240\u6709\u4E0E\u6570\u636E\u5E93\u6709\u5173\u7684\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u5305\u62EC InnoDB\u3001MyISAM \u7B49\u5B58\u50A8\u5F15\u64CE\u7684\u65E5\u5FD7\uFF0C\u800C redo log \u53EA\u8BB0 InnoDB \u5B58\u50A8\u5F15\u64CE\u7684\u65E5\u5FD7\u3002</li><li>\u8BB0\u5F55\u7684\u5185\u5BB9\u4E0D\u540C\uFF0Cbin log \u8BB0\u5F55\u7684\u662F\u5173\u4E8E\u4E00\u4E2A\u4E8B\u52A1\u7684\u5177\u4F53\u64CD\u4F5C\u5185\u5BB9\uFF0C\u5373\u8BE5\u65E5\u5FD7\u662F\u903B\u8F91\u65E5\u5FD7\u3002\u800C redo log \u8BB0\u5F55\u7684\u662F\u5173\u4E8E\u6BCF\u4E2A\u9875\uFF08Page\uFF09\u7684\u66F4\u6539\u7684\u7269\u7406\u60C5\u51B5\u3002</li><li>\u5199\u5165\u7684\u65F6\u95F4\u4E0D\u540C\uFF0Cbin log \u4EC5\u5728\u4E8B\u52A1\u63D0\u4EA4\u524D\u8FDB\u884C\u63D0\u4EA4\uFF0C\u4E5F\u5C31\u662F\u53EA\u5199\u78C1\u76D8\u4E00\u6B21\u3002\u800C\u5728\u4E8B\u52A1\u8FDB\u884C\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u5374\u4E0D\u65AD\u6709 redo ertry \u88AB\u5199\u5165 redo log \u4E2D\u3002</li><li>\u5199\u5165\u7684\u65B9\u5F0F\u4E5F\u4E0D\u76F8\u540C\uFF0Credo log \u662F\u5FAA\u73AF\u5199\u5165\u548C\u64E6\u9664\uFF0Cbin log \u662F\u8FFD\u52A0\u5199\u5165\uFF0C\u4E0D\u4F1A\u8986\u76D6\u5DF2\u7ECF\u5199\u7684\u6587\u4EF6\u3002</li></ul><h3 id="_21-\u4E00\u6761\u66F4\u65B0\u8BED\u53E5\u600E\u4E48\u6267\u884C\u7684\u4E86\u89E3\u5417" tabindex="-1"><a class="header-anchor" href="#_21-\u4E00\u6761\u66F4\u65B0\u8BED\u53E5\u600E\u4E48\u6267\u884C\u7684\u4E86\u89E3\u5417" aria-hidden="true">#</a> 21.\u4E00\u6761\u66F4\u65B0\u8BED\u53E5\u600E\u4E48\u6267\u884C\u7684\u4E86\u89E3\u5417\uFF1F</h3><p>\u66F4\u65B0\u8BED\u53E5\u7684\u6267\u884C\u662F Server \u5C42\u548C\u5F15\u64CE\u5C42\u914D\u5408\u5B8C\u6210\uFF0C\u6570\u636E\u9664\u4E86\u8981\u5199\u5165\u8868\u4E2D\uFF0C\u8FD8\u8981\u8BB0\u5F55\u76F8\u5E94\u7684\u65E5\u5FD7\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-812fb038-39de-4204-ac9f-93d8b7448a18.jpg" alt="update \u6267\u884C"></p><ol><li>\u6267\u884C\u5668\u5148\u627E\u5F15\u64CE\u83B7\u53D6 ID=2 \u8FD9\u4E00\u884C\u3002ID \u662F\u4E3B\u952E\uFF0C\u5B58\u50A8\u5F15\u64CE\u68C0\u7D22\u6570\u636E\uFF0C\u627E\u5230\u8FD9\u4E00\u884C\u3002\u5982\u679C ID=2 \u8FD9\u4E00\u884C\u6240\u5728\u7684\u6570\u636E\u9875\u672C\u6765\u5C31\u5728\u5185\u5B58\u4E2D\uFF0C\u5C31\u76F4\u63A5\u8FD4\u56DE\u7ED9\u6267\u884C\u5668\uFF1B\u5426\u5219\uFF0C\u9700\u8981\u5148\u4ECE\u78C1\u76D8\u8BFB\u5165\u5185\u5B58\uFF0C\u7136\u540E\u518D\u8FD4\u56DE\u3002</li><li>\u6267\u884C\u5668\u62FF\u5230\u5F15\u64CE\u7ED9\u7684\u884C\u6570\u636E\uFF0C\u628A\u8FD9\u4E2A\u503C\u52A0\u4E0A 1\uFF0C\u6BD4\u5982\u539F\u6765\u662F N\uFF0C\u73B0\u5728\u5C31\u662F N+1\uFF0C\u5F97\u5230\u65B0\u7684\u4E00\u884C\u6570\u636E\uFF0C\u518D\u8C03\u7528\u5F15\u64CE\u63A5\u53E3\u5199\u5165\u8FD9\u884C\u65B0\u6570\u636E\u3002</li><li>\u5F15\u64CE\u5C06\u8FD9\u884C\u65B0\u6570\u636E\u66F4\u65B0\u5230\u5185\u5B58\u4E2D\uFF0C\u540C\u65F6\u5C06\u8FD9\u4E2A\u66F4\u65B0\u64CD\u4F5C\u8BB0\u5F55\u5230 redo log \u91CC\u9762\uFF0C\u6B64\u65F6 redo log \u5904\u4E8E prepare \u72B6\u6001\u3002\u7136\u540E\u544A\u77E5\u6267\u884C\u5668\u6267\u884C\u5B8C\u6210\u4E86\uFF0C\u968F\u65F6\u53EF\u4EE5\u63D0\u4EA4\u4E8B\u52A1\u3002</li><li>\u6267\u884C\u5668\u751F\u6210\u8FD9\u4E2A\u64CD\u4F5C\u7684 binlog\uFF0C\u5E76\u628A binlog \u5199\u5165\u78C1\u76D8\u3002</li><li>\u6267\u884C\u5668\u8C03\u7528\u5F15\u64CE\u7684\u63D0\u4EA4\u4E8B\u52A1\u63A5\u53E3\uFF0C\u5F15\u64CE\u628A\u521A\u521A\u5199\u5165\u7684 redo log \u6539\u6210\u63D0\u4EA4\uFF08commit\uFF09\u72B6\u6001\uFF0C\u66F4\u65B0\u5B8C\u6210\u3002</li></ol><p>\u4ECE\u4E0A\u56FE\u53EF\u4EE5\u770B\u51FA\uFF0CMySQL \u5728\u6267\u884C\u66F4\u65B0\u8BED\u53E5\u7684\u65F6\u5019\uFF0C\u5728\u670D\u52A1\u5C42\u8FDB\u884C\u8BED\u53E5\u7684\u89E3\u6790\u548C\u6267\u884C\uFF0C\u5728\u5F15\u64CE\u5C42\u8FDB\u884C\u6570\u636E\u7684\u63D0\u53D6\u548C\u5B58\u50A8\uFF1B\u540C\u65F6\u5728\u670D\u52A1\u5C42\u5BF9 binlog \u8FDB\u884C\u5199\u5165\uFF0C\u5728 InnoDB \u5185\u8FDB\u884C redo log \u7684\u5199\u5165\u3002</p><p>\u4E0D\u4EC5\u5982\u6B64\uFF0C\u5728\u5BF9 redo log \u5199\u5165\u65F6\u6709\u4E24\u4E2A\u9636\u6BB5\u7684\u63D0\u4EA4\uFF0C\u4E00\u662F binlog \u5199\u5165\u4E4B\u524D<code>prepare</code>\u72B6\u6001\u7684\u5199\u5165\uFF0C\u4E8C\u662F binlog \u5199\u5165\u4E4B\u540E<code>commit</code>\u72B6\u6001\u7684\u5199\u5165\u3002</p><h3 id="_22-\u90A3\u4E3A\u4EC0\u4E48\u8981\u4E24\u9636\u6BB5\u63D0\u4EA4\u5462" tabindex="-1"><a class="header-anchor" href="#_22-\u90A3\u4E3A\u4EC0\u4E48\u8981\u4E24\u9636\u6BB5\u63D0\u4EA4\u5462" aria-hidden="true">#</a> 22.\u90A3\u4E3A\u4EC0\u4E48\u8981\u4E24\u9636\u6BB5\u63D0\u4EA4\u5462\uFF1F</h3><p>\u4E3A\u4EC0\u4E48\u8981\u4E24\u9636\u6BB5\u63D0\u4EA4\u5462\uFF1F\u76F4\u63A5\u63D0\u4EA4\u4E0D\u884C\u5417\uFF1F</p><p>\u6211\u4EEC\u53EF\u4EE5\u5047\u8BBE\u4E0D\u91C7\u7528\u4E24\u9636\u6BB5\u63D0\u4EA4\u7684\u65B9\u5F0F\uFF0C\u800C\u662F\u91C7\u7528\u201C\u5355\u9636\u6BB5\u201D\u8FDB\u884C\u63D0\u4EA4\uFF0C\u5373\u8981\u4E48\u5148\u5199\u5165 redo log\uFF0C\u540E\u5199\u5165 binlog\uFF1B\u8981\u4E48\u5148\u5199\u5165 binlog\uFF0C\u540E\u5199\u5165 redo log\u3002\u8FD9\u4E24\u79CD\u65B9\u5F0F\u7684\u63D0\u4EA4\u90FD\u4F1A\u5BFC\u81F4\u539F\u5148\u6570\u636E\u5E93\u7684\u72B6\u6001\u548C\u88AB\u6062\u590D\u540E\u7684\u6570\u636E\u5E93\u7684\u72B6\u6001\u4E0D\u4E00\u81F4\u3002</p><p><strong>\u5148\u5199\u5165 redo log\uFF0C\u540E\u5199\u5165 binlog\uFF1A</strong></p><p>\u5728\u5199\u5B8C redo log \u4E4B\u540E\uFF0C\u6570\u636E\u6B64\u65F6\u5177\u6709<code>crash-safe</code>\u80FD\u529B\uFF0C\u56E0\u6B64\u7CFB\u7EDF\u5D29\u6E83\uFF0C\u6570\u636E\u4F1A\u6062\u590D\u6210\u4E8B\u52A1\u5F00\u59CB\u4E4B\u524D\u7684\u72B6\u6001\u3002\u4F46\u662F\uFF0C\u82E5\u5728 redo log \u5199\u5B8C\u65F6\u5019\uFF0Cbinlog \u5199\u5165\u4E4B\u524D\uFF0C\u7CFB\u7EDF\u53D1\u751F\u4E86\u5B95\u673A\u3002\u6B64\u65F6 binlog \u6CA1\u6709\u5BF9\u4E0A\u9762\u7684\u66F4\u65B0\u8BED\u53E5\u8FDB\u884C\u4FDD\u5B58\uFF0C\u5BFC\u81F4\u5F53\u4F7F\u7528 binlog \u8FDB\u884C\u6570\u636E\u5E93\u7684\u5907\u4EFD\u6216\u8005\u6062\u590D\u65F6\uFF0C\u5C31\u5C11\u4E86\u4E0A\u8FF0\u7684\u66F4\u65B0\u8BED\u53E5\u3002\u4ECE\u800C\u4F7F\u5F97<code>id=2</code>\u8FD9\u4E00\u884C\u7684\u6570\u636E\u6CA1\u6709\u88AB\u66F4\u65B0\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-75d5226b-cab9-461a-89a9-befcb2dfb996.jpg" alt="\u5148\u5199 redo log\uFF0C\u540E\u5199 bin log \u7684\u95EE\u9898"></p><p><strong>\u5148\u5199\u5165 binlog\uFF0C\u540E\u5199\u5165 redo log\uFF1A</strong></p><p>\u5199\u5B8C binlog \u4E4B\u540E\uFF0C\u6240\u6709\u7684\u8BED\u53E5\u90FD\u88AB\u4FDD\u5B58\uFF0C\u6240\u4EE5\u901A\u8FC7 binlog \u590D\u5236\u6216\u6062\u590D\u51FA\u6765\u7684\u6570\u636E\u5E93\u4E2D id=2 \u8FD9\u4E00\u884C\u7684\u6570\u636E\u4F1A\u88AB\u66F4\u65B0\u4E3A a=1\u3002\u4F46\u662F\u5982\u679C\u5728 redo log \u5199\u5165\u4E4B\u524D\uFF0C\u7CFB\u7EDF\u5D29\u6E83\uFF0C\u90A3\u4E48 redo log \u4E2D\u8BB0\u5F55\u7684\u8FD9\u4E2A\u4E8B\u52A1\u4F1A\u65E0\u6548\uFF0C\u5BFC\u81F4\u5B9E\u9645\u6570\u636E\u5E93\u4E2D<code>id=2</code>\u8FD9\u4E00\u884C\u7684\u6570\u636E\u5E76\u6CA1\u6709\u66F4\u65B0\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-869c309b-9b93-46e1-8414-b35128e287a5.jpg" alt="\u5148\u5199 bin log\uFF0C\u540E\u5199 redo log \u7684\u95EE\u9898"></p><p>\u7B80\u5355\u8BF4\uFF0Credo log \u548C binlog \u90FD\u53EF\u4EE5\u7528\u4E8E\u8868\u793A\u4E8B\u52A1\u7684\u63D0\u4EA4\u72B6\u6001\uFF0C\u800C\u4E24\u9636\u6BB5\u63D0\u4EA4\u5C31\u662F\u8BA9\u8FD9\u4E24\u4E2A\u72B6\u6001\u4FDD\u6301\u903B\u8F91\u4E0A\u7684\u4E00\u81F4\u3002</p><h3 id="_23-redo-log-\u600E\u4E48\u5237\u5165\u78C1\u76D8\u7684\u77E5\u9053\u5417" tabindex="-1"><a class="header-anchor" href="#_23-redo-log-\u600E\u4E48\u5237\u5165\u78C1\u76D8\u7684\u77E5\u9053\u5417" aria-hidden="true">#</a> 23.redo log \u600E\u4E48\u5237\u5165\u78C1\u76D8\u7684\u77E5\u9053\u5417\uFF1F</h3><p>redo log \u7684\u5199\u5165\u4E0D\u662F\u76F4\u63A5\u843D\u5230\u78C1\u76D8\uFF0C\u800C\u662F\u5728\u5185\u5B58\u4E2D\u8BBE\u7F6E\u4E86\u4E00\u7247\u79F0\u4E4B\u4E3A<code>redo log buffer</code>\u7684\u8FDE\u7EED\u5185\u5B58\u7A7A\u95F4\uFF0C\u4E5F\u5C31\u662F<code>redo \u65E5\u5FD7\u7F13\u51B2\u533A</code>\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e1f59341-0695-45db-b759-30db73314e39.jpg" alt="redo log \u7F13\u51B2"></p><blockquote><p><strong>\u4EC0\u4E48\u65F6\u5019\u4F1A\u5237\u5165\u78C1\u76D8\uFF1F</strong></p></blockquote><p>\u5728\u5982\u4E0B\u7684\u4E00\u4E9B\u60C5\u51B5\u4E2D\uFF0Clog buffer \u7684\u6570\u636E\u4F1A\u5237\u5165\u78C1\u76D8\uFF1A</p><ul><li>log buffer \u7A7A\u95F4\u4E0D\u8DB3\u65F6</li></ul><p>log buffer \u7684\u5927\u5C0F\u662F\u6709\u9650\u7684\uFF0C\u5982\u679C\u4E0D\u505C\u7684\u5F80\u8FD9\u4E2A\u6709\u9650\u5927\u5C0F\u7684 log buffer \u91CC\u585E\u5165\u65E5\u5FD7\uFF0C\u5F88\u5FEB\u5B83\u5C31\u4F1A\u88AB\u586B\u6EE1\u3002\u5982\u679C\u5F53\u524D\u5199\u5165 log buffer \u7684 redo \u65E5\u5FD7\u91CF\u5DF2\u7ECF\u5360\u6EE1\u4E86 log buffer \u603B\u5BB9\u91CF\u7684\u5927\u7EA6<strong>\u4E00\u534A</strong>\u5DE6\u53F3\uFF0C\u5C31\u9700\u8981\u628A\u8FD9\u4E9B\u65E5\u5FD7\u5237\u65B0\u5230\u78C1\u76D8\u4E0A\u3002</p><ul><li>\u4E8B\u52A1\u63D0\u4EA4\u65F6</li></ul><p>\u5728\u4E8B\u52A1\u63D0\u4EA4\u65F6\uFF0C\u4E3A\u4E86\u4FDD\u8BC1\u6301\u4E45\u6027\uFF0C\u4F1A\u628A log buffer \u4E2D\u7684\u65E5\u5FD7\u5168\u90E8\u5237\u5230\u78C1\u76D8\u3002\u6CE8\u610F\uFF0C\u8FD9\u65F6\u5019\uFF0C\u9664\u4E86\u672C\u4E8B\u52A1\u7684\uFF0C\u53EF\u80FD\u8FD8\u4F1A\u5237\u5165\u5176\u5B83\u4E8B\u52A1\u7684\u65E5\u5FD7\u3002</p><ul><li>\u540E\u53F0\u7EBF\u7A0B\u8F93\u5165</li></ul><p>\u6709\u4E00\u4E2A\u540E\u53F0\u7EBF\u7A0B\uFF0C\u5927\u7EA6\u6BCF\u79D2\u90FD\u4F1A\u5237\u65B0\u4E00\u6B21<code>log buffer</code>\u4E2D\u7684<code>redo log</code>\u5230\u78C1\u76D8\u3002</p><ul><li>\u6B63\u5E38\u5173\u95ED\u670D\u52A1\u5668\u65F6</li><li><strong>\u89E6\u53D1 checkpoint \u89C4\u5219</strong></li></ul><p>\u91CD\u505A\u65E5\u5FD7\u7F13\u5B58\u3001\u91CD\u505A\u65E5\u5FD7\u6587\u4EF6\u90FD\u662F\u4EE5<strong>\u5757\uFF08block\uFF09<strong>\u7684\u65B9\u5F0F\u8FDB\u884C\u4FDD\u5B58\u7684\uFF0C\u79F0\u4E4B\u4E3A</strong>\u91CD\u505A\u65E5\u5FD7\u5757\uFF08redo log block\uFF09</strong>,\u5757\u7684\u5927\u5C0F\u662F\u56FA\u5B9A\u7684 512 \u5B57\u8282\u3002\u6211\u4EEC\u7684 redo log \u5B83\u662F\u56FA\u5B9A\u5927\u5C0F\u7684\uFF0C\u53EF\u4EE5\u770B\u4F5C\u662F\u4E00\u4E2A\u903B\u8F91\u4E0A\u7684 <strong>log group</strong>\uFF0C\u7531\u4E00\u5B9A\u6570\u91CF\u7684<strong>log block</strong> \u7EC4\u6210\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-8d944e76-89ba-4fa6-9066-64ff4f55b532.jpg" alt="redo log \u5206\u5757\u548C\u5199\u5165"></p><p>\u5B83\u7684\u5199\u5165\u65B9\u5F0F\u662F\u4ECE\u5934\u5230\u5C3E\u5F00\u59CB\u5199\uFF0C\u5199\u5230\u672B\u5C3E\u53C8\u56DE\u5230\u5F00\u5934\u5FAA\u73AF\u5199\u3002</p><p>\u5176\u4E2D\u6709\u4E24\u4E2A\u6807\u8BB0\u4F4D\u7F6E\uFF1A</p><p><code>write pos</code>\u662F\u5F53\u524D\u8BB0\u5F55\u7684\u4F4D\u7F6E\uFF0C\u4E00\u8FB9\u5199\u4E00\u8FB9\u540E\u79FB\uFF0C\u5199\u5230\u7B2C 3 \u53F7\u6587\u4EF6\u672B\u5C3E\u540E\u5C31\u56DE\u5230 0 \u53F7\u6587\u4EF6\u5F00\u5934\u3002<code>checkpoint</code>\u662F\u5F53\u524D\u8981\u64E6\u9664\u7684\u4F4D\u7F6E\uFF0C\u4E5F\u662F\u5F80\u540E\u63A8\u79FB\u5E76\u4E14\u5FAA\u73AF\u7684\uFF0C\u64E6\u9664\u8BB0\u5F55\u524D\u8981\u628A\u8BB0\u5F55\u66F4\u65B0\u5230\u78C1\u76D8\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-31a14149-b261-45d9-bd3b-6afaec16e136.jpg" alt="write pos \u548C checkpoint"></p><p>\u5F53<code>write_pos</code>\u8FFD\u4E0A<code>checkpoint</code>\u65F6\uFF0C\u8868\u793A redo log \u65E5\u5FD7\u5DF2\u7ECF\u5199\u6EE1\u3002\u8FD9\u65F6\u5019\u5C31\u4E0D\u80FD\u63A5\u7740\u5F80\u91CC\u5199\u6570\u636E\u4E86\uFF0C\u9700\u8981\u6267\u884C<code>checkpoint</code>\u89C4\u5219\u817E\u51FA\u53EF\u5199\u7A7A\u95F4\u3002</p><p>\u6240\u8C13\u7684<strong>checkpoint \u89C4\u5219</strong>\uFF0C\u5C31\u662F checkpoint \u89E6\u53D1\u540E\uFF0C\u5C06 buffer \u4E2D\u65E5\u5FD7\u9875\u90FD\u5237\u5230\u78C1\u76D8\u3002</p><h2 id="sql-\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#sql-\u4F18\u5316" aria-hidden="true">#</a> SQL \u4F18\u5316</h2><h3 id="_24-\u6162-sql-\u5982\u4F55\u5B9A\u4F4D\u5462" tabindex="-1"><a class="header-anchor" href="#_24-\u6162-sql-\u5982\u4F55\u5B9A\u4F4D\u5462" aria-hidden="true">#</a> 24.\u6162 SQL \u5982\u4F55\u5B9A\u4F4D\u5462\uFF1F</h3><p>\u6162 SQL \u7684\u76D1\u63A7\u4E3B\u8981\u901A\u8FC7\u4E24\u4E2A\u9014\u5F84\uFF1A</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-c0c43f82-3930-44f0-9abc-b33b08c02d2d.jpg" alt="\u53D1\u73B0\u6162 SQL"></p><ul><li><strong>\u6162\u67E5\u8BE2\u65E5\u5FD7</strong>\uFF1A\u5F00\u542F MySQL \u7684\u6162\u67E5\u8BE2\u65E5\u5FD7\uFF0C\u518D\u901A\u8FC7\u4E00\u4E9B\u5DE5\u5177\u6BD4\u5982 mysqldumpslow \u53BB\u5206\u6790\u5BF9\u5E94\u7684\u6162\u67E5\u8BE2\u65E5\u5FD7\uFF0C\u5F53\u7136\u73B0\u5728\u4E00\u822C\u7684\u4E91\u5382\u5546\u90FD\u63D0\u4F9B\u4E86\u53EF\u89C6\u5316\u7684\u5E73\u53F0\u3002</li><li><strong>\u670D\u52A1\u76D1\u63A7</strong>\uFF1A\u53EF\u4EE5\u5728\u4E1A\u52A1\u7684\u57FA\u5EFA\u4E2D\u52A0\u5165\u5BF9\u6162 SQL \u7684\u76D1\u63A7\uFF0C\u5E38\u89C1\u7684\u65B9\u6848\u6709\u5B57\u8282\u7801\u63D2\u6869\u3001\u8FDE\u63A5\u6C60\u6269\u5C55\u3001ORM \u6846\u67B6\u8FC7\u7A0B\uFF0C\u5BF9\u670D\u52A1\u8FD0\u884C\u4E2D\u7684\u6162 SQL \u8FDB\u884C\u76D1\u63A7\u548C\u544A\u8B66\u3002</li></ul><h3 id="_25-\u6709\u54EA\u4E9B\u65B9\u5F0F\u4F18\u5316\u6162-sql" tabindex="-1"><a class="header-anchor" href="#_25-\u6709\u54EA\u4E9B\u65B9\u5F0F\u4F18\u5316\u6162-sql" aria-hidden="true">#</a> 25.\u6709\u54EA\u4E9B\u65B9\u5F0F\u4F18\u5316\u6162 SQL\uFF1F</h3><p>\u6162 SQL \u7684\u4F18\u5316\uFF0C\u4E3B\u8981\u4ECE\u4E24\u4E2A\u65B9\u9762\u8003\u8651\uFF0CSQL \u8BED\u53E5\u672C\u8EAB\u7684\u4F18\u5316\uFF0C\u4EE5\u53CA\u6570\u636E\u5E93\u8BBE\u8BA1\u7684\u4F18\u5316\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e65e2428-a8f7-4381-9e15-c3e18b4c4d9c.jpg" alt="SQL \u4F18\u5316"></p><h4 id="\u907F\u514D\u4E0D\u5FC5\u8981\u7684\u5217" tabindex="-1"><a class="header-anchor" href="#\u907F\u514D\u4E0D\u5FC5\u8981\u7684\u5217" aria-hidden="true">#</a> \u907F\u514D\u4E0D\u5FC5\u8981\u7684\u5217</h4><p>\u8FD9\u4E2A\u662F\u8001\u751F\u5E38\u8C08\uFF0C\u4F46\u8FD8\u662F\u7ECF\u5E38\u4F1A\u51FA\u7684\u60C5\u51B5\uFF0CSQL \u67E5\u8BE2\u7684\u65F6\u5019\uFF0C\u5E94\u8BE5\u53EA\u67E5\u8BE2\u9700\u8981\u7684\u5217\uFF0C\u800C\u4E0D\u8981\u5305\u542B\u989D\u5916\u7684\u5217\uFF0C\u50CF<code>slect *</code> \u8FD9\u79CD\u5199\u6CD5\u5E94\u8BE5\u5C3D\u91CF\u907F\u514D\u3002</p><h4 id="\u5206\u9875\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#\u5206\u9875\u4F18\u5316" aria-hidden="true">#</a> \u5206\u9875\u4F18\u5316</h4><p>\u5728\u6570\u636E\u91CF\u6BD4\u8F83\u5927\uFF0C\u5206\u9875\u6BD4\u8F83\u6DF1\u7684\u60C5\u51B5\u4E0B\uFF0C\u9700\u8981\u8003\u8651\u5206\u9875\u7684\u4F18\u5316\u3002</p><p>\u4F8B\u5982\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select * from table where type = 2 and level = 9 order by id asc limit 190289,10;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F18\u5316\u65B9\u6848\uFF1A</p><ul><li><strong>\u5EF6\u8FDF\u5173\u8054</strong></li></ul><p>\u5148\u901A\u8FC7 where \u6761\u4EF6\u63D0\u53D6\u51FA\u4E3B\u952E\uFF0C\u5728\u5C06\u8BE5\u8868\u4E0E\u539F\u6570\u636E\u8868\u5173\u8054\uFF0C\u901A\u8FC7\u4E3B\u952E id \u63D0\u53D6\u6570\u636E\u884C\uFF0C\u800C\u4E0D\u662F\u901A\u8FC7\u539F\u6765\u7684\u4E8C\u7EA7\u7D22\u5F15\u63D0\u53D6\u6570\u636E\u884C</p><p>\u4F8B\u5982\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select a.* from table a, 
 (select id from table where type = 2 and level = 9 order by id asc limit 190289,10 ) b
 where a.id = b.id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>\u4E66\u7B7E\u65B9\u5F0F</strong></li></ul><p>\u4E66\u7B7E\u65B9\u5F0F\u5C31\u662F\u627E\u5230 limit \u7B2C\u4E00\u4E2A\u53C2\u6570\u5BF9\u5E94\u7684\u4E3B\u952E\u503C\uFF0C\u6839\u636E\u8FD9\u4E2A\u4E3B\u952E\u503C\u518D\u53BB\u8FC7\u6EE4\u5E76 limit</p><p>\u4F8B\u5982\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>  select * from table where id &gt;
  (select * from table where type = 2 and level = 9 order by id asc limit 190
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u7D22\u5F15\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u4F18\u5316" aria-hidden="true">#</a> \u7D22\u5F15\u4F18\u5316</h4><p>\u5408\u7406\u5730\u8BBE\u8BA1\u548C\u4F7F\u7528\u7D22\u5F15\uFF0C\u662F\u4F18\u5316\u6162 SQL \u7684\u5229\u5668\u3002</p><p><strong>\u5229\u7528\u8986\u76D6\u7D22\u5F15</strong></p><p>InnoDB \u4F7F\u7528\u975E\u4E3B\u952E\u7D22\u5F15\u67E5\u8BE2\u6570\u636E\u65F6\u4F1A\u56DE\u8868\uFF0C\u4F46\u662F\u5982\u679C\u7D22\u5F15\u7684\u53F6\u8282\u70B9\u4E2D\u5DF2\u7ECF\u5305\u542B\u8981\u67E5\u8BE2\u7684\u5B57\u6BB5\uFF0C\u90A3\u5B83\u6CA1\u6709\u5FC5\u8981\u518D\u56DE\u8868\u67E5\u8BE2\u4E86\uFF0C\u8FD9\u5C31\u53EB\u8986\u76D6\u7D22\u5F15</p><p>\u4F8B\u5982\u5BF9\u4E8E\u5982\u4E0B\u67E5\u8BE2\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select name from test where city=&#39;\u4E0A\u6D77&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6211\u4EEC\u5C06\u88AB\u67E5\u8BE2\u7684\u5B57\u6BB5\u5EFA\u7ACB\u5230\u8054\u5408\u7D22\u5F15\u4E2D\uFF0C\u8FD9\u6837\u67E5\u8BE2\u7ED3\u679C\u5C31\u53EF\u4EE5\u76F4\u63A5\u4ECE\u7D22\u5F15\u4E2D\u83B7\u53D6</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>alter table test add index idx_city_name (city, name);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u4F4E\u7248\u672C\u907F\u514D\u4F7F\u7528 or \u67E5\u8BE2</strong></p><p>\u5728 MySQL 5.0 \u4E4B\u524D\u7684\u7248\u672C\u8981\u5C3D\u91CF\u907F\u514D\u4F7F\u7528 or \u67E5\u8BE2\uFF0C\u53EF\u4EE5\u4F7F\u7528 union \u6216\u8005\u5B50\u67E5\u8BE2\u6765\u66FF\u4EE3\uFF0C\u56E0\u4E3A\u65E9\u671F\u7684 MySQL \u7248\u672C\u4F7F\u7528 or \u67E5\u8BE2\u53EF\u80FD\u4F1A\u5BFC\u81F4\u7D22\u5F15\u5931\u6548\uFF0C\u9AD8\u7248\u672C\u5F15\u5165\u4E86\u7D22\u5F15\u5408\u5E76\uFF0C\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\u3002</p><p><strong>\u907F\u514D\u4F7F\u7528 != \u6216\u8005 &lt;&gt; \u64CD\u4F5C\u7B26</strong></p><p>SQL \u4E2D\uFF0C\u4E0D\u7B49\u4E8E\u64CD\u4F5C\u7B26\u4F1A\u5BFC\u81F4\u67E5\u8BE2\u5F15\u64CE\u653E\u5F03\u67E5\u8BE2\u7D22\u5F15\uFF0C\u5F15\u8D77\u5168\u8868\u626B\u63CF\uFF0C\u5373\u4F7F\u6BD4\u8F83\u7684\u5B57\u6BB5\u4E0A\u6709\u7D22\u5F15</p><p>\u89E3\u51B3\u65B9\u6CD5\uFF1A\u901A\u8FC7\u628A\u4E0D\u7B49\u4E8E\u64CD\u4F5C\u7B26\u6539\u6210 or\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7D22\u5F15\uFF0C\u907F\u514D\u5168\u8868\u626B\u63CF</p><p>\u4F8B\u5982\uFF0C\u628A<code>column&lt;&gt;\u2019aaa\u2019\uFF0C\u6539\u6210column&gt;\u2019aaa\u2019 or column&lt;\u2019aaa\u2019</code>\uFF0C\u5C31\u53EF\u4EE5\u4F7F\u7528\u7D22\u5F15\u4E86</p><p><strong>\u9002\u5F53\u4F7F\u7528\u524D\u7F00\u7D22\u5F15</strong></p><p>\u9002\u5F53\u5730\u4F7F\u7528\u524D\u7F00\u6240\u4E91\uFF0C\u53EF\u4EE5\u964D\u4F4E\u7D22\u5F15\u7684\u7A7A\u95F4\u5360\u7528\uFF0C\u63D0\u9AD8\u7D22\u5F15\u7684\u67E5\u8BE2\u6548\u7387\u3002</p><p>\u6BD4\u5982\uFF0C\u90AE\u7BB1\u7684\u540E\u7F00\u90FD\u662F\u56FA\u5B9A\u7684\u201C<code>@xxx.com</code>\u201D\uFF0C\u90A3\u4E48\u7C7B\u4F3C\u8FD9\u79CD\u540E\u9762\u51E0\u4F4D\u4E3A\u56FA\u5B9A\u503C\u7684\u5B57\u6BB5\u5C31\u975E\u5E38\u9002\u5408\u5B9A\u4E49\u4E3A\u524D\u7F00\u7D22\u5F15</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>alter table test add index index2(email(6));
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>PS:\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u524D\u7F00\u7D22\u5F15\u4E5F\u5B58\u5728\u7F3A\u70B9\uFF0CMySQL \u65E0\u6CD5\u5229\u7528\u524D\u7F00\u7D22\u5F15\u505A order by \u548C group by \u64CD\u4F5C\uFF0C\u4E5F\u65E0\u6CD5\u4F5C\u4E3A\u8986\u76D6\u7D22\u5F15</p><p><strong>\u907F\u514D\u5217\u4E0A\u51FD\u6570\u8FD0\u7B97</strong></p><p>\u8981\u907F\u514D\u5728\u5217\u5B57\u6BB5\u4E0A\u8FDB\u884C\u7B97\u672F\u8FD0\u7B97\u6216\u5176\u4ED6\u8868\u8FBE\u5F0F\u8FD0\u7B97\uFF0C\u5426\u5219\u53EF\u80FD\u4F1A\u5BFC\u81F4\u5B58\u50A8\u5F15\u64CE\u65E0\u6CD5\u6B63\u786E\u4F7F\u7528\u7D22\u5F15\uFF0C\u4ECE\u800C\u5F71\u54CD\u4E86\u67E5\u8BE2\u7684\u6548\u7387</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select * from test where id + 1 = 50;
select * from test where month(updateTime) = 7;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6B63\u786E\u4F7F\u7528\u8054\u5408\u7D22\u5F15</strong></p><p>\u4F7F\u7528\u8054\u5408\u7D22\u5F15\u7684\u65F6\u5019\uFF0C\u6CE8\u610F\u6700\u5DE6\u5339\u914D\u539F\u5219\u3002</p><h4 id="join-\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#join-\u4F18\u5316" aria-hidden="true">#</a> JOIN \u4F18\u5316</h4><p><strong>\u4F18\u5316\u5B50\u67E5\u8BE2</strong></p><p>\u5C3D\u91CF\u4F7F\u7528 Join \u8BED\u53E5\u6765\u66FF\u4EE3\u5B50\u67E5\u8BE2\uFF0C\u56E0\u4E3A\u5B50\u67E5\u8BE2\u662F\u5D4C\u5957\u67E5\u8BE2\uFF0C\u800C\u5D4C\u5957\u67E5\u8BE2\u4F1A\u65B0\u521B\u5EFA\u4E00\u5F20\u4E34\u65F6\u8868\uFF0C\u800C\u4E34\u65F6\u8868\u7684\u521B\u5EFA\u4E0E\u9500\u6BC1\u4F1A\u5360\u7528\u4E00\u5B9A\u7684\u7CFB\u7EDF\u8D44\u6E90\u4EE5\u53CA\u82B1\u8D39\u4E00\u5B9A\u7684\u65F6\u95F4\uFF0C\u540C\u65F6\u5BF9\u4E8E\u8FD4\u56DE\u7ED3\u679C\u96C6\u6BD4\u8F83\u5927\u7684\u5B50\u67E5\u8BE2\uFF0C\u5176\u5BF9\u67E5\u8BE2\u6027\u80FD\u7684\u5F71\u54CD\u66F4\u5927</p><p><strong>\u5C0F\u8868\u9A71\u52A8\u5927\u8868</strong></p><p>\u5173\u8054\u67E5\u8BE2\u7684\u65F6\u5019\u8981\u62FF\u5C0F\u8868\u53BB\u9A71\u52A8\u5927\u8868\uFF0C\u56E0\u4E3A\u5173\u8054\u7684\u65F6\u5019\uFF0CMySQL \u5185\u90E8\u4F1A\u904D\u5386\u9A71\u52A8\u8868\uFF0C\u518D\u53BB\u8FDE\u63A5\u88AB\u9A71\u52A8\u8868\u3002</p><p>\u6BD4\u5982 left join\uFF0C\u5DE6\u8868\u5C31\u662F\u9A71\u52A8\u8868\uFF0CA \u8868\u5C0F\u4E8E B \u8868\uFF0C\u5EFA\u7ACB\u8FDE\u63A5\u7684\u6B21\u6570\u5C31\u5C11\uFF0C\u67E5\u8BE2\u901F\u5EA6\u5C31\u88AB\u52A0\u5FEB\u4E86\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> select name from A left join B ;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u9002\u5F53\u589E\u52A0\u5197\u4F59\u5B57\u6BB5</strong></p><p>\u589E\u52A0\u5197\u4F59\u5B57\u6BB5\u53EF\u4EE5\u51CF\u5C11\u5927\u91CF\u7684\u8FDE\u8868\u67E5\u8BE2\uFF0C\u56E0\u4E3A\u591A\u5F20\u8868\u7684\u8FDE\u8868\u67E5\u8BE2\u6027\u80FD\u5F88\u4F4E\uFF0C\u6240\u6709\u53EF\u4EE5\u9002\u5F53\u7684\u589E\u52A0\u5197\u4F59\u5B57\u6BB5\uFF0C\u4EE5\u51CF\u5C11\u591A\u5F20\u8868\u7684\u5173\u8054\u67E5\u8BE2\uFF0C\u8FD9\u662F\u4EE5\u7A7A\u95F4\u6362\u65F6\u95F4\u7684\u4F18\u5316\u7B56\u7565</p><p><strong>\u907F\u514D\u4F7F\u7528 JOIN \u5173\u8054\u592A\u591A\u7684\u8868</strong></p><p>\u300A\u963F\u91CC\u5DF4\u5DF4 Java \u5F00\u53D1\u624B\u518C\u300B\u89C4\u5B9A\u4E0D\u8981 join \u8D85\u8FC7\u4E09\u5F20\u8868\uFF0C\u7B2C\u4E00 join \u592A\u591A\u964D\u4F4E\u67E5\u8BE2\u7684\u901F\u5EA6\uFF0C\u7B2C\u4E8C join \u7684 buffer \u4F1A\u5360\u7528\u66F4\u591A\u7684\u5185\u5B58\u3002</p><p>\u5982\u679C\u4E0D\u53EF\u907F\u514D\u8981 join \u591A\u5F20\u8868\uFF0C\u53EF\u4EE5\u8003\u8651\u4F7F\u7528\u6570\u636E\u5F02\u6784\u7684\u65B9\u5F0F\u5F02\u6784\u5230 ES \u4E2D\u67E5\u8BE2\u3002</p><h4 id="\u6392\u5E8F\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#\u6392\u5E8F\u4F18\u5316" aria-hidden="true">#</a> \u6392\u5E8F\u4F18\u5316</h4><p><strong>\u5229\u7528\u7D22\u5F15\u626B\u63CF\u505A\u6392\u5E8F</strong></p><p>MySQL \u6709\u4E24\u79CD\u65B9\u5F0F\u751F\u6210\u6709\u5E8F\u7ED3\u679C\uFF1A\u5176\u4E00\u662F\u5BF9\u7ED3\u679C\u96C6\u8FDB\u884C\u6392\u5E8F\u7684\u64CD\u4F5C\uFF0C\u5176\u4E8C\u662F\u6309\u7167\u7D22\u5F15\u987A\u5E8F\u626B\u63CF\u5F97\u51FA\u7684\u7ED3\u679C\u81EA\u7136\u662F\u6709\u5E8F\u7684</p><p>\u4F46\u662F\u5982\u679C\u7D22\u5F15\u4E0D\u80FD\u8986\u76D6\u67E5\u8BE2\u6240\u9700\u5217\uFF0C\u5C31\u4E0D\u5F97\u4E0D\u6BCF\u626B\u63CF\u4E00\u6761\u8BB0\u5F55\u56DE\u8868\u67E5\u8BE2\u4E00\u6B21\uFF0C\u8FD9\u4E2A\u8BFB\u64CD\u4F5C\u662F\u968F\u673A IO\uFF0C\u901A\u5E38\u4F1A\u6BD4\u987A\u5E8F\u5168\u8868\u626B\u63CF\u8FD8\u6162</p><p>\u56E0\u6B64\uFF0C\u5728\u8BBE\u8BA1\u7D22\u5F15\u65F6\uFF0C\u5C3D\u53EF\u80FD\u4F7F\u7528\u540C\u4E00\u4E2A\u7D22\u5F15\u65E2\u6EE1\u8DB3\u6392\u5E8F\u53C8\u7528\u4E8E\u67E5\u627E\u884C</p><p>\u4F8B\u5982\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>--\u5EFA\u7ACB\u7D22\u5F15\uFF08date,staff_id,customer_id\uFF09
select staff_id, customer_id from test where date = &#39;2010-01-01&#39; order by staff_id,customer_id;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EA\u6709\u5F53\u7D22\u5F15\u7684\u5217\u987A\u5E8F\u548C ORDER BY \u5B50\u53E5\u7684\u987A\u5E8F\u5B8C\u5168\u4E00\u81F4\uFF0C\u5E76\u4E14\u6240\u6709\u5217\u7684\u6392\u5E8F\u65B9\u5411\u90FD\u4E00\u6837\u65F6\uFF0C\u624D\u80FD\u591F\u4F7F\u7528\u7D22\u5F15\u6765\u5BF9\u7ED3\u679C\u505A\u6392\u5E8F</p><h4 id="union-\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#union-\u4F18\u5316" aria-hidden="true">#</a> UNION \u4F18\u5316</h4><p><strong>\u6761\u4EF6\u4E0B\u63A8</strong></p><p>MySQL \u5904\u7406 union \u7684\u7B56\u7565\u662F\u5148\u521B\u5EFA\u4E34\u65F6\u8868\uFF0C\u7136\u540E\u5C06\u5404\u4E2A\u67E5\u8BE2\u7ED3\u679C\u586B\u5145\u5230\u4E34\u65F6\u8868\u4E2D\u6700\u540E\u518D\u6765\u505A\u67E5\u8BE2\uFF0C\u5F88\u591A\u4F18\u5316\u7B56\u7565\u5728 union \u67E5\u8BE2\u4E2D\u90FD\u4F1A\u5931\u6548\uFF0C\u56E0\u4E3A\u5B83\u65E0\u6CD5\u5229\u7528\u7D22\u5F15</p><p>\u6700\u597D\u624B\u5DE5\u5C06 where\u3001limit \u7B49\u5B50\u53E5\u4E0B\u63A8\u5230 union \u7684\u5404\u4E2A\u5B50\u67E5\u8BE2\u4E2D\uFF0C\u4EE5\u4FBF\u4F18\u5316\u5668\u53EF\u4EE5\u5145\u5206\u5229\u7528\u8FD9\u4E9B\u6761\u4EF6\u8FDB\u884C\u4F18\u5316</p><p>\u6B64\u5916\uFF0C\u9664\u975E\u786E\u5B9E\u9700\u8981\u670D\u52A1\u5668\u53BB\u91CD\uFF0C\u4E00\u5B9A\u8981\u4F7F\u7528 union all\uFF0C\u5982\u679C\u4E0D\u52A0 all \u5173\u952E\u5B57\uFF0CMySQL \u4F1A\u7ED9\u4E34\u65F6\u8868\u52A0\u4E0A distinct \u9009\u9879\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u5BF9\u6574\u4E2A\u4E34\u65F6\u8868\u505A\u552F\u4E00\u6027\u68C0\u67E5\uFF0C\u4EE3\u4EF7\u5F88\u9AD8\u3002</p><h3 id="_26-\u600E\u4E48\u770B\u6267\u884C\u8BA1\u5212-explain-\u5982\u4F55\u7406\u89E3\u5176\u4E2D\u5404\u4E2A\u5B57\u6BB5\u7684\u542B\u4E49" tabindex="-1"><a class="header-anchor" href="#_26-\u600E\u4E48\u770B\u6267\u884C\u8BA1\u5212-explain-\u5982\u4F55\u7406\u89E3\u5176\u4E2D\u5404\u4E2A\u5B57\u6BB5\u7684\u542B\u4E49" aria-hidden="true">#</a> 26.\u600E\u4E48\u770B\u6267\u884C\u8BA1\u5212\uFF08explain\uFF09\uFF0C\u5982\u4F55\u7406\u89E3\u5176\u4E2D\u5404\u4E2A\u5B57\u6BB5\u7684\u542B\u4E49\uFF1F</h3><p>explain \u662F sql \u4F18\u5316\u7684\u5229\u5668\uFF0C\u9664\u4E86\u4F18\u5316\u6162 sql\uFF0C\u5E73\u65F6\u7684 sql \u7F16\u5199\uFF0C\u4E5F\u5E94\u8BE5\u5148 explain\uFF0C\u67E5\u770B\u4E00\u4E0B\u6267\u884C\u8BA1\u5212\uFF0C\u770B\u770B\u662F\u5426\u8FD8\u6709\u4F18\u5316\u7684\u7A7A\u95F4\u3002</p><p>\u76F4\u63A5\u5728 select \u8BED\u53E5\u4E4B\u524D\u589E\u52A0<code>explain</code> \u5173\u952E\u5B57\uFF0C\u5C31\u4F1A\u8FD4\u56DE\u6267\u884C\u8BA1\u5212\u7684\u4FE1\u606F\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-77711553-bb7b-4580-968a-4a973e3a31ca.jpg" alt=""></p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e234658f-5672-4a8d-9a75-872b305a171d.jpg" alt=""></p><ol><li><strong>id</strong> \u5217\uFF1AMySQL \u4F1A\u4E3A\u6BCF\u4E2A select \u8BED\u53E5\u5206\u914D\u4E00\u4E2A\u552F\u4E00\u7684 id \u503C</li><li><strong>select_type</strong> \u5217\uFF0C\u67E5\u8BE2\u7684\u7C7B\u578B\uFF0C\u6839\u636E\u5173\u8054\u3001union\u3001\u5B50\u67E5\u8BE2\u7B49\u7B49\u5206\u7C7B\uFF0C\u5E38\u89C1\u7684\u67E5\u8BE2\u7C7B\u578B\u6709 SIMPLE\u3001PRIMARY\u3002</li><li><strong>table</strong> \u5217\uFF1A\u8868\u793A explain \u7684\u4E00\u884C\u6B63\u5728\u8BBF\u95EE\u54EA\u4E2A\u8868\u3002</li><li><strong>type</strong> \u5217\uFF1A\u6700\u91CD\u8981\u7684\u5217\u4E4B\u4E00\u3002\u8868\u793A\u5173\u8054\u7C7B\u578B\u6216\u8BBF\u95EE\u7C7B\u578B\uFF0C\u5373 MySQL \u51B3\u5B9A\u5982\u4F55\u67E5\u627E\u8868\u4E2D\u7684\u884C\u3002</li></ol><p>\u6027\u80FD\u4ECE\u6700\u4F18\u5230\u6700\u5DEE\u5206\u522B\u4E3A\uFF1Asystem &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL</p><ul><li>system</li></ul><p><code>system</code>\uFF1A\u5F53\u8868\u4EC5\u6709\u4E00\u884C\u8BB0\u5F55\u65F6(\u7CFB\u7EDF\u8868)\uFF0C\u6570\u636E\u91CF\u5F88\u5C11\uFF0C\u5F80\u5F80\u4E0D\u9700\u8981\u8FDB\u884C\u78C1\u76D8 IO\uFF0C\u901F\u5EA6\u975E\u5E38\u5FEB</p><ul><li>const</li></ul><p><code>const</code>\uFF1A\u8868\u793A\u67E5\u8BE2\u65F6\u547D\u4E2D <code>primary key</code> \u4E3B\u952E\u6216\u8005 <code>unique</code> \u552F\u4E00\u7D22\u5F15\uFF0C\u6216\u8005\u88AB\u8FDE\u63A5\u7684\u90E8\u5206\u662F\u4E00\u4E2A\u5E38\u91CF(<code>const</code>)\u503C\u3002\u8FD9\u7C7B\u626B\u63CF\u6548\u7387\u6781\u9AD8\uFF0C\u8FD4\u56DE\u6570\u636E\u91CF\u5C11\uFF0C\u901F\u5EA6\u975E\u5E38\u5FEB\u3002</p><ul><li>eq_ref</li></ul><p><code>eq_ref</code>\uFF1A\u67E5\u8BE2\u65F6\u547D\u4E2D\u4E3B\u952E<code>primary key</code> \u6216\u8005 <code>unique key</code>\u7D22\u5F15\uFF0C <code>type</code> \u5C31\u662F <code>eq_ref</code>\u3002</p><ul><li>ref_or_null</li></ul><p><code>ref_or_null</code>\uFF1A\u8FD9\u79CD\u8FDE\u63A5\u7C7B\u578B\u7C7B\u4F3C\u4E8E ref\uFF0C\u533A\u522B\u5728\u4E8E <code>MySQL</code>\u4F1A\u989D\u5916\u641C\u7D22\u5305\u542B<code>NULL</code>\u503C\u7684\u884C\u3002</p><ul><li>index_merge</li></ul><p><code>index_merge</code>\uFF1A\u4F7F\u7528\u4E86\u7D22\u5F15\u5408\u5E76\u4F18\u5316\u65B9\u6CD5\uFF0C\u67E5\u8BE2\u4F7F\u7528\u4E86\u4E24\u4E2A\u4EE5\u4E0A\u7684\u7D22\u5F15\u3002</p><ul><li>unique_subquery</li></ul><p><code>unique_subquery</code>\uFF1A\u66FF\u6362\u4E0B\u9762\u7684 <code>IN</code>\u5B50\u67E5\u8BE2\uFF0C\u5B50\u67E5\u8BE2\u8FD4\u56DE\u4E0D\u91CD\u590D\u7684\u96C6\u5408\u3002</p><ul><li>index_subquery</li></ul><p><code>index_subquery</code>\uFF1A\u533A\u522B\u4E8E<code>unique_subquery</code>\uFF0C\u7528\u4E8E\u975E\u552F\u4E00\u7D22\u5F15\uFF0C\u53EF\u4EE5\u8FD4\u56DE\u91CD\u590D\u503C\u3002</p><ul><li>range</li></ul><p><code>range</code>\uFF1A\u4F7F\u7528\u7D22\u5F15\u9009\u62E9\u884C\uFF0C\u4EC5\u68C0\u7D22\u7ED9\u5B9A\u8303\u56F4\u5185\u7684\u884C\u3002\u7B80\u5355\u70B9\u8BF4\u5C31\u662F\u9488\u5BF9\u4E00\u4E2A\u6709\u7D22\u5F15\u7684\u5B57\u6BB5\uFF0C\u7ED9\u5B9A\u8303\u56F4\u68C0\u7D22\u6570\u636E\u3002\u5728<code>where</code>\u8BED\u53E5\u4E2D\u4F7F\u7528 <code>bettween...and</code>\u3001<code>&lt;</code>\u3001<code>&gt;</code>\u3001<code>&lt;=</code>\u3001<code>in</code> \u7B49\u6761\u4EF6\u67E5\u8BE2 <code>type</code> \u90FD\u662F <code>range</code>\u3002</p><ul><li>index</li></ul><p><code>index</code>\uFF1A<code>Index</code> \u4E0E<code>ALL</code> \u5176\u5B9E\u90FD\u662F\u8BFB\u5168\u8868\uFF0C\u533A\u522B\u5728\u4E8E<code>index</code>\u662F\u904D\u5386\u7D22\u5F15\u6811\u8BFB\u53D6\uFF0C\u800C<code>ALL</code>\u662F\u4ECE\u786C\u76D8\u4E2D\u8BFB\u53D6\u3002</p><ul><li>ALL</li></ul><p>\u5C31\u4E0D\u7528\u591A\u8BF4\u4E86\uFF0C\u5168\u8868\u626B\u63CF\u3002</p><ol start="6"><li><strong>possible_keys</strong> \u5217\uFF1A\u663E\u793A\u67E5\u8BE2\u53EF\u80FD\u4F7F\u7528\u54EA\u4E9B\u7D22\u5F15\u6765\u67E5\u627E\uFF0C\u4F7F\u7528\u7D22\u5F15\u4F18\u5316 sql \u7684\u65F6\u5019\u6BD4\u8F83\u91CD\u8981\u3002</li><li><strong>key</strong> \u5217\uFF1A\u8FD9\u4E00\u5217\u663E\u793A mysql \u5B9E\u9645\u91C7\u7528\u54EA\u4E2A\u7D22\u5F15\u6765\u4F18\u5316\u5BF9\u8BE5\u8868\u7684\u8BBF\u95EE\uFF0C\u5224\u65AD\u7D22\u5F15\u662F\u5426\u5931\u6548\u7684\u65F6\u5019\u5E38\u7528\u3002</li><li><strong>key_len</strong> \u5217\uFF1A\u663E\u793A\u4E86 MySQL \u4F7F\u7528</li><li><strong>ref</strong> \u5217\uFF1Aref \u5217\u5C55\u793A\u7684\u5C31\u662F\u4E0E\u7D22\u5F15\u5217\u4F5C\u7B49\u503C\u5339\u914D\u7684\u503C\uFF0C\u5E38\u89C1\u7684\u6709\uFF1Aconst\uFF08\u5E38\u91CF\uFF09\uFF0Cfunc\uFF0CNULL\uFF0C\u5B57\u6BB5\u540D\u3002</li><li><strong>rows</strong> \u5217\uFF1A\u8FD9\u4E5F\u662F\u4E00\u4E2A\u91CD\u8981\u7684\u5B57\u6BB5\uFF0CMySQL \u67E5\u8BE2\u4F18\u5316\u5668\u6839\u636E\u7EDF\u8BA1\u4FE1\u606F\uFF0C\u4F30\u7B97 SQL \u8981\u67E5\u5230\u7ED3\u679C\u96C6\u9700\u8981\u626B\u63CF\u8BFB\u53D6\u7684\u6570\u636E\u884C\u6570\uFF0C\u8FD9\u4E2A\u503C\u975E\u5E38\u76F4\u89C2\u663E\u793A SQL \u7684\u6548\u7387\u597D\u574F\uFF0C\u539F\u5219\u4E0A rows \u8D8A\u5C11\u8D8A\u597D\u3002</li><li><strong>Extra</strong> \u5217\uFF1A\u663E\u793A\u4E0D\u9002\u5408\u5728\u5176\u5B83\u5217\u7684\u989D\u5916\u4FE1\u606F\uFF0C\u867D\u7136\u53EB\u989D\u5916\uFF0C\u4F46\u662F\u4E5F\u6709\u4E00\u4E9B\u91CD\u8981\u7684\u4FE1\u606F\uFF1A</li></ol><ul><li>Using index\uFF1A\u8868\u793A MySQL \u5C06\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\uFF0C\u4EE5\u907F\u514D\u56DE\u8868</li><li>Using where\uFF1A\u8868\u793A\u4F1A\u5728\u5B58\u50A8\u5F15\u64CE\u68C0\u7D22\u4E4B\u540E\u518D\u8FDB\u884C\u8FC7\u6EE4</li><li>Using temporary \uFF1A\u8868\u793A\u5BF9\u67E5\u8BE2\u7ED3\u679C\u6392\u5E8F\u65F6\u4F1A\u4F7F\u7528\u4E00\u4E2A\u4E34\u65F6\u8868\u3002</li></ul><h2 id="\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15" aria-hidden="true">#</a> \u7D22\u5F15</h2><p>\u7D22\u5F15\u53EF\u4EE5\u8BF4\u662F MySQL \u9762\u8BD5\u4E2D\u7684\u91CD\u4E2D\u4E4B\u91CD\uFF0C\u4E00\u5B9A\u8981\u5F7B\u5E95\u62FF\u4E0B\u3002</p><h3 id="_27-\u80FD\u7B80\u5355\u8BF4\u4E00\u4E0B\u7D22\u5F15\u7684\u5206\u7C7B\u5417" tabindex="-1"><a class="header-anchor" href="#_27-\u80FD\u7B80\u5355\u8BF4\u4E00\u4E0B\u7D22\u5F15\u7684\u5206\u7C7B\u5417" aria-hidden="true">#</a> 27.\u80FD\u7B80\u5355\u8BF4\u4E00\u4E0B\u7D22\u5F15\u7684\u5206\u7C7B\u5417\uFF1F</h3><p>\u4ECE\u4E09\u4E2A\u4E0D\u540C\u7EF4\u5EA6\u5BF9\u7D22\u5F15\u5206\u7C7B\uFF1A</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-f650c0b8-9ebe-4e17-ac7e-b8eb121756a1.jpg" alt="\u7D22\u5F15\u5206\u7C7B"></p><p>\u4F8B\u5982\u4ECE\u57FA\u672C\u4F7F\u7528\u4F7F\u7528\u7684\u89D2\u5EA6\u6765\u8BB2\uFF1A</p><ul><li>\u4E3B\u952E\u7D22\u5F15: InnoDB \u4E3B\u952E\u662F\u9ED8\u8BA4\u7684\u7D22\u5F15\uFF0C\u6570\u636E\u5217\u4E0D\u5141\u8BB8\u91CD\u590D\uFF0C\u4E0D\u5141\u8BB8\u4E3A NULL\uFF0C\u4E00\u4E2A\u8868\u53EA\u80FD\u6709\u4E00\u4E2A\u4E3B\u952E\u3002</li><li>\u552F\u4E00\u7D22\u5F15: \u6570\u636E\u5217\u4E0D\u5141\u8BB8\u91CD\u590D\uFF0C\u5141\u8BB8\u4E3A NULL \u503C\uFF0C\u4E00\u4E2A\u8868\u5141\u8BB8\u591A\u4E2A\u5217\u521B\u5EFA\u552F\u4E00\u7D22\u5F15\u3002</li><li>\u666E\u901A\u7D22\u5F15: \u57FA\u672C\u7684\u7D22\u5F15\u7C7B\u578B\uFF0C\u6CA1\u6709\u552F\u4E00\u6027\u7684\u9650\u5236\uFF0C\u5141\u8BB8\u4E3A NULL \u503C\u3002</li><li>\u7EC4\u5408\u7D22\u5F15\uFF1A\u591A\u5217\u503C\u7EC4\u6210\u4E00\u4E2A\u7D22\u5F15\uFF0C\u7528\u4E8E\u7EC4\u5408\u641C\u7D22\uFF0C\u6548\u7387\u5927\u4E8E\u7D22\u5F15\u5408\u5E76</li></ul><h3 id="_28-\u4E3A\u4EC0\u4E48\u4F7F\u7528\u7D22\u5F15\u4F1A\u52A0\u5FEB\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_28-\u4E3A\u4EC0\u4E48\u4F7F\u7528\u7D22\u5F15\u4F1A\u52A0\u5FEB\u67E5\u8BE2" aria-hidden="true">#</a> 28.\u4E3A\u4EC0\u4E48\u4F7F\u7528\u7D22\u5F15\u4F1A\u52A0\u5FEB\u67E5\u8BE2\uFF1F</h3><p>\u4F20\u7EDF\u7684\u67E5\u8BE2\u65B9\u6CD5\uFF0C\u662F\u6309\u7167\u8868\u7684\u987A\u5E8F\u904D\u5386\u7684\uFF0C\u4E0D\u8BBA\u67E5\u8BE2\u51E0\u6761\u6570\u636E\uFF0CMySQL \u9700\u8981\u5C06\u8868\u7684\u6570\u636E\u4ECE\u5934\u5230\u5C3E\u904D\u5386\u4E00\u904D\u3002</p><p>\u5728\u6211\u4EEC\u6DFB\u52A0\u5B8C\u7D22\u5F15\u4E4B\u540E\uFF0CMySQL \u4E00\u822C\u901A\u8FC7 BTREE \u7B97\u6CD5\u751F\u6210\u4E00\u4E2A\u7D22\u5F15\u6587\u4EF6\uFF0C\u5728\u67E5\u8BE2\u6570\u636E\u5E93\u65F6\uFF0C\u627E\u5230\u7D22\u5F15\u6587\u4EF6\u8FDB\u884C\u904D\u5386\uFF0C\u5728\u6BD4\u8F83\u5C0F\u7684\u7D22\u5F15\u6570\u636E\u91CC\u67E5\u627E\uFF0C\u7136\u540E\u6620\u5C04\u5230\u5BF9\u5E94\u7684\u6570\u636E\uFF0C\u80FD\u5927\u5E45\u63D0\u5347\u67E5\u627E\u7684\u6548\u7387\u3002</p><p>\u548C\u6211\u4EEC\u901A\u8FC7\u4E66\u7684\u76EE\u5F55\uFF0C\u53BB\u67E5\u627E\u5BF9\u5E94\u7684\u5185\u5BB9\uFF0C\u4E00\u6837\u7684\u9053\u7406\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-6b9c9901-9bf3-46ed-a5c4-c1b781965c1e.jpg" alt="\u7D22\u5F15\u52A0\u5FEB\u67E5\u8BE2\u8FDC\u79BB"></p><h3 id="_29-\u521B\u5EFA\u7D22\u5F15\u6709\u54EA\u4E9B\u6CE8\u610F\u70B9" tabindex="-1"><a class="header-anchor" href="#_29-\u521B\u5EFA\u7D22\u5F15\u6709\u54EA\u4E9B\u6CE8\u610F\u70B9" aria-hidden="true">#</a> 29.\u521B\u5EFA\u7D22\u5F15\u6709\u54EA\u4E9B\u6CE8\u610F\u70B9\uFF1F</h3><p>\u7D22\u5F15\u867D\u7136\u662F sql \u6027\u80FD\u4F18\u5316\u7684\u5229\u5668\uFF0C\u4F46\u662F\u7D22\u5F15\u7684\u7EF4\u62A4\u4E5F\u662F\u9700\u8981\u6210\u672C\u7684\uFF0C\u6240\u4EE5\u521B\u5EFA\u7D22\u5F15\uFF0C\u4E5F\u8981\u6CE8\u610F\uFF1A</p><ol><li>\u7D22\u5F15\u5E94\u8BE5\u5EFA\u5728\u67E5\u8BE2\u5E94\u7528\u9891\u7E41\u7684\u5B57\u6BB5</li></ol><p>\u5728\u7528\u4E8E where \u5224\u65AD\u3001 order \u6392\u5E8F\u548C join \u7684(on)\u5B57\u6BB5\u4E0A\u521B\u5EFA\u7D22\u5F15\u3002</p><ol start="2"><li>\u7D22\u5F15\u7684\u4E2A\u6570\u5E94\u8BE5\u9002\u91CF</li></ol><p>\u7D22\u5F15\u9700\u8981\u5360\u7528\u7A7A\u95F4\uFF1B\u66F4\u65B0\u65F6\u5019\u4E5F\u9700\u8981\u7EF4\u62A4\u3002</p><ol start="3"><li>\u533A\u5206\u5EA6\u4F4E\u7684\u5B57\u6BB5\uFF0C\u4F8B\u5982\u6027\u522B\uFF0C\u4E0D\u8981\u5EFA\u7D22\u5F15\u3002</li></ol><p>\u79BB\u6563\u5EA6\u592A\u4F4E\u7684\u5B57\u6BB5\uFF0C\u626B\u63CF\u7684\u884C\u6570\u964D\u4F4E\u7684\u6709\u9650\u3002</p><ol start="4"><li>\u9891\u7E41\u66F4\u65B0\u7684\u503C\uFF0C\u4E0D\u8981\u4F5C\u4E3A\u4E3B\u952E\u6216\u8005\u7D22\u5F15</li></ol><p>\u7EF4\u62A4\u7D22\u5F15\u6587\u4EF6\u9700\u8981\u6210\u672C\uFF1B\u8FD8\u4F1A\u5BFC\u81F4\u9875\u5206\u88C2\uFF0CIO \u6B21\u6570\u589E\u591A\u3002</p><ol start="5"><li>\u7EC4\u5408\u7D22\u5F15\u628A\u6563\u5217\u6027\u9AD8(\u533A\u5206\u5EA6\u9AD8)\u7684\u503C\u653E\u5728\u524D\u9762</li></ol><p>\u4E3A\u4E86\u6EE1\u8DB3\u6700\u5DE6\u524D\u7F00\u5339\u914D\u539F\u5219</p><ol start="6"><li>\u521B\u5EFA\u7EC4\u5408\u7D22\u5F15\uFF0C\u800C\u4E0D\u662F\u4FEE\u6539\u5355\u5217\u7D22\u5F15\u3002</li></ol><p>\u7EC4\u5408\u7D22\u5F15\u4EE3\u66FF\u591A\u4E2A\u5355\u5217\u7D22\u5F15\uFF08\u5BF9\u4E8E\u5355\u5217\u7D22\u5F15\uFF0CMySQL \u57FA\u672C\u53EA\u80FD\u4F7F\u7528\u4E00\u4E2A\u7D22\u5F15\uFF0C\u6240\u4EE5\u7ECF\u5E38\u4F7F\u7528\u591A\u4E2A\u6761\u4EF6\u67E5\u8BE2\u65F6\u66F4\u9002\u5408\u4F7F\u7528\u7EC4\u5408\u7D22\u5F15\uFF09</p><ol start="7"><li>\u8FC7\u957F\u7684\u5B57\u6BB5\uFF0C\u4F7F\u7528\u524D\u7F00\u7D22\u5F15\u3002\u5F53\u5B57\u6BB5\u503C\u6BD4\u8F83\u957F\u7684\u65F6\u5019\uFF0C\u5EFA\u7ACB\u7D22\u5F15\u4F1A\u6D88\u8017\u5F88\u591A\u7684\u7A7A\u95F4\uFF0C\u641C\u7D22\u8D77\u6765\u4E5F\u4F1A\u5F88\u6162\u3002\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u622A\u53D6\u5B57\u6BB5\u7684\u524D\u9762\u4E00\u90E8\u5206\u5185\u5BB9\u5EFA\u7ACB\u7D22\u5F15\uFF0C\u8FD9\u4E2A\u5C31\u53EB\u524D\u7F00\u7D22\u5F15\u3002</li><li>\u4E0D\u5EFA\u8BAE\u7528\u65E0\u5E8F\u7684\u503C(\u4F8B\u5982\u8EAB\u4EFD\u8BC1\u3001UUID )\u4F5C\u4E3A\u7D22\u5F15</li></ol><p>\u5F53\u4E3B\u952E\u5177\u6709\u4E0D\u786E\u5B9A\u6027\uFF0C\u4F1A\u9020\u6210\u53F6\u5B50\u8282\u70B9\u9891\u7E41\u5206\u88C2\uFF0C\u51FA\u73B0\u78C1\u76D8\u5B58\u50A8\u7684\u788E\u7247\u5316</p><h3 id="_30-\u7D22\u5F15\u54EA\u4E9B\u60C5\u51B5\u4E0B\u4F1A\u5931\u6548\u5462" tabindex="-1"><a class="header-anchor" href="#_30-\u7D22\u5F15\u54EA\u4E9B\u60C5\u51B5\u4E0B\u4F1A\u5931\u6548\u5462" aria-hidden="true">#</a> 30.\u7D22\u5F15\u54EA\u4E9B\u60C5\u51B5\u4E0B\u4F1A\u5931\u6548\u5462\uFF1F</h3><ul><li>\u67E5\u8BE2\u6761\u4EF6\u5305\u542B or\uFF0C\u53EF\u80FD\u5BFC\u81F4\u7D22\u5F15\u5931\u6548</li><li>\u5982\u679C\u5B57\u6BB5\u7C7B\u578B\u662F\u5B57\u7B26\u4E32\uFF0Cwhere \u65F6\u4E00\u5B9A\u7528\u5F15\u53F7\u62EC\u8D77\u6765\uFF0C\u5426\u5219\u4F1A\u56E0\u4E3A\u9690\u5F0F\u7C7B\u578B\u8F6C\u6362\uFF0C\u7D22\u5F15\u5931\u6548</li><li>like \u901A\u914D\u7B26\u53EF\u80FD\u5BFC\u81F4\u7D22\u5F15\u5931\u6548\u3002</li><li>\u8054\u5408\u7D22\u5F15\uFF0C\u67E5\u8BE2\u65F6\u7684\u6761\u4EF6\u5217\u4E0D\u662F\u8054\u5408\u7D22\u5F15\u4E2D\u7684\u7B2C\u4E00\u4E2A\u5217\uFF0C\u7D22\u5F15\u5931\u6548\u3002</li><li>\u5728\u7D22\u5F15\u5217\u4E0A\u4F7F\u7528 mysql \u7684\u5185\u7F6E\u51FD\u6570\uFF0C\u7D22\u5F15\u5931\u6548\u3002</li><li>\u5BF9\u7D22\u5F15\u5217\u8FD0\u7B97\uFF08\u5982\uFF0C+\u3001-\u3001*\u3001/\uFF09\uFF0C\u7D22\u5F15\u5931\u6548\u3002</li><li>\u7D22\u5F15\u5B57\u6BB5\u4E0A\u4F7F\u7528\uFF08\uFF01= \u6216\u8005 &lt; &gt;\uFF0Cnot in\uFF09\u65F6\uFF0C\u53EF\u80FD\u4F1A\u5BFC\u81F4\u7D22\u5F15\u5931\u6548\u3002</li><li>\u7D22\u5F15\u5B57\u6BB5\u4E0A\u4F7F\u7528 is null\uFF0C is not null\uFF0C\u53EF\u80FD\u5BFC\u81F4\u7D22\u5F15\u5931\u6548\u3002</li><li>\u5DE6\u8FDE\u63A5\u67E5\u8BE2\u6216\u8005\u53F3\u8FDE\u63A5\u67E5\u8BE2\u67E5\u8BE2\u5173\u8054\u7684\u5B57\u6BB5\u7F16\u7801\u683C\u5F0F\u4E0D\u4E00\u6837\uFF0C\u53EF\u80FD\u5BFC\u81F4\u7D22\u5F15\u5931\u6548\u3002</li><li>MySQL \u4F18\u5316\u5668\u4F30\u8BA1\u4F7F\u7528\u5168\u8868\u626B\u63CF\u8981\u6BD4\u4F7F\u7528\u7D22\u5F15\u5FEB,\u5219\u4E0D\u4F7F\u7528\u7D22\u5F15\u3002</li></ul><h3 id="_31-\u7D22\u5F15\u4E0D\u9002\u5408\u54EA\u4E9B\u573A\u666F\u5462" tabindex="-1"><a class="header-anchor" href="#_31-\u7D22\u5F15\u4E0D\u9002\u5408\u54EA\u4E9B\u573A\u666F\u5462" aria-hidden="true">#</a> 31.\u7D22\u5F15\u4E0D\u9002\u5408\u54EA\u4E9B\u573A\u666F\u5462\uFF1F</h3><ul><li>\u6570\u636E\u91CF\u6BD4\u8F83\u5C11\u7684\u8868\u4E0D\u9002\u5408\u52A0\u7D22\u5F15</li><li>\u66F4\u65B0\u6BD4\u8F83\u9891\u7E41\u7684\u5B57\u6BB5\u4E5F\u4E0D\u9002\u5408\u52A0\u7D22\u5F15</li><li>\u79BB\u6563\u4F4E\u7684\u5B57\u6BB5\u4E0D\u9002\u5408\u52A0\u7D22\u5F15\uFF08\u5982\u6027\u522B\uFF09</li></ul><h3 id="_32-\u7D22\u5F15\u662F\u4E0D\u662F\u5EFA\u7684\u8D8A\u591A\u8D8A\u597D\u5462" tabindex="-1"><a class="header-anchor" href="#_32-\u7D22\u5F15\u662F\u4E0D\u662F\u5EFA\u7684\u8D8A\u591A\u8D8A\u597D\u5462" aria-hidden="true">#</a> 32.\u7D22\u5F15\u662F\u4E0D\u662F\u5EFA\u7684\u8D8A\u591A\u8D8A\u597D\u5462\uFF1F</h3><p>\u5F53\u7136\u4E0D\u662F\u3002</p><ul><li><strong>\u7D22\u5F15\u4F1A\u5360\u636E\u78C1\u76D8\u7A7A\u95F4</strong></li><li><strong>\u7D22\u5F15\u867D\u7136\u4F1A\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387\uFF0C\u4F46\u662F\u4F1A\u964D\u4F4E\u66F4\u65B0\u8868\u7684\u6548\u7387</strong>\u3002\u6BD4\u5982\u6BCF\u6B21\u5BF9\u8868\u8FDB\u884C\u589E\u5220\u6539\u64CD\u4F5C\uFF0CMySQL \u4E0D\u4EC5\u8981\u4FDD\u5B58\u6570\u636E\uFF0C\u8FD8\u6709\u4FDD\u5B58\u6216\u8005\u66F4\u65B0\u5BF9\u5E94\u7684\u7D22\u5F15\u6587\u4EF6\u3002</li></ul><h3 id="_33-mysql-\u7D22\u5F15\u7528\u7684\u4EC0\u4E48\u6570\u636E\u7ED3\u6784\u4E86\u89E3\u5417" tabindex="-1"><a class="header-anchor" href="#_33-mysql-\u7D22\u5F15\u7528\u7684\u4EC0\u4E48\u6570\u636E\u7ED3\u6784\u4E86\u89E3\u5417" aria-hidden="true">#</a> 33.MySQL \u7D22\u5F15\u7528\u7684\u4EC0\u4E48\u6570\u636E\u7ED3\u6784\u4E86\u89E3\u5417\uFF1F</h3><p>MySQL \u7684\u9ED8\u8BA4\u5B58\u50A8\u5F15\u64CE\u662F InnoDB\uFF0C\u5B83\u91C7\u7528\u7684\u662F B+\u6811\u7ED3\u6784\u7684\u7D22\u5F15\u3002</p><ul><li>B+\u6811\uFF1A\u53EA\u6709\u53F6\u5B50\u8282\u70B9\u624D\u4F1A\u5B58\u50A8\u6570\u636E\uFF0C\u975E\u53F6\u5B50\u8282\u70B9\u53EA\u5B58\u50A8\u952E\u503C\u3002\u53F6\u5B50\u8282\u70B9\u4E4B\u95F4\u4F7F\u7528\u53CC\u5411\u6307\u9488\u8FDE\u63A5\uFF0C\u6700\u5E95\u5C42\u7684\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u4E86\u4E00\u4E2A\u53CC\u5411\u6709\u5E8F\u94FE\u8868\u3002</li></ul><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-0a47bec7-1cf2-47d7-94e2-3cd82ce806c7.jpg" alt="B+\u6811\u7D22\u5F15"></p><p>\u5728\u8FD9\u5F20\u56FE\u91CC\uFF0C\u6709\u4E24\u4E2A\u91CD\u70B9\uFF1A</p><ul><li>\u6700\u5916\u9762\u7684\u65B9\u5757\uFF0C\u7684\u5757\u6211\u4EEC\u79F0\u4E4B\u4E3A\u4E00\u4E2A\u78C1\u76D8\u5757\uFF0C\u53EF\u4EE5\u770B\u5230\u6BCF\u4E2A\u78C1\u76D8\u5757\u5305\u542B\u51E0\u4E2A\u6570\u636E\u9879\uFF08\u7C89\u8272\u6240\u793A\uFF09\u548C\u6307\u9488\uFF08\u9EC4\u8272/\u7070\u8272\u6240\u793A\uFF09\uFF0C\u5982\u6839\u8282\u70B9\u78C1\u76D8\u5305\u542B\u6570\u636E\u9879 17 \u548C 35\uFF0C\u5305\u542B\u6307\u9488 P1\u3001P2\u3001P3\uFF0CP1 \u8868\u793A\u5C0F\u4E8E 17 \u7684\u78C1\u76D8\u5757\uFF0CP2 \u8868\u793A\u5728 17 \u548C 35 \u4E4B\u95F4\u7684\u78C1\u76D8\u5757\uFF0CP3 \u8868\u793A\u5927\u4E8E 35 \u7684\u78C1\u76D8\u5757\u3002\u771F\u5B9E\u7684\u6570\u636E\u5B58\u5728\u4E8E\u53F6\u5B50\u8282\u70B9\u5373 3\u30014\u30015\u2026\u2026\u300165\u3002\u975E\u53F6\u5B50\u8282\u70B9\u53EA\u4E0D\u5B58\u50A8\u771F\u5B9E\u7684\u6570\u636E\uFF0C\u53EA\u5B58\u50A8\u6307\u5F15\u641C\u7D22\u65B9\u5411\u7684\u6570\u636E\u9879\uFF0C\u5982 17\u300135 \u5E76\u4E0D\u771F\u5B9E\u5B58\u5728\u4E8E\u6570\u636E\u8868\u4E2D\u3002</li><li>\u53F6\u5B50\u8282\u70B9\u4E4B\u95F4\u4F7F\u7528\u53CC\u5411\u6307\u9488\u8FDE\u63A5\uFF0C\u6700\u5E95\u5C42\u7684\u53F6\u5B50\u8282\u70B9\u5F62\u6210\u4E86\u4E00\u4E2A\u53CC\u5411\u6709\u5E8F\u94FE\u8868\uFF0C\u53EF\u4EE5\u8FDB\u884C\u8303\u56F4\u67E5\u8BE2\u3002</li></ul><h3 id="_34-\u90A3\u4E00\u68F5-b-\u6811\u80FD\u5B58\u50A8\u591A\u5C11\u6761\u6570\u636E\u5462" tabindex="-1"><a class="header-anchor" href="#_34-\u90A3\u4E00\u68F5-b-\u6811\u80FD\u5B58\u50A8\u591A\u5C11\u6761\u6570\u636E\u5462" aria-hidden="true">#</a> 34.\u90A3\u4E00\u68F5 B+\u6811\u80FD\u5B58\u50A8\u591A\u5C11\u6761\u6570\u636E\u5462\uFF1F</h3><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-16f3523d-20b0-4376-908d-ac40b329768f.jpg" alt="B+\u6811\u5B58\u50A8\u6570\u636E\u6761\u6570"></p><p>\u5047\u8BBE\u7D22\u5F15\u5B57\u6BB5\u662F bigint \u7C7B\u578B\uFF0C\u957F\u5EA6\u4E3A 8 \u5B57\u8282\u3002\u6307\u9488\u5927\u5C0F\u5728 InnoDB \u6E90\u7801\u4E2D\u8BBE\u7F6E\u4E3A 6 \u5B57\u8282\uFF0C\u8FD9\u6837\u4E00\u5171 14 \u5B57\u8282\u3002\u975E\u53F6\u5B50\u8282\u70B9(\u4E00\u9875)\u53EF\u4EE5\u5B58\u50A8 16384/14=1170 \u4E2A\u8FD9\u6837\u7684 \u5355\u5143(\u952E\u503C+\u6307\u9488)\uFF0C\u4EE3\u8868\u6709 1170 \u4E2A\u6307\u9488\u3002</p><p>\u6811\u6DF1\u5EA6\u4E3A 2 \u7684\u65F6\u5019\uFF0C\u6709 1170^2 \u4E2A\u53F6\u5B50\u8282\u70B9\uFF0C\u53EF\u4EE5\u5B58\u50A8\u7684\u6570\u636E\u4E3A 1170*1170*16=<strong>21902400</strong>\u3002</p><p>\u5728\u67E5\u627E\u6570\u636E\u65F6\u4E00\u6B21\u9875\u7684\u67E5\u627E\u4EE3\u8868\u4E00\u6B21 IO\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u4E00\u5F20 2000 \u4E07\u5DE6\u53F3\u7684\u8868\uFF0C\u67E5\u8BE2\u6570\u636E\u6700\u591A\u9700\u8981\u8BBF\u95EE 3 \u6B21\u78C1\u76D8\u3002</p><p>\u6240\u4EE5\u5728 InnoDB \u4E2D B+ \u6811\u6DF1\u5EA6\u4E00\u822C\u4E3A 1-3 \u5C42\uFF0C\u5B83\u5C31\u80FD\u6EE1\u8DB3\u5343\u4E07\u7EA7\u7684\u6570\u636E\u5B58\u50A8\u3002</p><h3 id="_35-\u4E3A\u4EC0\u4E48\u8981\u7528-b-\u6811-\u800C\u4E0D\u7528\u666E\u901A\u4E8C\u53C9\u6811" tabindex="-1"><a class="header-anchor" href="#_35-\u4E3A\u4EC0\u4E48\u8981\u7528-b-\u6811-\u800C\u4E0D\u7528\u666E\u901A\u4E8C\u53C9\u6811" aria-hidden="true">#</a> 35.\u4E3A\u4EC0\u4E48\u8981\u7528 B+ \u6811\uFF0C\u800C\u4E0D\u7528\u666E\u901A\u4E8C\u53C9\u6811\uFF1F</h3><p>\u53EF\u4EE5\u4ECE\u51E0\u4E2A\u7EF4\u5EA6\u53BB\u770B\u8FD9\u4E2A\u95EE\u9898\uFF0C\u67E5\u8BE2\u662F\u5426\u591F\u5FEB\uFF0C\u6548\u7387\u662F\u5426\u7A33\u5B9A\uFF0C\u5B58\u50A8\u6570\u636E\u591A\u5C11\uFF0C\u4EE5\u53CA\u67E5\u627E\u78C1\u76D8\u6B21\u6570\u3002</p><blockquote><p><strong>\u4E3A\u4EC0\u4E48\u4E0D\u7528\u666E\u901A\u4E8C\u53C9\u6811\uFF1F</strong></p></blockquote><p>\u666E\u901A\u4E8C\u53C9\u6811\u5B58\u5728\u9000\u5316\u7684\u60C5\u51B5\uFF0C\u5982\u679C\u5B83\u9000\u5316\u6210\u94FE\u8868\uFF0C\u76F8\u5F53\u4E8E\u5168\u8868\u626B\u63CF\u3002\u5E73\u8861\u4E8C\u53C9\u6811\u76F8\u6BD4\u4E8E\u4E8C\u53C9\u67E5\u627E\u6811\u6765\u8BF4\uFF0C\u67E5\u627E\u6548\u7387\u66F4\u7A33\u5B9A\uFF0C\u603B\u4F53\u7684\u67E5\u627E\u901F\u5EA6\u4E5F\u66F4\u5FEB\u3002</p><blockquote><p><strong>\u4E3A\u4EC0\u4E48\u4E0D\u7528\u5E73\u8861\u4E8C\u53C9\u6811\u5462\uFF1F</strong></p></blockquote><p>\u8BFB\u53D6\u6570\u636E\u7684\u65F6\u5019\uFF0C\u662F\u4ECE\u78C1\u76D8\u8BFB\u5230\u5185\u5B58\u3002\u5982\u679C\u6811\u8FD9\u79CD\u6570\u636E\u7ED3\u6784\u4F5C\u4E3A\u7D22\u5F15\uFF0C\u90A3\u6BCF\u67E5\u627E\u4E00\u6B21\u6570\u636E\u5C31\u9700\u8981\u4ECE\u78C1\u76D8\u4E2D\u8BFB\u53D6\u4E00\u4E2A\u8282\u70B9\uFF0C\u4E5F\u5C31\u662F\u4E00\u4E2A\u78C1\u76D8\u5757\uFF0C\u4F46\u662F\u5E73\u8861\u4E8C\u53C9\u6811\u53EF\u662F\u6BCF\u4E2A\u8282\u70B9\u53EA\u5B58\u50A8\u4E00\u4E2A\u952E\u503C\u548C\u6570\u636E\u7684\uFF0C\u5982\u679C\u662F B+ \u6811\uFF0C\u53EF\u4EE5\u5B58\u50A8\u66F4\u591A\u7684\u8282\u70B9\u6570\u636E\uFF0C\u6811\u7684\u9AD8\u5EA6\u4E5F\u4F1A\u964D\u4F4E\uFF0C\u56E0\u6B64\u8BFB\u53D6\u78C1\u76D8\u7684\u6B21\u6570\u5C31\u964D\u4E0B\u6765\u5566\uFF0C\u67E5\u8BE2\u6548\u7387\u5C31\u5FEB\u3002</p><h3 id="_36-\u4E3A\u4EC0\u4E48\u7528-b-\u6811\u800C\u4E0D\u7528-b-\u6811\u5462" tabindex="-1"><a class="header-anchor" href="#_36-\u4E3A\u4EC0\u4E48\u7528-b-\u6811\u800C\u4E0D\u7528-b-\u6811\u5462" aria-hidden="true">#</a> 36.\u4E3A\u4EC0\u4E48\u7528 B+ \u6811\u800C\u4E0D\u7528 B \u6811\u5462\uFF1F</h3><p>B+\u76F8\u6BD4\u8F83 B \u6811\uFF0C\u6709\u8FD9\u4E9B\u4F18\u52BF\uFF1A</p><ul><li>\u5B83\u662F B Tree \u7684\u53D8\u79CD\uFF0CB Tree \u80FD\u89E3\u51B3\u7684\u95EE\u9898\uFF0C\u5B83\u90FD\u80FD\u89E3\u51B3\u3002</li></ul><p>B Tree \u89E3\u51B3\u7684\u4E24\u5927\u95EE\u9898\uFF1A\u6BCF\u4E2A\u8282\u70B9\u5B58\u50A8\u66F4\u591A\u5173\u952E\u5B57\uFF1B\u8DEF\u6570\u66F4\u591A</p><ul><li>\u626B\u5E93\u3001\u626B\u8868\u80FD\u529B\u66F4\u5F3A</li></ul><p>\u5982\u679C\u6211\u4EEC\u8981\u5BF9\u8868\u8FDB\u884C\u5168\u8868\u626B\u63CF\uFF0C\u53EA\u9700\u8981\u904D\u5386\u53F6\u5B50\u8282\u70B9\u5C31\u53EF\u4EE5 \u4E86\uFF0C\u4E0D\u9700\u8981\u904D\u5386\u6574\u68F5 B+Tree \u62FF\u5230\u6240\u6709\u7684\u6570\u636E\u3002</p><ul><li>B+Tree \u7684\u78C1\u76D8\u8BFB\u5199\u80FD\u529B\u76F8\u5BF9\u4E8E B Tree \u6765\u8BF4\u66F4\u5F3A\uFF0CIO \u6B21\u6570\u66F4\u5C11</li></ul><p>\u6839\u8282\u70B9\u548C\u679D\u8282\u70B9\u4E0D\u4FDD\u5B58\u6570\u636E\u533A\uFF0C \u6240\u4EE5\u4E00\u4E2A\u8282\u70B9\u53EF\u4EE5\u4FDD\u5B58\u66F4\u591A\u7684\u5173\u952E\u5B57\uFF0C\u4E00\u6B21\u78C1\u76D8\u52A0\u8F7D\u7684\u5173\u952E\u5B57\u66F4\u591A\uFF0CIO \u6B21\u6570\u66F4\u5C11\u3002</p><ul><li>\u6392\u5E8F\u80FD\u529B\u66F4\u5F3A</li></ul><p>\u56E0\u4E3A\u53F6\u5B50\u8282\u70B9\u4E0A\u6709\u4E0B\u4E00\u4E2A\u6570\u636E\u533A\u7684\u6307\u9488\uFF0C\u6570\u636E\u5F62\u6210\u4E86\u94FE\u8868\u3002</p><ul><li>\u6548\u7387\u66F4\u52A0\u7A33\u5B9A</li></ul><p>B+Tree \u6C38\u8FDC\u662F\u5728\u53F6\u5B50\u8282\u70B9\u62FF\u5230\u6570\u636E\uFF0C\u6240\u4EE5 IO \u6B21\u6570\u662F\u7A33\u5B9A\u7684\u3002</p><h3 id="_37-hash-\u7D22\u5F15\u548C-b-\u6811\u7D22\u5F15\u533A\u522B\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_37-hash-\u7D22\u5F15\u548C-b-\u6811\u7D22\u5F15\u533A\u522B\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 37.Hash \u7D22\u5F15\u548C B+ \u6811\u7D22\u5F15\u533A\u522B\u662F\u4EC0\u4E48\uFF1F</h3><ul><li>B+ \u6811\u53EF\u4EE5\u8FDB\u884C\u8303\u56F4\u67E5\u8BE2\uFF0CHash \u7D22\u5F15\u4E0D\u80FD\u3002</li><li>B+ \u6811\u652F\u6301\u8054\u5408\u7D22\u5F15\u7684\u6700\u5DE6\u4FA7\u539F\u5219\uFF0CHash \u7D22\u5F15\u4E0D\u652F\u6301\u3002</li><li>B+ \u6811\u652F\u6301 order by \u6392\u5E8F\uFF0CHash \u7D22\u5F15\u4E0D\u652F\u6301\u3002</li><li>Hash \u7D22\u5F15\u5728\u7B49\u503C\u67E5\u8BE2\u4E0A\u6BD4 B+ \u6811\u6548\u7387\u66F4\u9AD8\u3002</li><li>B+ \u6811\u4F7F\u7528 like \u8FDB\u884C\u6A21\u7CCA\u67E5\u8BE2\u7684\u65F6\u5019\uFF0Clike \u540E\u9762\uFF08\u6BD4\u5982 % \u5F00\u5934\uFF09\u7684\u8BDD\u53EF\u4EE5\u8D77\u5230\u4F18\u5316\u7684\u4F5C\u7528\uFF0CHash \u7D22\u5F15\u6839\u672C\u65E0\u6CD5\u8FDB\u884C\u6A21\u7CCA\u67E5\u8BE2\u3002</li></ul><h3 id="_38-\u805A\u7C07\u7D22\u5F15\u4E0E\u975E\u805A\u7C07\u7D22\u5F15\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_38-\u805A\u7C07\u7D22\u5F15\u4E0E\u975E\u805A\u7C07\u7D22\u5F15\u7684\u533A\u522B" aria-hidden="true">#</a> 38.\u805A\u7C07\u7D22\u5F15\u4E0E\u975E\u805A\u7C07\u7D22\u5F15\u7684\u533A\u522B\uFF1F</h3><p>\u9996\u5148\u7406\u89E3\u805A\u7C07\u7D22\u5F15\u4E0D\u662F\u4E00\u79CD\u65B0\u7684\u7D22\u5F15\uFF0C\u800C\u662F\u800C\u662F\u4E00\u79CD<strong>\u6570\u636E\u5B58\u50A8\u65B9\u5F0F</strong>\u3002\u805A\u7C07\u8868\u793A\u6570\u636E\u884C\u548C\u76F8\u90BB\u7684\u952E\u503C\u7D27\u51D1\u5730\u5B58\u50A8\u5728\u4E00\u8D77\u3002\u6211\u4EEC\u719F\u6089\u7684\u4E24\u79CD\u5B58\u50A8\u5F15\u64CE\u2014\u2014MyISAM \u91C7\u7528\u7684\u662F\u975E\u805A\u7C07\u7D22\u5F15\uFF0CInnoDB \u91C7\u7528\u7684\u662F\u805A\u7C07\u7D22\u5F15\u3002</p><p>\u53EF\u4EE5\u8FD9\u4E48\u8BF4\uFF1A</p><ul><li>\u7D22\u5F15\u7684\u6570\u636E\u7ED3\u6784\u662F\u6811\uFF0C\u805A\u7C07\u7D22\u5F15\u7684\u7D22\u5F15\u548C\u6570\u636E\u5B58\u50A8\u5728\u4E00\u68F5\u6811\u4E0A\uFF0C\u6811\u7684\u53F6\u5B50\u8282\u70B9\u5C31\u662F\u6570\u636E\uFF0C\u975E\u805A\u7C07\u7D22\u5F15\u7D22\u5F15\u548C\u6570\u636E\u4E0D\u5728\u4E00\u68F5\u6811\u4E0A\u3002</li></ul><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-692cced2-615a-4b70-a933-69771d53e809.jpg" alt="\u805A\u7C07\u7D22\u5F15\u548C\u975E\u805A\u7C07\u7D22\u5F15"></p><ul><li>\u4E00\u4E2A\u8868\u4E2D\u53EA\u80FD\u62E5\u6709\u4E00\u4E2A\u805A\u7C07\u7D22\u5F15\uFF0C\u800C\u975E\u805A\u7C07\u7D22\u5F15\u4E00\u4E2A\u8868\u53EF\u4EE5\u5B58\u5728\u591A\u4E2A\u3002</li><li>\u805A\u7C07\u7D22\u5F15\uFF0C\u7D22\u5F15\u4E2D\u952E\u503C\u7684\u903B\u8F91\u987A\u5E8F\u51B3\u5B9A\u4E86\u8868\u4E2D\u76F8\u5E94\u884C\u7684\u7269\u7406\u987A\u5E8F\uFF1B\u7D22\u5F15\uFF0C\u7D22\u5F15\u4E2D\u7D22\u5F15\u7684\u903B\u8F91\u987A\u5E8F\u4E0E\u78C1\u76D8\u4E0A\u884C\u7684\u7269\u7406\u5B58\u50A8\u987A\u5E8F\u4E0D\u540C\u3002</li><li>\u805A\u7C07\u7D22\u5F15\uFF1A\u7269\u7406\u5B58\u50A8\u6309\u7167\u7D22\u5F15\u6392\u5E8F\uFF1B\u975E\u805A\u96C6\u7D22\u5F15\uFF1A\u7269\u7406\u5B58\u50A8\u4E0D\u6309\u7167\u7D22\u5F15\u6392\u5E8F\uFF1B</li></ul><h3 id="_39-\u56DE\u8868\u4E86\u89E3\u5417" tabindex="-1"><a class="header-anchor" href="#_39-\u56DE\u8868\u4E86\u89E3\u5417" aria-hidden="true">#</a> 39.\u56DE\u8868\u4E86\u89E3\u5417\uFF1F</h3><p>\u5728 InnoDB \u5B58\u50A8\u5F15\u64CE\u91CC\uFF0C\u5229\u7528\u8F85\u52A9\u7D22\u5F15\u67E5\u8BE2\uFF0C\u5148\u901A\u8FC7\u8F85\u52A9\u7D22\u5F15\u627E\u5230\u4E3B\u952E\u7D22\u5F15\u7684\u952E\u503C\uFF0C\u518D\u901A\u8FC7\u4E3B\u952E\u503C\u67E5\u51FA\u4E3B\u952E\u7D22\u5F15\u91CC\u9762\u6CA1\u6709\u7B26\u5408\u8981\u6C42\u7684\u6570\u636E\uFF0C\u5B83\u6BD4\u57FA\u4E8E\u4E3B\u952E\u7D22\u5F15\u7684\u67E5\u8BE2\u591A\u626B\u63CF\u4E86\u4E00\u68F5\u7D22\u5F15\u6811\uFF0C\u8FD9\u4E2A\u8FC7\u7A0B\u5C31\u53EB\u56DE\u8868\u3002</p><p>\u4F8B\u5982:<code>select \\* from user where name = \u2018\u5F20\u4E09\u2019;</code></p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-7d69e289-dc05-47e1-9308-20a8278ebf2e.jpg" alt="InnoDB \u56DE\u8868"></p><h3 id="_40-\u8986\u76D6\u7D22\u5F15\u4E86\u89E3\u5417" tabindex="-1"><a class="header-anchor" href="#_40-\u8986\u76D6\u7D22\u5F15\u4E86\u89E3\u5417" aria-hidden="true">#</a> 40.\u8986\u76D6\u7D22\u5F15\u4E86\u89E3\u5417\uFF1F</h3><p>\u5728\u8F85\u52A9\u7D22\u5F15\u91CC\u9762\uFF0C\u4E0D\u7BA1\u662F\u5355\u5217\u7D22\u5F15\u8FD8\u662F\u8054\u5408\u7D22\u5F15\uFF0C\u5982\u679C select \u7684\u6570\u636E\u5217\u53EA\u7528\u8F85\u52A9\u7D22\u5F15\u4E2D\u5C31\u80FD\u591F\u53D6\u5F97\uFF0C\u4E0D\u7528\u53BB\u67E5\u4E3B\u952E\u7D22\u5F15\uFF0C\u8FD9\u65F6\u5019\u4F7F\u7528\u7684\u7D22\u5F15\u5C31\u53EB\u505A\u8986\u76D6\u7D22\u5F15\uFF0C\u907F\u514D\u4E86\u56DE\u8868\u3002</p><p>\u6BD4\u5982\uFF0C<code>select name from user where name = \u2018\u5F20\u4E09\u2019;</code></p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-69e33c61-34bc-4f4b-912b-ca7beb9d5c7c.jpg" alt="\u8986\u76D6\u7D22\u5F15"></p><h3 id="_41-\u4EC0\u4E48\u662F\u6700\u5DE6\u524D\u7F00\u539F\u5219-\u6700\u5DE6\u5339\u914D\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#_41-\u4EC0\u4E48\u662F\u6700\u5DE6\u524D\u7F00\u539F\u5219-\u6700\u5DE6\u5339\u914D\u539F\u5219" aria-hidden="true">#</a> 41.\u4EC0\u4E48\u662F\u6700\u5DE6\u524D\u7F00\u539F\u5219/\u6700\u5DE6\u5339\u914D\u539F\u5219\uFF1F</h3><p>\u6CE8\u610F\uFF1A\u6700\u5DE6\u524D\u7F00\u539F\u5219\u3001\u6700\u5DE6\u5339\u914D\u539F\u5219\u3001\u6700\u5DE6\u524D\u7F00\u5339\u914D\u539F\u5219\u8FD9\u4E09\u4E2A\u90FD\u662F\u4E00\u4E2A\u6982\u5FF5\u3002</p><p><strong>\u6700\u5DE6\u5339\u914D\u539F\u5219</strong>\uFF1A\u5728 InnoDB \u7684\u8054\u5408\u7D22\u5F15\u4E2D\uFF0C\u67E5\u8BE2\u7684\u65F6\u5019\u53EA\u6709\u5339\u914D\u4E86\u524D\u4E00\u4E2A/\u5DE6\u8FB9\u7684\u503C\u4E4B\u540E\uFF0C\u624D\u80FD\u5339\u914D\u4E0B\u4E00\u4E2A\u3002</p><p>\u6839\u636E\u6700\u5DE6\u5339\u914D\u539F\u5219\uFF0C\u6211\u4EEC\u521B\u5EFA\u4E86\u4E00\u4E2A\u7EC4\u5408\u7D22\u5F15\uFF0C\u5982 (a1,a2,a3)\uFF0C\u76F8\u5F53\u4E8E\u521B\u5EFA\u4E86\uFF08a1\uFF09\u3001(a1,a2)\u548C (a1,a2,a3) \u4E09\u4E2A\u7D22\u5F15\u3002</p><p>\u4E3A\u4EC0\u4E48\u4E0D\u4ECE\u6700\u5DE6\u5F00\u59CB\u67E5\uFF0C\u5C31\u65E0\u6CD5\u5339\u914D\u5462\uFF1F</p><p>\u6BD4\u5982\u6709\u4E00\u4E2A user \u8868\uFF0C\u6211\u4EEC\u7ED9 name \u548C age \u5EFA\u7ACB\u4E86\u4E00\u4E2A\u7EC4\u5408\u7D22\u5F15\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ALTER TABLE user add INDEX comidx_name_phone (name,age);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7EC4\u5408\u7D22\u5F15\u5728 B+Tree \u4E2D\u662F\u590D\u5408\u7684\u6570\u636E\u7ED3\u6784\uFF0C\u5B83\u662F\u6309\u7167\u4ECE\u5DE6\u5230\u53F3\u7684\u987A\u5E8F\u6765\u5EFA\u7ACB\u641C\u7D22\u6811\u7684 (name \u5728\u5DE6\u8FB9\uFF0Cage \u5728\u53F3\u8FB9)\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e348203c-f00a-42a4-a745-b219d98ea435.jpg" alt="\u7EC4\u5408\u7D22\u5F15"></p><p>\u4ECE\u8FD9\u5F20\u56FE\u53EF\u4EE5\u770B\u51FA\u6765\uFF0Cname \u662F\u6709\u5E8F\u7684\uFF0Cage \u662F\u65E0\u5E8F\u7684\u3002\u5F53 name \u76F8\u7B49\u7684\u65F6\u5019\uFF0C age \u624D\u662F\u6709\u5E8F\u7684\u3002</p><p>\u8FD9\u4E2A\u65F6\u5019\u6211\u4EEC\u4F7F\u7528 <code>where name= \u2018\u5F20\u4E09\u2018 and age = \u201820 \u2018</code>\u53BB\u67E5\u8BE2\u6570\u636E\u7684\u65F6\u5019\uFF0C B+Tree \u4F1A\u4F18\u5148\u6BD4\u8F83 name \u6765\u786E\u5B9A\u4E0B\u4E00\u6B65\u5E94\u8BE5\u641C\u7D22\u7684\u65B9\u5411\uFF0C\u5F80\u5DE6\u8FD8\u662F\u5F80\u53F3\u3002\u5982\u679C name \u76F8\u540C\u7684\u65F6\u5019\u518D\u6BD4\u8F83 age\u3002\u4F46\u662F\u5982\u679C\u67E5\u8BE2\u6761\u4EF6\u6CA1\u6709 name\uFF0C\u5C31\u4E0D\u77E5\u9053\u4E0B\u4E00\u6B65\u5E94\u8BE5\u67E5\u54EA\u4E2A \u8282\u70B9\uFF0C\u56E0\u4E3A\u5EFA\u7ACB\u641C\u7D22\u6811\u7684\u65F6\u5019 name \u662F\u7B2C\u4E00\u4E2A\u6BD4\u8F83\u56E0\u5B50\uFF0C\u6240\u4EE5\u5C31\u6CA1\u7528\u4E0A\u7D22\u5F15\u3002</p><h3 id="_42-\u4EC0\u4E48\u662F\u7D22\u5F15\u4E0B\u63A8\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#_42-\u4EC0\u4E48\u662F\u7D22\u5F15\u4E0B\u63A8\u4F18\u5316" aria-hidden="true">#</a> 42.\u4EC0\u4E48\u662F\u7D22\u5F15\u4E0B\u63A8\u4F18\u5316\uFF1F</h3><p>\u7D22\u5F15\u6761\u4EF6\u4E0B\u63A8\u4F18\u5316<code>\uFF08Index Condition Pushdown (ICP) \uFF09</code>\u662F MySQL5.6 \u6DFB\u52A0\u7684\uFF0C\u7528\u4E8E\u4F18\u5316\u6570\u636E\u67E5\u8BE2\u3002</p><ul><li>\u4E0D\u4F7F\u7528\u7D22\u5F15\u6761\u4EF6\u4E0B\u63A8\u4F18\u5316\u65F6\u5B58\u50A8\u5F15\u64CE\u901A\u8FC7\u7D22\u5F15\u68C0\u7D22\u5230\u6570\u636E\uFF0C\u7136\u540E\u8FD4\u56DE\u7ED9 MySQL Server\uFF0CMySQL Server \u8FDB\u884C\u8FC7\u6EE4\u6761\u4EF6\u7684\u5224\u65AD\u3002</li><li>\u5F53\u4F7F\u7528\u7D22\u5F15\u6761\u4EF6\u4E0B\u63A8\u4F18\u5316\u65F6\uFF0C\u5982\u679C\u5B58\u5728\u67D0\u4E9B\u88AB\u7D22\u5F15\u7684\u5217\u7684\u5224\u65AD\u6761\u4EF6\u65F6\uFF0CMySQL Server \u5C06\u8FD9\u4E00\u90E8\u5206\u5224\u65AD\u6761\u4EF6<strong>\u4E0B\u63A8</strong>\u7ED9\u5B58\u50A8\u5F15\u64CE\uFF0C\u7136\u540E\u7531\u5B58\u50A8\u5F15\u64CE\u901A\u8FC7\u5224\u65AD\u7D22\u5F15\u662F\u5426\u7B26\u5408 MySQL Server \u4F20\u9012\u7684\u6761\u4EF6\uFF0C\u53EA\u6709\u5F53\u7D22\u5F15\u7B26\u5408\u6761\u4EF6\u65F6\u624D\u4F1A\u5C06\u6570\u636E\u68C0\u7D22\u51FA\u6765\u8FD4\u56DE\u7ED9 MySQL \u670D\u52A1\u5668\u3002</li></ul><p>\u4F8B\u5982\u4E00\u5F20\u8868\uFF0C\u5EFA\u4E86\u4E00\u4E2A\u8054\u5408\u7D22\u5F15\uFF08name, age\uFF09\uFF0C\u67E5\u8BE2\u8BED\u53E5\uFF1A<code>select * from t_user where name like &#39;\u5F20%&#39; and age=10;</code>\uFF0C\u7531\u4E8E<code>name</code>\u4F7F\u7528\u4E86\u8303\u56F4\u67E5\u8BE2\uFF0C\u6839\u636E\u6700\u5DE6\u5339\u914D\u539F\u5219\uFF1A</p><p>\u4E0D\u4F7F\u7528 ICP\uFF0C\u5F15\u64CE\u5C42\u67E5\u627E\u5230<code>name like &#39;\u5F20%&#39;</code>\u7684\u6570\u636E\uFF0C\u518D\u7531 Server \u5C42\u53BB\u8FC7\u6EE4<code>age=10</code>\u8FD9\u4E2A\u6761\u4EF6\uFF0C\u8FD9\u6837\u4E00\u6765\uFF0C\u5C31\u56DE\u8868\u4E86\u4E24\u6B21\uFF0C\u6D6A\u8D39\u4E86\u8054\u5408\u7D22\u5F15\u7684\u53E6\u5916\u4E00\u4E2A\u5B57\u6BB5<code>age</code>\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-c58f59e0-850b-4dfd-8129-2dfc51cf4768.jpg" alt="\u6CA1\u6709\u4F7F\u7528 ICP"></p><p>\u4F46\u662F\uFF0C\u4F7F\u7528\u4E86\u7D22\u5F15\u4E0B\u63A8\u4F18\u5316\uFF0C\u628A where \u7684\u6761\u4EF6\u653E\u5230\u4E86\u5F15\u64CE\u5C42\u6267\u884C\uFF0C\u76F4\u63A5\u6839\u636E<code>name like &#39;\u5F20%&#39; and age=10</code>\u7684\u6761\u4EF6\u8FDB\u884C\u8FC7\u6EE4\uFF0C\u51CF\u5C11\u4E86\u56DE\u8868\u7684\u6B21\u6570\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-a8525cf3-2d16-49a9-a7da-a19762ed16df.jpg" alt="\u4F7F\u7528 ICP"></p><p>\u7D22\u5F15\u6761\u4EF6\u4E0B\u63A8\u4F18\u5316\u53EF\u4EE5\u51CF\u5C11\u5B58\u50A8\u5F15\u64CE\u67E5\u8BE2\u57FA\u7840\u8868\u7684\u6B21\u6570\uFF0C\u4E5F\u53EF\u4EE5\u51CF\u5C11 MySQL \u670D\u52A1\u5668\u4ECE\u5B58\u50A8\u5F15\u64CE\u63A5\u6536\u6570\u636E\u7684\u6B21\u6570\u3002</p><h2 id="\u9501" tabindex="-1"><a class="header-anchor" href="#\u9501" aria-hidden="true">#</a> \u9501</h2><h3 id="_43-mysql-\u4E2D\u6709\u54EA\u51E0\u79CD\u9501-\u5217\u4E3E\u4E00\u4E0B" tabindex="-1"><a class="header-anchor" href="#_43-mysql-\u4E2D\u6709\u54EA\u51E0\u79CD\u9501-\u5217\u4E3E\u4E00\u4E0B" aria-hidden="true">#</a> 43.MySQL \u4E2D\u6709\u54EA\u51E0\u79CD\u9501\uFF0C\u5217\u4E3E\u4E00\u4E0B\uFF1F</h3><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-a07e4525-ccc1-4287-aec5-ebf3f277857c.jpg" alt="MySQL \u4E2D\u7684\u9501"></p><p>\u5982\u679C\u6309\u9501\u7C92\u5EA6\u5212\u5206\uFF0C\u6709\u4EE5\u4E0B 3 \u79CD\uFF1A</p><ul><li>\u8868\u9501\uFF1A\u5F00\u9500\u5C0F\uFF0C\u52A0\u9501\u5FEB\uFF1B\u9501\u5B9A\u529B\u5EA6\u5927\uFF0C\u53D1\u751F\u9501\u51B2\u7A81\u6982\u7387\u9AD8\uFF0C\u5E76\u53D1\u5EA6\u6700\u4F4E;\u4E0D\u4F1A\u51FA\u73B0\u6B7B\u9501\u3002</li><li>\u884C\u9501\uFF1A\u5F00\u9500\u5927\uFF0C\u52A0\u9501\u6162\uFF1B\u4F1A\u51FA\u73B0\u6B7B\u9501\uFF1B\u9501\u5B9A\u7C92\u5EA6\u5C0F\uFF0C\u53D1\u751F\u9501\u51B2\u7A81\u7684\u6982\u7387\u4F4E\uFF0C\u5E76\u53D1\u5EA6\u9AD8\u3002</li><li>\u9875\u9501\uFF1A\u5F00\u9500\u548C\u52A0\u9501\u901F\u5EA6\u4ECB\u4E8E\u8868\u9501\u548C\u884C\u9501\u4E4B\u95F4\uFF1B\u4F1A\u51FA\u73B0\u6B7B\u9501\uFF1B\u9501\u5B9A\u7C92\u5EA6\u4ECB\u4E8E\u8868\u9501\u548C\u884C\u9501\u4E4B\u95F4\uFF0C\u5E76\u53D1\u5EA6\u4E00\u822C</li></ul><p>\u5982\u679C\u6309\u7167\u517C\u5BB9\u6027\uFF0C\u6709\u4E24\u79CD\uFF0C</p><ul><li>\u5171\u4EAB\u9501\uFF08S Lock\uFF09,\u4E5F\u53EB\u8BFB\u9501\uFF08read lock\uFF09\uFF0C\u76F8\u4E92\u4E0D\u963B\u585E\u3002</li><li>\u6392\u4ED6\u9501\uFF08X Lock\uFF09\uFF0C\u4E5F\u53EB\u5199\u9501\uFF08write lock\uFF09\uFF0C\u6392\u5B83\u9501\u662F\u963B\u585E\u7684\uFF0C\u5728\u4E00\u5B9A\u65F6\u95F4\u5185\uFF0C\u53EA\u6709\u4E00\u4E2A\u8BF7\u6C42\u80FD\u6267\u884C\u5199\u5165\uFF0C\u5E76\u963B\u6B62\u5176\u5B83\u9501\u8BFB\u53D6\u6B63\u5728\u5199\u5165\u7684\u6570\u636E\u3002</li></ul><h3 id="_44-\u8BF4\u8BF4-innodb-\u91CC\u7684\u884C\u9501\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_44-\u8BF4\u8BF4-innodb-\u91CC\u7684\u884C\u9501\u5B9E\u73B0" aria-hidden="true">#</a> 44.\u8BF4\u8BF4 InnoDB \u91CC\u7684\u884C\u9501\u5B9E\u73B0?</h3><p>\u6211\u4EEC\u62FF\u8FD9\u4E48\u4E00\u4E2A\u7528\u6237\u8868\u6765\u8868\u793A\u884C\u7EA7\u9501\uFF0C\u5176\u4E2D\u63D2\u5165\u4E86 4 \u884C\u6570\u636E\uFF0C\u4E3B\u952E\u503C\u5206\u522B\u662F 1,6,8,12\uFF0C\u73B0\u5728\u7B80\u5316\u5B83\u7684\u805A\u7C07\u7D22\u5F15\u7ED3\u6784\uFF0C\u53EA\u4FDD\u7559\u6570\u636E\u8BB0\u5F55\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-013afdbe-889b-4ed0-ae68-c8c9882570d9.jpg" alt="\u7B80\u5316\u7684\u4E3B\u952E\u7D22\u5F15"></p><p>InnoDB \u7684\u884C\u9501\u7684\u4E3B\u8981\u5B9E\u73B0\u5982\u4E0B\uFF1A</p><ul><li><strong>Record Lock \u8BB0\u5F55\u9501</strong></li></ul><p>\u8BB0\u5F55\u9501\u5C31\u662F\u76F4\u63A5\u9501\u5B9A\u67D0\u884C\u8BB0\u5F55\u3002\u5F53\u6211\u4EEC\u4F7F\u7528\u552F\u4E00\u6027\u7684\u7D22\u5F15(\u5305\u62EC\u552F\u4E00\u7D22\u5F15\u548C\u805A\u7C07\u7D22\u5F15)\u8FDB\u884C\u7B49\u503C\u67E5\u8BE2\u4E14\u7CBE\u51C6\u5339\u914D\u5230\u4E00\u6761\u8BB0\u5F55\u65F6\uFF0C\u6B64\u65F6\u5C31\u4F1A\u76F4\u63A5\u5C06\u8FD9\u6761\u8BB0\u5F55\u9501\u5B9A\u3002\u4F8B\u5982<code>select * from t where id =6 for update;</code>\u5C31\u4F1A\u5C06<code>id=6</code>\u7684\u8BB0\u5F55\u9501\u5B9A\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-8989ac27-e442-4c14-81ad-6bc133d78bfd.jpg" alt="\u8BB0\u5F55\u9501"></p><ul><li><strong>Gap Lock \u95F4\u9699\u9501</strong></li></ul><p>\u95F4\u9699\u9501(Gap Locks) \u7684\u95F4\u9699\u6307\u7684\u662F\u4E24\u4E2A\u8BB0\u5F55\u4E4B\u95F4\u903B\u8F91\u4E0A\u5C1A\u672A\u586B\u5165\u6570\u636E\u7684\u90E8\u5206,\u662F\u4E00\u4E2A<strong>\u5DE6\u5F00\u53F3\u5F00\u7A7A\u95F4</strong>\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-d60f3a42-4b0f-4612-b7ad-65191fecb852.jpg" alt="\u95F4\u9699\u9501"></p><p>\u95F4\u9699\u9501\u5C31\u662F\u9501\u5B9A\u67D0\u4E9B\u95F4\u9699\u533A\u95F4\u7684\u3002\u5F53\u6211\u4EEC\u4F7F\u7528\u7528\u7B49\u503C\u67E5\u8BE2\u6216\u8005\u8303\u56F4\u67E5\u8BE2\uFF0C\u5E76\u4E14\u6CA1\u6709\u547D\u4E2D\u4EFB\u4F55\u4E00\u4E2A<code>record</code>\uFF0C\u6B64\u65F6\u5C31\u4F1A\u5C06\u5BF9\u5E94\u7684\u95F4\u9699\u533A\u95F4\u9501\u5B9A\u3002\u4F8B\u5982<code>select * from t where id =3 for update;</code>\u6216\u8005<code>select * from t where id &gt; 1 and id &lt; 6 for update;</code>\u5C31\u4F1A\u5C06(1,6)\u533A\u95F4\u9501\u5B9A\u3002</p><ul><li><strong>Next-key Lock \u4E34\u952E\u9501</strong></li></ul><p>\u4E34\u952E\u6307\u7684\u662F\u95F4\u9699\u52A0\u4E0A\u5B83\u53F3\u8FB9\u7684\u8BB0\u5F55\u7EC4\u6210\u7684<strong>\u5DE6\u5F00\u53F3\u95ED\u533A\u95F4</strong>\u3002\u6BD4\u5982\u4E0A\u8FF0\u7684(1,6]\u3001(6,8]\u7B49\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-ae8a21cc-8b52-467d-9173-4e01b24e04b9.jpg" alt="\u4E34\u952E\u9501"></p><p>\u4E34\u952E\u9501\u5C31\u662F\u8BB0\u5F55\u9501(Record Locks)\u548C\u95F4\u9699\u9501(Gap Locks)\u7684\u7ED3\u5408\uFF0C\u5373\u9664\u4E86\u9501\u4F4F\u8BB0\u5F55\u672C\u8EAB\uFF0C\u8FD8\u8981\u518D\u9501\u4F4F\u7D22\u5F15\u4E4B\u95F4\u7684\u95F4\u9699\u3002\u5F53\u6211\u4EEC\u4F7F\u7528\u8303\u56F4\u67E5\u8BE2\uFF0C\u5E76\u4E14\u547D\u4E2D\u4E86\u90E8\u5206<code>record</code>\u8BB0\u5F55\uFF0C\u6B64\u65F6\u9501\u4F4F\u7684\u5C31\u662F\u4E34\u952E\u533A\u95F4\u3002\u6CE8\u610F\uFF0C\u4E34\u952E\u9501\u9501\u4F4F\u7684\u533A\u95F4\u4F1A\u5305\u542B\u6700\u540E\u4E00\u4E2A record \u7684\u53F3\u8FB9\u7684\u4E34\u952E\u533A\u95F4\u3002\u4F8B\u5982<code>select * from t where id &gt; 5 and id &lt;= 7 for update;</code>\u4F1A\u9501\u4F4F(4,7]\u3001(7,+\u221E)\u3002mysql \u9ED8\u8BA4\u884C\u9501\u7C7B\u578B\u5C31\u662F<code>\u4E34\u952E\u9501(Next-Key Locks)</code>\u3002\u5F53\u4F7F\u7528\u552F\u4E00\u6027\u7D22\u5F15\uFF0C\u7B49\u503C\u67E5\u8BE2\u5339\u914D\u5230\u4E00\u6761\u8BB0\u5F55\u7684\u65F6\u5019\uFF0C\u4E34\u952E\u9501(Next-Key Locks)\u4F1A\u9000\u5316\u6210\u8BB0\u5F55\u9501\uFF1B\u6CA1\u6709\u5339\u914D\u5230\u4EFB\u4F55\u8BB0\u5F55\u7684\u65F6\u5019\uFF0C\u9000\u5316\u6210\u95F4\u9699\u9501\u3002</p><blockquote><p><code>\u95F4\u9699\u9501(Gap Locks)</code>\u548C<code>\u4E34\u952E\u9501(Next-Key Locks)</code>\u90FD\u662F\u7528\u6765\u89E3\u51B3\u5E7B\u8BFB\u95EE\u9898\u7684\uFF0C\u5728<code>\u5DF2\u63D0\u4EA4\u8BFB\uFF08READ COMMITTED\uFF09</code>\u9694\u79BB\u7EA7\u522B\u4E0B\uFF0C<code>\u95F4\u9699\u9501(Gap Locks)</code>\u548C<code>\u4E34\u952E\u9501(Next-Key Locks)</code>\u90FD\u4F1A\u5931\u6548\uFF01</p></blockquote><p>\u4E0A\u9762\u662F\u884C\u9501\u7684\u4E09\u79CD\u5B9E\u73B0\u7B97\u6CD5\uFF0C\u9664\u6B64\u4E4B\u5916\uFF0C\u5728\u884C\u4E0A\u8FD8\u5B58\u5728\u63D2\u5165\u610F\u5411\u9501\u3002</p><ul><li><strong>Insert Intention Lock \u63D2\u5165\u610F\u5411\u9501</strong></li></ul><p>\u4E00\u4E2A\u4E8B\u52A1\u5728\u63D2\u5165\u4E00\u6761\u8BB0\u5F55\u65F6\u9700\u8981\u5224\u65AD\u4E00\u4E0B\u63D2\u5165\u4F4D\u7F6E\u662F\u4E0D\u662F\u88AB\u522B\u7684\u4E8B\u52A1\u52A0\u4E86\u610F\u5411\u9501 \uFF0C\u5982\u679C\u6709\u7684\u8BDD\uFF0C\u63D2\u5165\u64CD\u4F5C\u9700\u8981\u7B49\u5F85\uFF0C\u76F4\u5230\u62E5\u6709 gap \u9501 \u7684\u90A3\u4E2A\u4E8B\u52A1\u63D0\u4EA4\u3002\u4F46\u662F\u4E8B\u52A1\u5728\u7B49\u5F85\u7684\u65F6\u5019\u4E5F\u9700\u8981\u5728\u5185\u5B58\u4E2D\u751F\u6210\u4E00\u4E2A \u9501\u7ED3\u6784 \uFF0C\u8868\u660E\u6709\u4E8B\u52A1\u60F3\u5728\u67D0\u4E2A \u95F4\u9699 \u4E2D\u63D2\u5165\u65B0\u8BB0\u5F55\uFF0C\u4F46\u662F\u73B0\u5728\u5728\u7B49\u5F85\u3002\u8FD9\u79CD\u7C7B\u578B\u7684\u9501\u547D\u540D\u4E3A Insert Intention Locks \uFF0C\u4E5F\u5C31\u662F\u63D2\u5165\u610F\u5411\u9501 \u3002</p><p>\u5047\u5982\u6211\u4EEC\u6709\u4E2A T1 \u4E8B\u52A1\uFF0C\u7ED9(1,6)\u533A\u95F4\u52A0\u4E0A\u4E86\u610F\u5411\u9501\uFF0C\u73B0\u5728\u6709\u4E2A T2 \u4E8B\u52A1\uFF0C\u8981\u63D2\u5165\u4E00\u4E2A\u6570\u636E\uFF0Cid \u4E3A 4\uFF0C\u5B83\u4F1A\u83B7\u53D6\u4E00\u4E2A\uFF081,6\uFF09\u533A\u95F4\u7684\u63D2\u5165\u610F\u5411\u9501\uFF0C\u53C8\u6709\u6709\u4E2A T3 \u4E8B\u52A1\uFF0C\u60F3\u8981\u63D2\u5165\u4E00\u4E2A\u6570\u636E\uFF0Cid \u4E3A 3\uFF0C\u5B83\u4E5F\u4F1A\u83B7\u53D6\u4E00\u4E2A\uFF081,6\uFF09\u533A\u95F4\u7684\u63D2\u5165\u610F\u5411\u9501\uFF0C\u4F46\u662F\uFF0C\u8FD9\u4E24\u4E2A\u63D2\u5165\u610F\u5411\u9501\u9501\u4E0D\u4F1A\u4E92\u65A5\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-751425cb-daba-4da1-bab6-f843254cad3d.jpg" alt="\u63D2\u5165\u610F\u5411\u9501"></p><h3 id="_45-\u610F\u5411\u9501\u662F\u4EC0\u4E48\u77E5\u9053\u5417" tabindex="-1"><a class="header-anchor" href="#_45-\u610F\u5411\u9501\u662F\u4EC0\u4E48\u77E5\u9053\u5417" aria-hidden="true">#</a> 45.\u610F\u5411\u9501\u662F\u4EC0\u4E48\u77E5\u9053\u5417\uFF1F</h3><p>\u610F\u5411\u9501\u662F\u4E00\u4E2A\u8868\u7EA7\u9501\uFF0C\u4E0D\u8981\u548C\u63D2\u5165\u610F\u5411\u9501\u641E\u6DF7\u3002</p><p>\u610F\u5411\u9501\u7684\u51FA\u73B0\u662F\u4E3A\u4E86\u652F\u6301 InnoDB \u7684\u591A\u7C92\u5EA6\u9501\uFF0C\u5B83\u89E3\u51B3\u7684\u662F\u8868\u9501\u548C\u884C\u9501\u5171\u5B58\u7684\u95EE\u9898\u3002</p><p>\u5F53\u6211\u4EEC\u9700\u8981\u7ED9\u4E00\u4E2A\u8868\u52A0\u8868\u9501\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u9700\u8981\u6839\u636E\u53BB\u5224\u65AD\u8868\u4E2D\u6709\u6CA1\u6709\u6570\u636E\u884C\u88AB\u9501\u5B9A\uFF0C\u4EE5\u786E\u5B9A\u662F\u5426\u80FD\u52A0\u6210\u529F\u3002</p><p>\u5047\u5982\u6CA1\u6709\u610F\u5411\u9501\uFF0C\u90A3\u4E48\u6211\u4EEC\u5C31\u5F97\u904D\u5386\u8868\u4E2D\u6240\u6709\u6570\u636E\u884C\u6765\u5224\u65AD\u6709\u6CA1\u6709\u884C\u9501\uFF1B</p><p>\u6709\u4E86\u610F\u5411\u9501\u8FD9\u4E2A\u8868\u7EA7\u9501\u4E4B\u540E\uFF0C\u5219\u6211\u4EEC\u76F4\u63A5\u5224\u65AD\u4E00\u6B21\u5C31\u77E5\u9053\u8868\u4E2D\u662F\u5426\u6709\u6570\u636E\u884C\u88AB\u9501\u5B9A\u4E86\u3002</p><p>\u6709\u4E86\u610F\u5411\u9501\u4E4B\u540E\uFF0C\u8981\u6267\u884C\u7684\u4E8B\u52A1 A \u5728\u7533\u8BF7\u884C\u9501\uFF08\u5199\u9501\uFF09\u4E4B\u524D\uFF0C\u6570\u636E\u5E93\u4F1A\u81EA\u52A8\u5148\u7ED9\u4E8B\u52A1 A \u7533\u8BF7\u8868\u7684\u610F\u5411\u6392\u4ED6\u9501\u3002\u5F53\u4E8B\u52A1 B \u53BB\u7533\u8BF7\u8868\u7684\u4E92\u65A5\u9501\u65F6\u5C31\u4F1A\u5931\u8D25\uFF0C\u56E0\u4E3A\u8868\u4E0A\u6709\u610F\u5411\u6392\u4ED6\u9501\u4E4B\u540E\u4E8B\u52A1 B \u7533\u8BF7\u8868\u7684\u4E92\u65A5\u9501\u65F6\u4F1A\u88AB\u963B\u585E\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-31f7f49c-1e5a-4d42-b8b3-e022b3ba82ae.jpg" alt="\u610F\u5411\u9501"></p><h3 id="_46-mysql-\u7684\u4E50\u89C2\u9501\u548C\u60B2\u89C2\u9501\u4E86\u89E3\u5417" tabindex="-1"><a class="header-anchor" href="#_46-mysql-\u7684\u4E50\u89C2\u9501\u548C\u60B2\u89C2\u9501\u4E86\u89E3\u5417" aria-hidden="true">#</a> 46.MySQL \u7684\u4E50\u89C2\u9501\u548C\u60B2\u89C2\u9501\u4E86\u89E3\u5417\uFF1F</h3><ul><li><strong>\u60B2\u89C2\u9501</strong>\uFF08Pessimistic Concurrency Control\uFF09\uFF1A</li></ul><p>\u60B2\u89C2\u9501\u8BA4\u4E3A\u88AB\u5B83\u4FDD\u62A4\u7684\u6570\u636E\u662F\u6781\u5176\u4E0D\u5B89\u5168\u7684\uFF0C\u6BCF\u65F6\u6BCF\u523B\u90FD\u6709\u53EF\u80FD\u88AB\u6539\u52A8\uFF0C\u4E00\u4E2A\u4E8B\u52A1\u62FF\u5230\u60B2\u89C2\u9501\u540E\uFF0C\u5176\u4ED6\u4EFB\u4F55\u4E8B\u52A1\u90FD\u4E0D\u80FD\u5BF9\u8BE5\u6570\u636E\u8FDB\u884C\u4FEE\u6539\uFF0C\u53EA\u80FD\u7B49\u5F85\u9501\u88AB\u91CA\u653E\u624D\u53EF\u4EE5\u6267\u884C\u3002</p><p>\u6570\u636E\u5E93\u4E2D\u7684\u884C\u9501\uFF0C\u8868\u9501\uFF0C\u8BFB\u9501\uFF0C\u5199\u9501\u5747\u4E3A\u60B2\u89C2\u9501\u3002</p><ul><li><strong>\u4E50\u89C2\u9501\uFF08Optimistic Concurrency Control\uFF09</strong></li></ul><p>\u4E50\u89C2\u9501\u8BA4\u4E3A\u6570\u636E\u7684\u53D8\u52A8\u4E0D\u4F1A\u592A\u9891\u7E41\u3002</p><p>\u4E50\u89C2\u9501\u901A\u5E38\u662F\u901A\u8FC7\u5728\u8868\u4E2D\u589E\u52A0\u4E00\u4E2A\u7248\u672C(version)\u6216\u65F6\u95F4\u6233(timestamp)\u6765\u5B9E\u73B0\uFF0C\u5176\u4E2D\uFF0C\u7248\u672C\u6700\u4E3A\u5E38\u7528\u3002</p><p>\u4E8B\u52A1\u5728\u4ECE\u6570\u636E\u5E93\u4E2D\u53D6\u6570\u636E\u65F6\uFF0C\u4F1A\u5C06\u8BE5\u6570\u636E\u7684\u7248\u672C\u4E5F\u53D6\u51FA\u6765(v1)\uFF0C\u5F53\u4E8B\u52A1\u5BF9\u6570\u636E\u53D8\u52A8\u5B8C\u6BD5\u60F3\u8981\u5C06\u5176\u66F4\u65B0\u5230\u8868\u4E2D\u65F6\uFF0C\u4F1A\u5C06\u4E4B\u524D\u53D6\u51FA\u7684\u7248\u672C v1 \u4E0E\u6570\u636E\u4E2D\u6700\u65B0\u7684\u7248\u672C v2 \u76F8\u5BF9\u6BD4\uFF0C\u5982\u679C v1=v2\uFF0C\u90A3\u4E48\u8BF4\u660E\u5728\u6570\u636E\u53D8\u52A8\u671F\u95F4\uFF0C\u6CA1\u6709\u5176\u4ED6\u4E8B\u52A1\u5BF9\u6570\u636E\u8FDB\u884C\u4FEE\u6539\uFF0C\u6B64\u65F6\uFF0C\u5C31\u5141\u8BB8\u4E8B\u52A1\u5BF9\u8868\u4E2D\u7684\u6570\u636E\u8FDB\u884C\u4FEE\u6539\uFF0C\u5E76\u4E14\u4FEE\u6539\u65F6 version \u4F1A\u52A0 1\uFF0C\u4EE5\u6B64\u6765\u8868\u660E\u6570\u636E\u5DF2\u88AB\u53D8\u52A8\u3002</p><p>\u5982\u679C\uFF0Cv1 \u4E0D\u7B49\u4E8E v2\uFF0C\u90A3\u4E48\u8BF4\u660E\u6570\u636E\u53D8\u52A8\u671F\u95F4\uFF0C\u6570\u636E\u88AB\u5176\u4ED6\u4E8B\u52A1\u6539\u52A8\u4E86\uFF0C\u6B64\u65F6\u4E0D\u5141\u8BB8\u6570\u636E\u66F4\u65B0\u5230\u8868\u4E2D\uFF0C\u4E00\u822C\u7684\u5904\u7406\u529E\u6CD5\u662F\u901A\u77E5\u7528\u6237\u8BA9\u5176\u91CD\u65B0\u64CD\u4F5C\u3002\u4E0D\u540C\u4E8E\u60B2\u89C2\u9501\uFF0C\u4E50\u89C2\u9501\u901A\u5E38\u662F\u7531\u5F00\u53D1\u8005\u5B9E\u73B0\u7684\u3002</p><h3 id="_47-mysql-\u9047\u5230\u8FC7\u6B7B\u9501\u95EE\u9898\u5417-\u4F60\u662F\u5982\u4F55\u89E3\u51B3\u7684" tabindex="-1"><a class="header-anchor" href="#_47-mysql-\u9047\u5230\u8FC7\u6B7B\u9501\u95EE\u9898\u5417-\u4F60\u662F\u5982\u4F55\u89E3\u51B3\u7684" aria-hidden="true">#</a> 47.MySQL \u9047\u5230\u8FC7\u6B7B\u9501\u95EE\u9898\u5417\uFF0C\u4F60\u662F\u5982\u4F55\u89E3\u51B3\u7684\uFF1F</h3><p>\u6392\u67E5\u6B7B\u9501\u7684\u4E00\u822C\u6B65\u9AA4\u662F\u8FD9\u6837\u7684\uFF1A</p><p>\uFF081\uFF09\u67E5\u770B\u6B7B\u9501\u65E5\u5FD7 show engine innodb status;</p><p>\uFF082\uFF09\u627E\u51FA\u6B7B\u9501 sql</p><p>\uFF083\uFF09\u5206\u6790 sql \u52A0\u9501\u60C5\u51B5</p><p>\uFF084\uFF09\u6A21\u62DF\u6B7B\u9501\u6848\u53D1</p><p>\uFF085\uFF09\u5206\u6790\u6B7B\u9501\u65E5\u5FD7</p><p>\uFF086\uFF09\u5206\u6790\u6B7B\u9501\u7ED3\u679C</p><p>\u5F53\u7136\uFF0C\u8FD9\u53EA\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u6D41\u7A0B\u8BF4\u660E\uFF0C\u5B9E\u9645\u4E0A\u751F\u4EA7\u4E2D\u7684\u6B7B\u9501\u5343\u5947\u767E\u602A\uFF0C\u6392\u67E5\u548C\u89E3\u51B3\u8D77\u6765\u6CA1\u90A3\u4E48\u7B80\u5355\u3002</p><h2 id="\u4E8B\u52A1" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u52A1" aria-hidden="true">#</a> \u4E8B\u52A1</h2><h3 id="_48-mysql-\u4E8B\u52A1\u7684\u56DB\u5927\u7279\u6027\u8BF4\u4E00\u4E0B" tabindex="-1"><a class="header-anchor" href="#_48-mysql-\u4E8B\u52A1\u7684\u56DB\u5927\u7279\u6027\u8BF4\u4E00\u4E0B" aria-hidden="true">#</a> 48.MySQL \u4E8B\u52A1\u7684\u56DB\u5927\u7279\u6027\u8BF4\u4E00\u4E0B\uFF1F</h3><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-eaafb8b8-fbe6-42c0-9cc2-f2e04631b56c.jpg" alt="\u4E8B\u52A1\u56DB\u5927\u7279\u6027"></p><ul><li>\u539F\u5B50\u6027\uFF1A\u4E8B\u52A1\u4F5C\u4E3A\u4E00\u4E2A\u6574\u4F53\u88AB\u6267\u884C\uFF0C\u5305\u542B\u5728\u5176\u4E2D\u7684\u5BF9\u6570\u636E\u5E93\u7684\u64CD\u4F5C\u8981\u4E48\u5168\u90E8\u88AB\u6267\u884C\uFF0C\u8981\u4E48\u90FD\u4E0D\u6267\u884C\u3002</li><li>\u4E00\u81F4\u6027\uFF1A\u6307\u5728\u4E8B\u52A1\u5F00\u59CB\u4E4B\u524D\u548C\u4E8B\u52A1\u7ED3\u675F\u4EE5\u540E\uFF0C\u6570\u636E\u4E0D\u4F1A\u88AB\u7834\u574F\uFF0C\u5047\u5982 A \u8D26\u6237\u7ED9 B \u8D26\u6237\u8F6C 10 \u5757\u94B1\uFF0C\u4E0D\u7BA1\u6210\u529F\u4E0E\u5426\uFF0CA \u548C B \u7684\u603B\u91D1\u989D\u662F\u4E0D\u53D8\u7684\u3002</li><li>\u9694\u79BB\u6027\uFF1A\u591A\u4E2A\u4E8B\u52A1\u5E76\u53D1\u8BBF\u95EE\u65F6\uFF0C\u4E8B\u52A1\u4E4B\u95F4\u662F\u76F8\u4E92\u9694\u79BB\u7684\uFF0C\u5373\u4E00\u4E2A\u4E8B\u52A1\u4E0D\u5F71\u54CD\u5176\u5B83\u4E8B\u52A1\u8FD0\u884C\u6548\u679C\u3002\u7B80\u8A00\u4E4B\uFF0C\u5C31\u662F\u4E8B\u52A1\u4E4B\u95F4\u662F\u8FDB\u6C34\u4E0D\u72AF\u6CB3\u6C34\u7684\u3002</li><li>\u6301\u4E45\u6027\uFF1A\u8868\u793A\u4E8B\u52A1\u5B8C\u6210\u4EE5\u540E\uFF0C\u8BE5\u4E8B\u52A1\u5BF9\u6570\u636E\u5E93\u6240\u4F5C\u7684\u64CD\u4F5C\u66F4\u6539\uFF0C\u5C06\u6301\u4E45\u5730\u4FDD\u5B58\u5728\u6570\u636E\u5E93\u4E4B\u4E2D\u3002</li></ul><h3 id="_49-\u90A3-acid-\u9760\u4EC0\u4E48\u4FDD\u8BC1\u7684\u5462" tabindex="-1"><a class="header-anchor" href="#_49-\u90A3-acid-\u9760\u4EC0\u4E48\u4FDD\u8BC1\u7684\u5462" aria-hidden="true">#</a> 49.\u90A3 ACID \u9760\u4EC0\u4E48\u4FDD\u8BC1\u7684\u5462\uFF1F</h3><ul><li>\u4E8B\u52A1\u7684<strong>\u9694\u79BB\u6027</strong>\u662F\u901A\u8FC7\u6570\u636E\u5E93\u9501\u7684\u673A\u5236\u5B9E\u73B0\u7684\u3002</li><li>\u4E8B\u52A1\u7684<strong>\u4E00\u81F4\u6027</strong>\u7531 undo log \u6765\u4FDD\u8BC1\uFF1Aundo log \u662F\u903B\u8F91\u65E5\u5FD7\uFF0C\u8BB0\u5F55\u4E86\u4E8B\u52A1\u7684 insert\u3001update\u3001deltete \u64CD\u4F5C\uFF0C\u56DE\u6EDA\u7684\u65F6\u5019\u505A\u76F8\u53CD\u7684 delete\u3001update\u3001insert \u64CD\u4F5C\u6765\u6062\u590D\u6570\u636E\u3002</li><li>\u4E8B\u52A1\u7684<strong>\u539F\u5B50\u6027</strong>\u548C<strong>\u6301\u4E45\u6027</strong>\u7531 redo log \u6765\u4FDD\u8BC1\uFF1Aredolog \u88AB\u79F0\u4F5C\u91CD\u505A\u65E5\u5FD7\uFF0C\u662F\u7269\u7406\u65E5\u5FD7\uFF0C\u4E8B\u52A1\u63D0\u4EA4\u7684\u65F6\u5019\uFF0C\u5FC5\u987B\u5148\u5C06\u4E8B\u52A1\u7684\u6240\u6709\u65E5\u5FD7\u5199\u5165 redo log \u6301\u4E45\u5316\uFF0C\u5230\u4E8B\u52A1\u7684\u63D0\u4EA4\u64CD\u4F5C\u624D\u7B97\u5B8C\u6210\u3002</li></ul><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-61393d95-38d1-4c38-a7a9-4b9580a1f95d.jpg" alt="ACID \u9760\u4EC0\u4E48\u4FDD\u8BC1"></p><h3 id="_50-\u4E8B\u52A1\u7684\u9694\u79BB\u7EA7\u522B\u6709\u54EA\u4E9B-mysql-\u7684\u9ED8\u8BA4\u9694\u79BB\u7EA7\u522B\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_50-\u4E8B\u52A1\u7684\u9694\u79BB\u7EA7\u522B\u6709\u54EA\u4E9B-mysql-\u7684\u9ED8\u8BA4\u9694\u79BB\u7EA7\u522B\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 50.\u4E8B\u52A1\u7684\u9694\u79BB\u7EA7\u522B\u6709\u54EA\u4E9B\uFF1FMySQL \u7684\u9ED8\u8BA4\u9694\u79BB\u7EA7\u522B\u662F\u4EC0\u4E48\uFF1F</h3><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-99942529-4a91-420b-9ce2-4149e747f64d.jpg" alt=""></p><p>\u4E8B\u52A1\u7684\u56DB\u4E2A\u9694\u79BB\u7EA7\u522B</p><ul><li>\u8BFB\u672A\u63D0\u4EA4\uFF08Read Uncommitted\uFF09</li><li>\u8BFB\u5DF2\u63D0\u4EA4\uFF08Read Committed\uFF09</li><li>\u53EF\u91CD\u590D\u8BFB\uFF08Repeatable Read\uFF09</li><li>\u4E32\u884C\u5316\uFF08Serializable\uFF09</li></ul><p>MySQL \u9ED8\u8BA4\u7684\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B\u662F\u53EF\u91CD\u590D\u8BFB (Repeatable Read)\u3002</p><h3 id="_51-\u4EC0\u4E48\u662F\u5E7B\u8BFB-\u810F\u8BFB-\u4E0D\u53EF\u91CD\u590D\u8BFB\u5462" tabindex="-1"><a class="header-anchor" href="#_51-\u4EC0\u4E48\u662F\u5E7B\u8BFB-\u810F\u8BFB-\u4E0D\u53EF\u91CD\u590D\u8BFB\u5462" aria-hidden="true">#</a> 51.\u4EC0\u4E48\u662F\u5E7B\u8BFB\uFF0C\u810F\u8BFB\uFF0C\u4E0D\u53EF\u91CD\u590D\u8BFB\u5462\uFF1F</h3><ul><li>\u4E8B\u52A1 A\u3001B \u4EA4\u66FF\u6267\u884C\uFF0C\u4E8B\u52A1 A \u8BFB\u53D6\u5230\u4E8B\u52A1 B \u672A\u63D0\u4EA4\u7684\u6570\u636E\uFF0C\u8FD9\u5C31\u662F<strong>\u810F\u8BFB</strong>\u3002</li><li>\u5728\u4E00\u4E2A\u4E8B\u52A1\u8303\u56F4\u5185\uFF0C\u4E24\u4E2A\u76F8\u540C\u7684\u67E5\u8BE2\uFF0C\u8BFB\u53D6\u540C\u4E00\u6761\u8BB0\u5F55\uFF0C\u5374\u8FD4\u56DE\u4E86\u4E0D\u540C\u7684\u6570\u636E\uFF0C\u8FD9\u5C31\u662F<strong>\u4E0D\u53EF\u91CD\u590D\u8BFB</strong>\u3002</li><li>\u4E8B\u52A1 A \u67E5\u8BE2\u4E00\u4E2A\u8303\u56F4\u7684\u7ED3\u679C\u96C6\uFF0C\u53E6\u4E00\u4E2A\u5E76\u53D1\u4E8B\u52A1 B \u5F80\u8FD9\u4E2A\u8303\u56F4\u4E2D\u63D2\u5165 / \u5220\u9664\u4E86\u6570\u636E\uFF0C\u5E76\u9759\u6084\u6084\u5730\u63D0\u4EA4\uFF0C\u7136\u540E\u4E8B\u52A1 A \u518D\u6B21\u67E5\u8BE2\u76F8\u540C\u7684\u8303\u56F4\uFF0C\u4E24\u6B21\u8BFB\u53D6\u5F97\u5230\u7684\u7ED3\u679C\u96C6\u4E0D\u4E00\u6837\u4E86\uFF0C\u8FD9\u5C31\u662F<strong>\u5E7B\u8BFB</strong>\u3002</li></ul><p>\u4E0D\u540C\u7684\u9694\u79BB\u7EA7\u522B\uFF0C\u5728\u5E76\u53D1\u4E8B\u52A1\u4E0B\u53EF\u80FD\u4F1A\u53D1\u751F\u7684\u95EE\u9898\uFF1A</p><table><thead><tr><th>\u9694\u79BB\u7EA7\u522B</th><th>\u810F\u8BFB</th><th>\u4E0D\u53EF\u91CD\u590D\u8BFB</th><th>\u5E7B\u8BFB</th></tr></thead><tbody><tr><td>Read Uncommited \u8BFB\u53D6\u672A\u63D0\u4EA4</td><td>\u662F</td><td>\u662F</td><td>\u662F</td></tr><tr><td>Read Commited \u8BFB\u53D6\u5DF2\u63D0\u4EA4</td><td>\u5426</td><td>\u662F</td><td>\u5426</td></tr><tr><td>Repeatable Read \u53EF\u91CD\u590D\u8BFB</td><td>\u5426</td><td>\u5426</td><td>\u662F</td></tr><tr><td>Serialzable \u53EF\u4E32\u884C\u5316</td><td>\u5426</td><td>\u5426</td><td>\u5426</td></tr></tbody></table><h3 id="_52-\u4E8B\u52A1\u7684\u5404\u4E2A\u9694\u79BB\u7EA7\u522B\u90FD\u662F\u5982\u4F55\u5B9E\u73B0\u7684" tabindex="-1"><a class="header-anchor" href="#_52-\u4E8B\u52A1\u7684\u5404\u4E2A\u9694\u79BB\u7EA7\u522B\u90FD\u662F\u5982\u4F55\u5B9E\u73B0\u7684" aria-hidden="true">#</a> 52.\u4E8B\u52A1\u7684\u5404\u4E2A\u9694\u79BB\u7EA7\u522B\u90FD\u662F\u5982\u4F55\u5B9E\u73B0\u7684\uFF1F</h3><p><strong>\u8BFB\u672A\u63D0\u4EA4</strong></p><p>\u8BFB\u672A\u63D0\u4EA4\uFF0C\u5C31\u4E0D\u7528\u591A\u8BF4\u4E86\uFF0C\u91C7\u53D6\u7684\u662F\u8BFB\u4E0D\u52A0\u9501\u539F\u7406\u3002</p><ul><li>\u4E8B\u52A1\u8BFB\u4E0D\u52A0\u9501\uFF0C\u4E0D\u963B\u585E\u5176\u4ED6\u4E8B\u52A1\u7684\u8BFB\u548C\u5199</li><li>\u4E8B\u52A1\u5199\u963B\u585E\u5176\u4ED6\u4E8B\u52A1\u5199\uFF0C\u4F46\u4E0D\u963B\u585E\u5176\u4ED6\u4E8B\u52A1\u8BFB\uFF1B</li></ul><p><strong>\u8BFB\u53D6\u5DF2\u63D0\u4EA4&amp;\u53EF\u91CD\u590D\u8BFB</strong></p><p>\u8BFB\u53D6\u5DF2\u63D0\u4EA4\u548C\u53EF\u91CD\u590D\u8BFB\u7EA7\u522B\u5229\u7528\u4E86<code>ReadView</code>\u548C<code>MVCC</code>\uFF0C\u4E5F\u5C31\u662F\u6BCF\u4E2A\u4E8B\u52A1\u53EA\u80FD\u8BFB\u53D6\u5B83\u80FD\u770B\u5230\u7684\u7248\u672C\uFF08ReadView\uFF09\u3002</p><ul><li>READ COMMITTED\uFF1A\u6BCF\u6B21\u8BFB\u53D6\u6570\u636E\u524D\u90FD\u751F\u6210\u4E00\u4E2A ReadView</li><li>REPEATABLE READ \uFF1A\u5728\u7B2C\u4E00\u6B21\u8BFB\u53D6\u6570\u636E\u65F6\u751F\u6210\u4E00\u4E2A ReadView</li></ul><p><strong>\u4E32\u884C\u5316</strong></p><p>\u4E32\u884C\u5316\u7684\u5B9E\u73B0\u91C7\u7528\u7684\u662F\u8BFB\u5199\u90FD\u52A0\u9501\u7684\u539F\u7406\u3002</p><p>\u4E32\u884C\u5316\u7684\u60C5\u51B5\u4E0B\uFF0C\u5BF9\u4E8E\u540C\u4E00\u884C\u4E8B\u52A1\uFF0C<code>\u5199</code>\u4F1A\u52A0<code>\u5199\u9501</code>\uFF0C<code>\u8BFB</code>\u4F1A\u52A0<code>\u8BFB\u9501</code>\u3002\u5F53\u51FA\u73B0\u8BFB\u5199\u9501\u51B2\u7A81\u7684\u65F6\u5019\uFF0C\u540E\u8BBF\u95EE\u7684\u4E8B\u52A1\u5FC5\u987B\u7B49\u524D\u4E00\u4E2A\u4E8B\u52A1\u6267\u884C\u5B8C\u6210\uFF0C\u624D\u80FD\u7EE7\u7EED\u6267\u884C\u3002</p><h3 id="_53-mvcc-\u4E86\u89E3\u5417-\u600E\u4E48\u5B9E\u73B0\u7684" tabindex="-1"><a class="header-anchor" href="#_53-mvcc-\u4E86\u89E3\u5417-\u600E\u4E48\u5B9E\u73B0\u7684" aria-hidden="true">#</a> 53.MVCC \u4E86\u89E3\u5417\uFF1F\u600E\u4E48\u5B9E\u73B0\u7684\uFF1F</h3><p>MVCC(Multi Version Concurrency Control)\uFF0C\u4E2D\u6587\u540D\u662F\u591A\u7248\u672C\u5E76\u53D1\u63A7\u5236\uFF0C\u7B80\u5355\u6765\u8BF4\u5C31\u662F\u901A\u8FC7\u7EF4\u62A4\u6570\u636E\u5386\u53F2\u7248\u672C\uFF0C\u4ECE\u800C\u89E3\u51B3\u5E76\u53D1\u8BBF\u95EE\u60C5\u51B5\u4E0B\u7684\u8BFB\u4E00\u81F4\u6027\u95EE\u9898\u3002\u5173\u4E8E\u5B83\u7684\u5B9E\u73B0\uFF0C\u8981\u6293\u4F4F\u51E0\u4E2A\u5173\u952E\u70B9\uFF0C<strong>\u9690\u5F0F\u5B57\u6BB5\u3001undo \u65E5\u5FD7\u3001\u7248\u672C\u94FE\u3001\u5FEB\u7167\u8BFB&amp;\u5F53\u524D\u8BFB\u3001Read View</strong>\u3002</p><p><strong>\u7248\u672C\u94FE</strong></p><p>\u5BF9\u4E8E InnoDB \u5B58\u50A8\u5F15\u64CE\uFF0C\u6BCF\u4E00\u884C\u8BB0\u5F55\u90FD\u6709\u4E24\u4E2A\u9690\u85CF\u5217<strong>DB_TRX_ID\u3001DB_ROLL_PTR</strong></p><ul><li><code>DB_TRX_ID</code>\uFF0C\u4E8B\u52A1 ID\uFF0C\u6BCF\u6B21\u4FEE\u6539\u65F6\uFF0C\u90FD\u4F1A\u628A\u8BE5\u4E8B\u52A1 ID \u590D\u5236\u7ED9<code>DB_TRX_ID</code>\uFF1B</li><li><code>DB_ROLL_PTR</code>\uFF0C\u56DE\u6EDA\u6307\u9488\uFF0C\u6307\u5411\u56DE\u6EDA\u6BB5\u7684 undo \u65E5\u5FD7\u3002</li></ul><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-81b091fb-77d9-440e-940e-253b905c0be3.jpg" alt="\u8868\u9690\u85CF\u5217"></p><p>\u5047\u5982\u6709\u4E00\u5F20<code>user</code>\u8868\uFF0C\u8868\u4E2D\u53EA\u6709\u4E00\u884C\u8BB0\u5F55\uFF0C\u5F53\u65F6\u63D2\u5165\u7684\u4E8B\u52A1 id \u4E3A 80\u3002\u6B64\u65F6\uFF0C\u8BE5\u6761\u8BB0\u5F55\u7684\u793A\u4F8B\u56FE\u5982\u4E0B\uFF1A</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-80ebc2b3-ae63-417d-9307-f6a7811f7965.jpg" alt=""></p><p>\u63A5\u4E0B\u6765\u6709\u4E24\u4E2A<code>DB_TRX_ID</code>\u5206\u522B\u4E3A<code>100</code>\u3001<code>200</code>\u7684\u4E8B\u52A1\u5BF9\u8FD9\u6761\u8BB0\u5F55\u8FDB\u884C<code>update</code>\u64CD\u4F5C\uFF0C\u6574\u4E2A\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-bf4ff00d-01bd-4170-a17b-6919f7873ea4.jpg" alt="update \u64CD\u4F5C"></p><p>\u7531\u4E8E\u6BCF\u6B21\u53D8\u52A8\u90FD\u4F1A\u5148\u628A<code>undo</code>\u65E5\u5FD7\u8BB0\u5F55\u4E0B\u6765\uFF0C\u5E76\u7528<code>DB_ROLL_PTR</code>\u6307\u5411<code>undo</code>\u65E5\u5FD7\u5730\u5740\u3002\u56E0\u6B64\u53EF\u4EE5\u8BA4\u4E3A\uFF0C<strong>\u5BF9\u8BE5\u6761\u8BB0\u5F55\u7684\u4FEE\u6539\u65E5\u5FD7\u4E32\u8054\u8D77\u6765\u5C31\u5F62\u6210\u4E86\u4E00\u4E2A<code>\u7248\u672C\u94FE</code>\uFF0C\u7248\u672C\u94FE\u7684\u5934\u8282\u70B9\u5C31\u662F\u5F53\u524D\u8BB0\u5F55\u6700\u65B0\u7684\u503C</strong>\u3002\u5982\u4E0B\uFF1A</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-765b3d83-14eb-4b56-8940-9d60bfaf1737.jpg" alt="MVCC"></p><p><strong>ReadView</strong></p><blockquote><p>\u5BF9\u4E8E<code>Read Committed</code>\u548C<code>Repeatable Read</code>\u9694\u79BB\u7EA7\u522B\u6765\u8BF4\uFF0C\u90FD\u9700\u8981\u8BFB\u53D6\u5DF2\u7ECF\u63D0\u4EA4\u7684\u4E8B\u52A1\u6240\u4FEE\u6539\u7684\u8BB0\u5F55\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5982\u679C\u7248\u672C\u94FE\u4E2D\u67D0\u4E2A\u7248\u672C\u7684\u4FEE\u6539\u6CA1\u6709\u63D0\u4EA4\uFF0C\u90A3\u4E48\u8BE5\u7248\u672C\u7684\u8BB0\u5F55\u65F6\u4E0D\u80FD\u88AB\u8BFB\u53D6\u7684\u3002\u6240\u4EE5\u9700\u8981\u786E\u5B9A\u5728<code>Read Committed</code>\u548C<code>Repeatable Read</code>\u9694\u79BB\u7EA7\u522B\u4E0B\uFF0C\u7248\u672C\u94FE\u4E2D\u54EA\u4E2A\u7248\u672C\u662F\u80FD\u88AB\u5F53\u524D\u4E8B\u52A1\u8BFB\u53D6\u7684\u3002\u4E8E\u662F\u5C31\u5F15\u5165\u4E86<code>ReadView</code>\u8FD9\u4E2A\u6982\u5FF5\u6765\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002</p></blockquote><p>Read View \u5C31\u662F\u4E8B\u52A1\u6267\u884C<strong>\u5FEB\u7167\u8BFB</strong>\u65F6\uFF0C\u4EA7\u751F\u7684\u8BFB\u89C6\u56FE\uFF0C\u76F8\u5F53\u4E8E\u67D0\u65F6\u523B\u8868\u8BB0\u5F55\u7684\u4E00\u4E2A\u5FEB\u7167\uFF0C\u901A\u8FC7\u8FD9\u4E2A\u5FEB\u7167\uFF0C\u6211\u4EEC\u53EF\u4EE5\u83B7\u53D6\uFF1A</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-4451a8c6-8e90-4941-a6be-c09533fa6c03.jpg" alt="\u4E8B\u52A1\u548C ReadView"></p><ul><li>m_ids \uFF1A\u8868\u793A\u5728\u751F\u6210 ReadView \u65F6\u5F53\u524D\u7CFB\u7EDF\u4E2D\u6D3B\u8DC3\u7684\u8BFB\u5199\u4E8B\u52A1\u7684\u4E8B\u52A1 id \u5217\u8868\u3002</li><li>min_trx_id \uFF1A\u8868\u793A\u5728\u751F\u6210 ReadView \u65F6\u5F53\u524D\u7CFB\u7EDF\u4E2D\u6D3B\u8DC3\u7684\u8BFB\u5199\u4E8B\u52A1\u4E2D\u6700\u5C0F\u7684 \u4E8B\u52A1 id \uFF0C\u4E5F\u5C31\u662F m_ids \u4E2D\u7684\u6700\u5C0F\u503C\u3002</li><li>max_trx_id \uFF1A\u8868\u793A\u751F\u6210 ReadView \u65F6\u7CFB\u7EDF\u4E2D\u5E94\u8BE5\u5206\u914D\u7ED9\u4E0B\u4E00\u4E2A\u4E8B\u52A1\u7684 id \u503C\u3002</li><li>creator_trx_id \uFF1A\u8868\u793A\u751F\u6210\u8BE5 ReadView \u7684\u4E8B\u52A1\u7684 \u4E8B\u52A1 id</li></ul><p>\u6709\u4E86\u8FD9\u4E2A ReadView \uFF0C\u8FD9\u6837\u5728\u8BBF\u95EE\u67D0\u6761\u8BB0\u5F55\u65F6\uFF0C\u53EA\u9700\u8981\u6309\u7167\u4E0B\u8FB9\u7684\u6B65\u9AA4\u5224\u65AD\u8BB0\u5F55\u7684\u67D0\u4E2A\u7248\u672C\u662F\u5426\u53EF\u89C1\uFF1A</p><ul><li>\u5982\u679C\u88AB\u8BBF\u95EE\u7248\u672C\u7684 DB_TRX_ID \u5C5E\u6027\u503C\u4E0E ReadView \u4E2D\u7684 creator_trx_id \u503C\u76F8\u540C\uFF0C\u610F\u5473\u7740\u5F53\u524D\u4E8B\u52A1\u5728\u8BBF\u95EE\u5B83\u81EA\u5DF1\u4FEE\u6539\u8FC7\u7684\u8BB0\u5F55\uFF0C\u6240\u4EE5\u8BE5\u7248\u672C\u53EF\u4EE5\u88AB\u5F53\u524D\u4E8B\u52A1\u8BBF\u95EE\u3002</li><li>\u5982\u679C\u88AB\u8BBF\u95EE\u7248\u672C\u7684 DB_TRX_ID \u5C5E\u6027\u503C\u5C0F\u4E8E ReadView \u4E2D\u7684 min_trx_id \u503C\uFF0C\u8868\u660E\u751F\u6210\u8BE5\u7248\u672C\u7684\u4E8B\u52A1\u5728\u5F53\u524D\u4E8B\u52A1\u751F\u6210 ReadView \u524D\u5DF2\u7ECF\u63D0\u4EA4\uFF0C\u6240\u4EE5\u8BE5\u7248\u672C\u53EF\u4EE5\u88AB\u5F53\u524D\u4E8B\u52A1\u8BBF\u95EE\u3002</li><li>\u5982\u679C\u88AB\u8BBF\u95EE\u7248\u672C\u7684 DB_TRX_ID \u5C5E\u6027\u503C\u5927\u4E8E ReadView \u4E2D\u7684 max_trx_id \u503C\uFF0C\u8868\u660E\u751F\u6210\u8BE5\u7248\u672C\u7684\u4E8B\u52A1\u5728\u5F53\u524D\u4E8B\u52A1\u751F\u6210 ReadView \u540E\u624D\u5F00\u542F\uFF0C\u6240\u4EE5\u8BE5\u7248\u672C\u4E0D\u53EF\u4EE5\u88AB\u5F53\u524D\u4E8B\u52A1\u8BBF\u95EE\u3002</li><li>\u5982\u679C\u88AB\u8BBF\u95EE\u7248\u672C\u7684 DB_TRX_ID \u5C5E\u6027\u503C\u5728 ReadView \u7684 min_trx_id \u548C max_trx_id \u4E4B\u95F4\uFF0C\u90A3\u5C31\u9700\u8981\u5224\u65AD\u4E00\u4E0B trx_id \u5C5E\u6027\u503C\u662F\u4E0D\u662F\u5728 m_ids \u5217\u8868\u4E2D\uFF0C\u5982\u679C\u5728\uFF0C\u8BF4\u660E\u521B\u5EFA ReadView \u65F6\u751F\u6210\u8BE5\u7248\u672C\u7684\u4E8B\u52A1\u8FD8\u662F\u6D3B\u8DC3\u7684\uFF0C\u8BE5\u7248\u672C\u4E0D\u53EF\u4EE5\u88AB\u8BBF\u95EE\uFF1B\u5982\u679C\u4E0D\u5728\uFF0C\u8BF4\u660E\u521B\u5EFA ReadView \u65F6\u751F\u6210\u8BE5\u7248\u672C\u7684\u4E8B\u52A1\u5DF2\u7ECF\u88AB\u63D0\u4EA4\uFF0C\u8BE5\u7248\u672C\u53EF\u4EE5\u88AB\u8BBF\u95EE\u3002</li></ul><p>\u5982\u679C\u67D0\u4E2A\u7248\u672C\u7684\u6570\u636E\u5BF9\u5F53\u524D\u4E8B\u52A1\u4E0D\u53EF\u89C1\u7684\u8BDD\uFF0C\u90A3\u5C31\u987A\u7740\u7248\u672C\u94FE\u627E\u5230\u4E0B\u4E00\u4E2A\u7248\u672C\u7684\u6570\u636E\uFF0C\u7EE7\u7EED\u6309\u7167\u4E0A\u8FB9\u7684\u6B65\u9AA4\u5224\u65AD\u53EF\u89C1\u6027\uFF0C\u4F9D\u6B64\u7C7B\u63A8\uFF0C\u76F4\u5230\u7248\u672C\u94FE\u4E2D\u7684\u6700\u540E\u4E00\u4E2A\u7248\u672C\u3002\u5982\u679C\u6700\u540E\u4E00\u4E2A\u7248\u672C\u4E5F\u4E0D\u53EF\u89C1\u7684\u8BDD\uFF0C\u90A3\u4E48\u5C31\u610F\u5473\u7740\u8BE5\u6761\u8BB0\u5F55\u5BF9\u8BE5\u4E8B\u52A1\u5B8C\u5168\u4E0D\u53EF\u89C1\uFF0C\u67E5\u8BE2\u7ED3\u679C\u5C31\u4E0D\u5305\u542B\u8BE5\u8BB0\u5F55\u3002</p><p>\u5728 MySQL \u4E2D\uFF0C READ COMMITTED \u548C REPEATABLE READ \u9694\u79BB\u7EA7\u522B\u7684\u7684\u4E00\u4E2A\u975E\u5E38\u5927\u7684\u533A\u522B\u5C31\u662F\u5B83\u4EEC\u751F\u6210 ReadView \u7684\u65F6\u673A\u4E0D\u540C\u3002</p><p>READ COMMITTED \u662F<strong>\u6BCF\u6B21\u8BFB\u53D6\u6570\u636E\u524D\u90FD\u751F\u6210\u4E00\u4E2A ReadView</strong>\uFF0C\u8FD9\u6837\u5C31\u80FD\u4FDD\u8BC1\u81EA\u5DF1\u6BCF\u6B21\u90FD\u80FD\u8BFB\u5230\u5176\u5B83\u4E8B\u52A1\u63D0\u4EA4\u7684\u6570\u636E\uFF1BREPEATABLE READ \u662F\u5728<strong>\u7B2C\u4E00\u6B21\u8BFB\u53D6\u6570\u636E\u65F6\u751F\u6210\u4E00\u4E2A ReadView</strong>\uFF0C\u8FD9\u6837\u5C31\u80FD\u4FDD\u8BC1\u540E\u7EED\u8BFB\u53D6\u7684\u7ED3\u679C\u5B8C\u5168\u4E00\u81F4\u3002</p><h2 id="\u9AD8\u53EF\u7528-\u6027\u80FD" tabindex="-1"><a class="header-anchor" href="#\u9AD8\u53EF\u7528-\u6027\u80FD" aria-hidden="true">#</a> \u9AD8\u53EF\u7528/\u6027\u80FD</h2><h3 id="_54-\u6570\u636E\u5E93\u8BFB\u5199\u5206\u79BB\u4E86\u89E3\u5417" tabindex="-1"><a class="header-anchor" href="#_54-\u6570\u636E\u5E93\u8BFB\u5199\u5206\u79BB\u4E86\u89E3\u5417" aria-hidden="true">#</a> 54.\u6570\u636E\u5E93\u8BFB\u5199\u5206\u79BB\u4E86\u89E3\u5417\uFF1F</h3><p>\u8BFB\u5199\u5206\u79BB\u7684\u57FA\u672C\u539F\u7406\u662F\u5C06\u6570\u636E\u5E93\u8BFB\u5199\u64CD\u4F5C\u5206\u6563\u5230\u4E0D\u540C\u7684\u8282\u70B9\u4E0A\uFF0C\u4E0B\u9762\u662F\u57FA\u672C\u67B6\u6784\u56FE\uFF1A</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-31df767c-db05-4de4-a05b-a45bcf76c1bf.jpg" alt="\u8BFB\u5199\u5206\u79BB"></p><p>\u8BFB\u5199\u5206\u79BB\u7684\u57FA\u672C\u5B9E\u73B0\u662F:</p><ul><li>\u6570\u636E\u5E93\u670D\u52A1\u5668\u642D\u5EFA\u4E3B\u4ECE\u96C6\u7FA4\uFF0C\u4E00\u4E3B\u4E00\u4ECE\u3001\u4E00\u4E3B\u591A\u4ECE\u90FD\u53EF\u4EE5\u3002</li><li>\u6570\u636E\u5E93\u4E3B\u673A\u8D1F\u8D23\u8BFB\u5199\u64CD\u4F5C\uFF0C\u4ECE\u673A\u53EA\u8D1F\u8D23\u8BFB\u64CD\u4F5C\u3002</li><li>\u6570\u636E\u5E93\u4E3B\u673A\u901A\u8FC7\u590D\u5236\u5C06\u6570\u636E\u540C\u6B65\u5230\u4ECE\u673A\uFF0C\u6BCF\u53F0\u6570\u636E\u5E93\u670D\u52A1\u5668\u90FD\u5B58\u50A8\u4E86\u6240\u6709\u7684\u4E1A\u52A1\u6570\u636E\u3002</li><li>\u4E1A\u52A1\u670D\u52A1\u5668\u5C06\u5199\u64CD\u4F5C\u53D1\u7ED9\u6570\u636E\u5E93\u4E3B\u673A\uFF0C\u5C06\u8BFB\u64CD\u4F5C\u53D1\u7ED9\u6570\u636E\u5E93\u4ECE\u673A\u3002</li></ul><h3 id="_55-\u90A3\u8BFB\u5199\u5206\u79BB\u7684\u5206\u914D\u600E\u4E48\u5B9E\u73B0\u5462" tabindex="-1"><a class="header-anchor" href="#_55-\u90A3\u8BFB\u5199\u5206\u79BB\u7684\u5206\u914D\u600E\u4E48\u5B9E\u73B0\u5462" aria-hidden="true">#</a> 55.\u90A3\u8BFB\u5199\u5206\u79BB\u7684\u5206\u914D\u600E\u4E48\u5B9E\u73B0\u5462\uFF1F</h3><p>\u5C06\u8BFB\u5199\u64CD\u4F5C\u533A\u5206\u5F00\u6765\uFF0C\u7136\u540E\u8BBF\u95EE\u4E0D\u540C\u7684\u6570\u636E\u5E93\u670D\u52A1\u5668\uFF0C\u4E00\u822C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A\u7A0B\u5E8F\u4EE3\u7801\u5C01\u88C5\u548C\u4E2D\u95F4\u4EF6\u5C01\u88C5\u3002</p><ol><li>\u7A0B\u5E8F\u4EE3\u7801\u5C01\u88C5</li></ol><p>\u7A0B\u5E8F\u4EE3\u7801\u5C01\u88C5\u6307\u5728\u4EE3\u7801\u4E2D\u62BD\u8C61\u4E00\u4E2A\u6570\u636E\u8BBF\u95EE\u5C42\uFF08\u6240\u4EE5\u6709\u7684\u6587\u7AE0\u4E5F\u79F0\u8FD9\u79CD\u65B9\u5F0F\u4E3A &quot;\u4E2D\u95F4\u5C42\u5C01\u88C5&quot; \uFF09 \uFF0C\u5B9E\u73B0\u8BFB\u5199\u64CD\u4F5C\u5206\u79BB\u548C\u6570\u636E\u5E93\u670D\u52A1\u5668\u8FDE\u63A5\u7684\u7BA1\u7406\u3002\u4F8B\u5982\uFF0C\u57FA\u4E8E Hibernate \u8FDB\u884C\u7B80\u5355\u5C01\u88C5\uFF0C\u5C31\u53EF\u4EE5\u5B9E\u73B0\u8BFB\u5199\u5206\u79BB\uFF1A</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-771eb01f-3f1a-4437-8e1b-affe4de36ec3.jpg" alt="\u4E1A\u52A1\u4EE3\u7801\u5C01\u88C5"></p><p>\u76EE\u524D\u5F00\u6E90\u7684\u5B9E\u73B0\u65B9\u6848\u4E2D\uFF0C\u6DD8\u5B9D\u7684 TDDL (Taobao Distributed Data Layer, \u5916\u53F7\uFF1A\u5934\u90FD\u5927\u4E86\uFF09\u662F\u6BD4\u8F83\u6709\u540D\u7684\u3002</p><ol start="2"><li>\u4E2D\u95F4\u4EF6\u5C01\u88C5</li></ol><p>\u4E2D\u95F4\u4EF6\u5C01\u88C5\u6307\u7684\u662F\u72EC\u7ACB\u4E00\u5957\u7CFB\u7EDF\u51FA\u6765\uFF0C\u5B9E\u73B0\u8BFB\u5199\u64CD\u4F5C\u5206\u79BB\u548C\u6570\u636E\u5E93\u670D\u52A1\u5668\u8FDE\u63A5\u7684\u7BA1\u7406\u3002\u4E2D\u95F4\u4EF6\u5BF9\u4E1A\u52A1\u670D\u52A1\u5668\u63D0\u4F9B SQL \u517C\u5BB9\u7684\u534F\u8BAE\uFF0C\u4E1A\u52A1\u670D\u52A1\u5668\u65E0\u987B\u81EA\u5DF1\u8FDB\u884C\u8BFB\u5199\u5206\u79BB\u3002</p><p>\u5BF9\u4E8E\u4E1A\u52A1\u670D\u52A1\u5668\u6765\u8BF4\uFF0C\u8BBF\u95EE\u4E2D\u95F4\u4EF6\u548C\u8BBF\u95EE\u6570\u636E\u5E93\u6CA1\u6709\u533A\u522B\uFF0C\u4E8B\u5B9E\u4E0A\u5728\u4E1A\u52A1\u670D\u52A1\u5668\u770B\u6765\uFF0C\u4E2D\u95F4\u4EF6\u5C31\u662F\u4E00\u4E2A\u6570\u636E\u5E93\u670D\u52A1\u5668\u3002</p><p>\u5176\u57FA\u672C\u67B6\u6784\u662F\uFF1A</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-f2313613-25bd-4065-8f63-969a4b5757a7.jpg" alt="\u6570\u636E\u5E93\u4E2D\u95F4\u4EF6"></p><h3 id="_56-\u4E3B\u4ECE\u590D\u5236\u539F\u7406\u4E86\u89E3\u5417" tabindex="-1"><a class="header-anchor" href="#_56-\u4E3B\u4ECE\u590D\u5236\u539F\u7406\u4E86\u89E3\u5417" aria-hidden="true">#</a> 56.\u4E3B\u4ECE\u590D\u5236\u539F\u7406\u4E86\u89E3\u5417\uFF1F</h3><ul><li>master \u6570\u636E\u5199\u5165\uFF0C\u66F4\u65B0 binlog</li><li>master \u521B\u5EFA\u4E00\u4E2A dump \u7EBF\u7A0B\u5411 slave \u63A8\u9001 binlog</li><li>slave \u8FDE\u63A5\u5230 master \u7684\u65F6\u5019\uFF0C\u4F1A\u521B\u5EFA\u4E00\u4E2A IO \u7EBF\u7A0B\u63A5\u6536 binlog\uFF0C\u5E76\u8BB0\u5F55\u5230 relay log \u4E2D\u7EE7\u65E5\u5FD7\u4E2D</li><li>slave \u518D\u5F00\u542F\u4E00\u4E2A sql \u7EBF\u7A0B\u8BFB\u53D6 relay log \u4E8B\u4EF6\u5E76\u5728 slave \u6267\u884C\uFF0C\u5B8C\u6210\u540C\u6B65</li><li>slave \u8BB0\u5F55\u81EA\u5DF1\u7684 binglog</li></ul><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-1bfbfcb5-2392-4f98-be1b-a66204da09e5.jpg" alt="\u4E3B\u4ECE\u590D\u5236"></p><h3 id="_57-\u4E3B\u4ECE\u540C\u6B65\u5EF6\u8FDF\u600E\u4E48\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_57-\u4E3B\u4ECE\u540C\u6B65\u5EF6\u8FDF\u600E\u4E48\u5904\u7406" aria-hidden="true">#</a> 57.\u4E3B\u4ECE\u540C\u6B65\u5EF6\u8FDF\u600E\u4E48\u5904\u7406\uFF1F</h3><p><strong>\u4E3B\u4ECE\u540C\u6B65\u5EF6\u8FDF\u7684\u539F\u56E0</strong></p><p>\u4E00\u4E2A\u670D\u52A1\u5668\u5F00\u653E\uFF2E\u4E2A\u94FE\u63A5\u7ED9\u5BA2\u6237\u7AEF\u6765\u8FDE\u63A5\u7684\uFF0C\u8FD9\u6837\u6709\u4F1A\u6709\u5927\u5E76\u53D1\u7684\u66F4\u65B0\u64CD\u4F5C, \u4F46\u662F\u4ECE\u670D\u52A1\u5668\u7684\u91CC\u9762\u8BFB\u53D6 binlog \u7684\u7EBF\u7A0B\u4EC5\u6709\u4E00\u4E2A\uFF0C\u5F53\u67D0\u4E2A SQL \u5728\u4ECE\u670D\u52A1\u5668\u4E0A\u6267\u884C\u7684\u65F6\u95F4\u7A0D\u957F \u6216\u8005\u7531\u4E8E\u67D0\u4E2A SQL \u8981\u8FDB\u884C\u9501\u8868\u5C31\u4F1A\u5BFC\u81F4\uFF0C\u4E3B\u670D\u52A1\u5668\u7684 SQL \u5927\u91CF\u79EF\u538B\uFF0C\u672A\u88AB\u540C\u6B65\u5230\u4ECE\u670D\u52A1\u5668\u91CC\u3002\u8FD9\u5C31\u5BFC\u81F4\u4E86\u4E3B\u4ECE\u4E0D\u4E00\u81F4\uFF0C \u4E5F\u5C31\u662F\u4E3B\u4ECE\u5EF6\u8FDF\u3002</p><p><strong>\u4E3B\u4ECE\u540C\u6B65\u5EF6\u8FDF\u7684\u89E3\u51B3\u529E\u6CD5</strong></p><p>\u89E3\u51B3\u4E3B\u4ECE\u590D\u5236\u5EF6\u8FDF\u6709\u51E0\u79CD\u5E38\u89C1\u7684\u65B9\u6CD5:</p><ol><li>\u5199\u64CD\u4F5C\u540E\u7684\u8BFB\u64CD\u4F5C\u6307\u5B9A\u53D1\u7ED9\u6570\u636E\u5E93\u4E3B\u670D\u52A1\u5668</li></ol><p>\u4F8B\u5982\uFF0C\u6CE8\u518C\u8D26\u53F7\u5B8C\u6210\u540E\uFF0C\u767B\u5F55\u65F6\u8BFB\u53D6\u8D26\u53F7\u7684\u8BFB\u64CD\u4F5C\u4E5F\u53D1\u7ED9\u6570\u636E\u5E93\u4E3B\u670D\u52A1\u5668\u3002\u8FD9\u79CD\u65B9\u5F0F\u548C\u4E1A\u52A1\u5F3A\u7ED1\u5B9A\uFF0C\u5BF9\u4E1A\u52A1\u7684\u4FB5\u5165\u548C\u5F71\u54CD\u8F83\u5927\uFF0C\u5982\u679C\u54EA\u4E2A\u65B0\u6765\u7684\u7A0B\u5E8F\u5458\u4E0D\u77E5\u9053\u8FD9\u6837\u5199\u4EE3\u7801\uFF0C\u5C31\u4F1A\u5BFC\u81F4\u4E00\u4E2A bug\u3002</p><ol start="2"><li>\u8BFB\u4ECE\u673A\u5931\u8D25\u540E\u518D\u8BFB\u4E00\u6B21\u4E3B\u673A</li></ol><p>\u8FD9\u5C31\u662F\u901A\u5E38\u6240\u8BF4\u7684 &quot;\u4E8C\u6B21\u8BFB\u53D6&quot; \uFF0C\u4E8C\u6B21\u8BFB\u53D6\u548C\u4E1A\u52A1\u65E0\u7ED1\u5B9A\uFF0C\u53EA\u9700\u8981\u5BF9\u5E95\u5C42\u6570\u636E\u5E93\u8BBF\u95EE\u7684 API \u8FDB\u884C\u5C01\u88C5\u5373\u53EF\uFF0C\u5B9E\u73B0\u4EE3\u4EF7\u8F83\u5C0F\uFF0C\u4E0D\u8DB3\u4E4B\u5904\u5728\u4E8E\u5982\u679C\u6709\u5F88\u591A\u4E8C\u6B21\u8BFB\u53D6\uFF0C\u5C06\u5927\u5927\u589E\u52A0\u4E3B\u673A\u7684\u8BFB\u64CD\u4F5C\u538B\u529B\u3002\u4F8B\u5982\uFF0C\u9ED1\u5BA2\u66B4\u529B\u7834\u89E3\u8D26\u53F7\uFF0C\u4F1A\u5BFC\u81F4\u5927\u91CF\u7684\u4E8C\u6B21\u8BFB\u53D6\u64CD\u4F5C\uFF0C\u4E3B\u673A\u53EF\u80FD\u9876\u4E0D\u4F4F\u8BFB\u64CD\u4F5C\u7684\u538B\u529B\u4ECE\u800C\u5D29\u6E83\u3002</p><ol start="3"><li>\u5173\u952E\u4E1A\u52A1\u8BFB\u5199\u64CD\u4F5C\u5168\u90E8\u6307\u5411\u4E3B\u673A\uFF0C\u975E\u5173\u952E\u4E1A\u52A1\u91C7\u7528\u8BFB\u5199\u5206\u79BB</li></ol><p>\u4F8B\u5982\uFF0C\u5BF9\u4E8E\u4E00\u4E2A\u7528\u6237\u7BA1\u7406\u7CFB\u7EDF\u6765\u8BF4\uFF0C\u6CE8\u518C + \u767B\u5F55\u7684\u4E1A\u52A1\u8BFB\u5199\u64CD\u4F5C\u5168\u90E8\u8BBF\u95EE\u4E3B\u673A\uFF0C\u7528\u6237\u7684\u4ECB\u7ECD\u3001\u7230\u597D\u3001\u7B49\u7EA7\u7B49\u4E1A\u52A1\uFF0C\u53EF\u4EE5\u91C7\u7528\u8BFB\u5199\u5206\u79BB\uFF0C\u56E0\u4E3A\u5373\u4F7F\u7528\u6237\u6539\u4E86\u81EA\u5DF1\u7684\u81EA\u6211\u4ECB\u7ECD\uFF0C\u5728\u67E5\u8BE2\u65F6\u5374\u770B\u5230\u4E86\u81EA\u6211\u4ECB\u7ECD\u8FD8\u662F\u65E7\u7684\uFF0C\u4E1A\u52A1\u5F71\u54CD\u4E0E\u4E0D\u80FD\u767B\u5F55\u76F8\u6BD4\u5C31\u5C0F\u5F88\u591A\uFF0C\u8FD8\u53EF\u4EE5\u5FCD\u53D7\u3002</p><h3 id="_58-\u4F60\u4EEC\u4E00\u822C\u662F\u600E\u4E48\u5206\u5E93\u7684\u5462" tabindex="-1"><a class="header-anchor" href="#_58-\u4F60\u4EEC\u4E00\u822C\u662F\u600E\u4E48\u5206\u5E93\u7684\u5462" aria-hidden="true">#</a> 58.\u4F60\u4EEC\u4E00\u822C\u662F\u600E\u4E48\u5206\u5E93\u7684\u5462\uFF1F</h3><ul><li>\u5782\u76F4\u5206\u5E93\uFF1A\u4EE5\u8868\u4E3A\u4F9D\u636E\uFF0C\u6309\u7167\u4E1A\u52A1\u5F52\u5C5E\u4E0D\u540C\uFF0C\u5C06\u4E0D\u540C\u7684\u8868\u62C6\u5206\u5230\u4E0D\u540C\u7684\u5E93\u4E2D\u3002</li></ul><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-2a43af18-617b-4502-b66a-894c2ff4c6c3.jpg" alt="\u5782\u76F4\u5206\u5E93"></p><ul><li>\u6C34\u5E73\u5206\u5E93\uFF1A\u4EE5\u5B57\u6BB5\u4E3A\u4F9D\u636E\uFF0C\u6309\u7167\u4E00\u5B9A\u7B56\u7565\uFF08hash\u3001range \u7B49\uFF09\uFF0C\u5C06\u4E00\u4E2A\u5E93\u4E2D\u7684\u6570\u636E\u62C6\u5206\u5230\u591A\u4E2A\u5E93\u4E2D\u3002</li></ul><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-debe0fb1-d7f7-4ef2-8c99-13c9377138b6.jpg" alt="\u6C34\u5E73\u5206\u5E93"></p><h3 id="_59-\u90A3\u4F60\u4EEC\u662F\u600E\u4E48\u5206\u8868\u7684" tabindex="-1"><a class="header-anchor" href="#_59-\u90A3\u4F60\u4EEC\u662F\u600E\u4E48\u5206\u8868\u7684" aria-hidden="true">#</a> 59.\u90A3\u4F60\u4EEC\u662F\u600E\u4E48\u5206\u8868\u7684\uFF1F</h3><ul><li>\u6C34\u5E73\u5206\u8868\uFF1A\u4EE5\u5B57\u6BB5\u4E3A\u4F9D\u636E\uFF0C\u6309\u7167\u4E00\u5B9A\u7B56\u7565\uFF08hash\u3001range \u7B49\uFF09\uFF0C\u5C06\u4E00\u4E2A\u8868\u4E2D\u7684\u6570\u636E\u62C6\u5206\u5230\u591A\u4E2A\u8868\u4E2D\u3002</li><li>\u5782\u76F4\u5206\u8868\uFF1A\u4EE5\u5B57\u6BB5\u4E3A\u4F9D\u636E\uFF0C\u6309\u7167\u5B57\u6BB5\u7684\u6D3B\u8DC3\u6027\uFF0C\u5C06\u8868\u4E2D\u5B57\u6BB5\u62C6\u5230\u4E0D\u540C\u7684\u8868\uFF08\u4E3B\u8868\u548C\u6269\u5C55\u8868\uFF09\u4E2D\u3002</li></ul><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-7cba6ce0-c8bb-4f51-9c3b-e5a44e724c79.jpg" alt="\u8868\u62C6\u5206"></p><h3 id="_60-\u6C34\u5E73\u5206\u8868\u6709\u54EA\u51E0\u79CD\u8DEF\u7531\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_60-\u6C34\u5E73\u5206\u8868\u6709\u54EA\u51E0\u79CD\u8DEF\u7531\u65B9\u5F0F" aria-hidden="true">#</a> 60.\u6C34\u5E73\u5206\u8868\u6709\u54EA\u51E0\u79CD\u8DEF\u7531\u65B9\u5F0F\uFF1F</h3><p>\u4EC0\u4E48\u662F\u8DEF\u7531\u5462\uFF1F\u5C31\u662F\u6570\u636E\u5E94\u8BE5\u5206\u5230\u54EA\u4E00\u5F20\u8868\u3002</p><p>\u6C34\u5E73\u5206\u8868\u4E3B\u8981\u6709\u4E09\u79CD\u8DEF\u7531\u65B9\u5F0F\uFF1A</p><ul><li><strong>\u8303\u56F4\u8DEF\u7531</strong>\uFF1A\u9009\u53D6\u6709\u5E8F\u7684\u6570\u636E\u5217 \uFF08\u4F8B\u5982\uFF0C\u6574\u5F62\u3001\u65F6\u95F4\u6233\u7B49\uFF09 \u4F5C\u4E3A\u8DEF\u7531\u7684\u6761\u4EF6\uFF0C\u4E0D\u540C\u5206\u6BB5\u5206\u6563\u5230\u4E0D\u540C\u7684\u6570\u636E\u5E93\u8868\u4E2D\u3002</li></ul><p>\u6211\u4EEC\u53EF\u4EE5\u89C2\u5BDF\u4E00\u4E9B\u652F\u4ED8\u7CFB\u7EDF\uFF0C\u53D1\u73B0\u53EA\u80FD\u67E5\u4E00\u5E74\u8303\u56F4\u5185\u7684\u652F\u4ED8\u8BB0\u5F55\uFF0C\u8FD9\u4E2A\u53EF\u80FD\u5C31\u662F\u652F\u4ED8\u516C\u53F8\u6309\u7167\u65F6\u95F4\u8FDB\u884C\u4E86\u5206\u8868\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-b3882ca3-1d04-44e2-9015-7e6c867255a0.jpg" alt="\u8303\u56F4\u8DEF\u7531"></p><p>\u8303\u56F4\u8DEF\u7531\u8BBE\u8BA1\u7684\u590D\u6742\u70B9\u4E3B\u8981\u4F53\u73B0\u5728\u5206\u6BB5\u5927\u5C0F\u7684\u9009\u53D6\u4E0A\uFF0C\u5206\u6BB5\u592A\u5C0F\u4F1A\u5BFC\u81F4\u5207\u5206\u540E\u5B50\u8868\u6570\u91CF\u8FC7\u591A\uFF0C\u589E\u52A0\u7EF4\u62A4\u590D\u6742\u5EA6\uFF1B\u5206\u6BB5\u592A\u5927\u53EF\u80FD\u4F1A\u5BFC\u81F4\u5355\u8868\u4F9D\u7136\u5B58\u5728\u6027\u80FD\u95EE\u9898\uFF0C\u4E00\u822C\u5EFA\u8BAE\u5206\u6BB5\u5927\u5C0F\u5728 100 \u4E07\u81F3 2000 \u4E07\u4E4B\u95F4\uFF0C\u5177\u4F53\u9700\u8981\u6839\u636E\u4E1A\u52A1\u9009\u53D6\u5408\u9002\u7684\u5206\u6BB5\u5927\u5C0F\u3002</p><p>\u8303\u56F4\u8DEF\u7531\u7684\u4F18\u70B9\u662F\u53EF\u4EE5\u968F\u7740\u6570\u636E\u7684\u589E\u52A0\u5E73\u6ED1\u5730\u6269\u5145\u65B0\u7684\u8868\u3002\u4F8B\u5982\uFF0C\u73B0\u5728\u7684\u7528\u6237\u662F 100 \u4E07\uFF0C\u5982\u679C\u589E\u52A0\u5230 1000 \u4E07\uFF0C\u53EA\u9700\u8981\u589E\u52A0\u65B0\u7684\u8868\u5C31\u53EF\u4EE5\u4E86\uFF0C\u539F\u6709\u7684\u6570\u636E\u4E0D\u9700\u8981\u52A8\u3002\u8303\u56F4\u8DEF\u7531\u7684\u4E00\u4E2A\u6BD4\u8F83\u9690\u542B\u7684\u7F3A\u70B9\u662F\u5206\u5E03\u4E0D\u5747\u5300\uFF0C\u5047\u5982\u6309\u7167 1000 \u4E07\u6765\u8FDB\u884C\u5206\u8868\uFF0C\u6709\u53EF\u80FD\u67D0\u4E2A\u5206\u6BB5\u5B9E\u9645\u5B58\u50A8\u7684\u6570\u636E\u91CF\u53EA\u6709 1000 \u6761\uFF0C\u800C\u53E6\u5916\u4E00\u4E2A\u5206\u6BB5\u5B9E\u9645\u5B58\u50A8\u7684\u6570\u636E\u91CF\u6709 900 \u4E07\u6761\u3002</p><ul><li><strong>Hash \u8DEF\u7531</strong>\uFF1A\u9009\u53D6\u67D0\u4E2A\u5217 \uFF08\u6216\u8005\u67D0\u51E0\u4E2A\u5217\u7EC4\u5408\u4E5F\u53EF\u4EE5\uFF09 \u7684\u503C\u8FDB\u884C Hash \u8FD0\u7B97\uFF0C\u7136\u540E\u6839\u636E Hash \u7ED3\u679C\u5206\u6563\u5230\u4E0D\u540C\u7684\u6570\u636E\u5E93\u8868\u4E2D\u3002</li></ul><p>\u540C\u6837\u4EE5\u8BA2\u5355 id \u4E3A\u4F8B\uFF0C\u5047\u5982\u6211\u4EEC\u4E00\u5F00\u59CB\u5C31\u89C4\u5212\u4E86 4 \u4E2A\u6570\u636E\u5E93\u8868\uFF0C\u8DEF\u7531\u7B97\u6CD5\u53EF\u4EE5\u7B80\u5355\u5730\u7528 id % 4 \u7684\u503C\u6765\u8868\u793A\u6570\u636E\u6240\u5C5E\u7684\u6570\u636E\u5E93\u8868\u7F16\u53F7\uFF0Cid \u4E3A 12 \u7684\u8BA2\u5355\u653E\u5230\u7F16\u53F7\u4E3A 50 \u7684\u5B50\u8868\u4E2D\uFF0Cid \u4E3A 13 \u7684\u8BA2\u5355\u653E\u5230\u7F16\u53F7\u4E3A 61 \u7684\u5B57\u8868\u4E2D\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-e01e7757-c337-48c8-95db-2f7cfd2bc036.jpg" alt="Hash \u8DEF\u7531"></p><p>Hash \u8DEF\u7531\u8BBE\u8BA1\u7684\u590D\u6742\u70B9\u4E3B\u8981\u4F53\u73B0\u5728\u521D\u59CB\u8868\u6570\u91CF\u7684\u9009\u53D6\u4E0A\uFF0C\u8868\u6570\u91CF\u592A\u591A\u7EF4\u62A4\u6BD4\u8F83\u9EBB\u70E6\uFF0C\u8868\u6570\u91CF\u592A\u5C11\u53C8\u53EF\u80FD\u5BFC\u81F4\u5355\u8868\u6027\u80FD\u5B58\u5728\u95EE\u9898\u3002\u800C\u7528\u4E86 Hash \u8DEF\u7531\u540E\uFF0C\u589E\u52A0\u5B50\u8868\u6570\u91CF\u662F\u975E\u5E38\u9EBB\u70E6\u7684\uFF0C\u6240\u6709\u6570\u636E\u90FD\u8981\u91CD\u5206\u5E03\u3002Hash \u8DEF\u7531\u7684\u4F18\u7F3A\u70B9\u548C\u8303\u56F4\u8DEF\u7531\u57FA\u672C\u76F8\u53CD\uFF0CHash \u8DEF\u7531\u7684\u4F18\u70B9\u662F\u8868\u5206\u5E03\u6BD4\u8F83\u5747\u5300\uFF0C\u7F3A\u70B9\u662F\u6269\u5145\u65B0\u7684\u8868\u5F88\u9EBB\u70E6\uFF0C\u6240\u6709\u6570\u636E\u90FD\u8981\u91CD\u5206\u5E03\u3002</p><ul><li><strong>\u914D\u7F6E\u8DEF\u7531</strong>\uFF1A\u914D\u7F6E\u8DEF\u7531\u5C31\u662F\u8DEF\u7531\u8868\uFF0C\u7528\u4E00\u5F20\u72EC\u7ACB\u7684\u8868\u6765\u8BB0\u5F55\u8DEF\u7531\u4FE1\u606F\u3002\u540C\u6837\u4EE5\u8BA2\u5355 id \u4E3A\u4F8B\uFF0C\u6211\u4EEC\u65B0\u589E\u4E00\u5F20 order_router \u8868\uFF0C\u8FD9\u4E2A\u8868\u5305\u542B orderjd \u548C tablejd \u4E24\u5217 , \u6839\u636E orderjd \u5C31\u53EF\u4EE5\u67E5\u8BE2\u5BF9\u5E94\u7684 table_id\u3002</li></ul><p>\u914D\u7F6E\u8DEF\u7531\u8BBE\u8BA1\u7B80\u5355\uFF0C\u4F7F\u7528\u8D77\u6765\u975E\u5E38\u7075\u6D3B\uFF0C\u5C24\u5176\u662F\u5728\u6269\u5145\u8868\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u8FC1\u79FB\u6307\u5B9A\u7684\u6570\u636E\uFF0C\u7136\u540E\u4FEE\u6539\u8DEF\u7531\u8868\u5C31\u53EF\u4EE5\u4E86\u3002</p><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-fcd34332-d38d-455a-875d-d4afd37cac72.jpg" alt="\u914D\u7F6E\u8DEF\u7531"></p><p>\u914D\u7F6E\u8DEF\u7531\u7684\u7F3A\u70B9\u5C31\u662F\u5FC5\u987B\u591A\u67E5\u8BE2\u4E00\u6B21\uFF0C\u4F1A\u5F71\u54CD\u6574\u4F53\u6027\u80FD\uFF1B\u800C\u4E14\u8DEF\u7531\u8868\u672C\u8EAB\u5982\u679C\u592A\u5927\uFF08\u4F8B\u5982\uFF0C\u51E0\u4EBF\u6761\u6570\u636E\uFF09 \uFF0C\u6027\u80FD\u540C\u6837\u53EF\u80FD\u6210\u4E3A\u74F6\u9888\uFF0C\u5982\u679C\u6211\u4EEC\u518D\u6B21\u5C06\u8DEF\u7531\u8868\u5206\u5E93\u5206\u8868\uFF0C\u5219\u53C8\u9762\u4E34\u4E00\u4E2A\u6B7B\u5FAA\u73AF\u5F0F\u7684\u8DEF\u7531\u7B97\u6CD5\u9009\u62E9\u95EE\u9898\u3002</p><h3 id="_61-\u4E0D\u505C\u673A\u6269\u5BB9\u600E\u4E48\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_61-\u4E0D\u505C\u673A\u6269\u5BB9\u600E\u4E48\u5B9E\u73B0" aria-hidden="true">#</a> 61.\u4E0D\u505C\u673A\u6269\u5BB9\u600E\u4E48\u5B9E\u73B0\uFF1F</h3><p>\u5B9E\u9645\u4E0A\uFF0C\u4E0D\u505C\u673A\u6269\u5BB9\uFF0C\u5B9E\u64CD\u8D77\u6765\u662F\u4E2A\u975E\u5E38\u9EBB\u70E6\u800C\u4E14\u5F88\u6709\u98CE\u9669\u7684\u64CD\u4F5C\uFF0C\u5F53\u7136\uFF0C\u9762\u8BD5\u56DE\u7B54\u8D77\u6765\u5C31\u7B80\u5355\u5F88\u591A\u3002</p><ul><li><strong>\u7B2C\u4E00\u9636\u6BB5\uFF1A\u5728\u7EBF\u53CC\u5199\uFF0C\u67E5\u8BE2\u8D70\u8001\u5E93</strong></li></ul><ol><li>\u5EFA\u7ACB\u597D\u65B0\u7684\u5E93\u8868\u7ED3\u6784\uFF0C\u6570\u636E\u5199\u5165\u4E45\u5E93\u7684\u540C\u65F6\uFF0C\u4E5F\u5199\u5165\u62C6\u5206\u7684\u65B0\u5E93</li><li>\u6570\u636E\u8FC1\u79FB\uFF0C\u4F7F\u7528\u6570\u636E\u8FC1\u79FB\u7A0B\u5E8F\uFF0C\u5C06\u65E7\u5E93\u4E2D\u7684\u5386\u53F2\u6570\u636E\u8FC1\u79FB\u5230\u65B0\u5E93</li><li>\u4F7F\u7528\u5B9A\u65F6\u4EFB\u52A1\uFF0C\u65B0\u65E7\u5E93\u7684\u6570\u636E\u5BF9\u6BD4\uFF0C\u628A\u5DEE\u5F02\u8865\u9F50</li></ol><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-2d4d94c9-e816-47fc-93dd-a835b1318099.jpg" alt=""></p><ul><li><strong>\u7B2C\u4E8C\u9636\u6BB5\uFF1A\u5728\u7EBF\u53CC\u5199\uFF0C\u67E5\u8BE2\u8D70\u65B0\u5E93</strong></li></ul><ol><li>\u5B8C\u6210\u4E86\u5386\u53F2\u6570\u636E\u7684\u540C\u6B65\u548C\u6821\u9A8C</li><li>\u628A\u5BF9\u6570\u636E\u7684\u8BFB\u5207\u6362\u5230\u65B0\u5E93</li></ol><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-5cf01486-72c1-4eab-9f6e-a19c31569f46.jpg" alt=""></p><ul><li><strong>\u7B2C\u4E09\u9636\u6BB5\uFF1A\u65E7\u5E93\u4E0B\u7EBF</strong></li></ul><ol><li>\u65E7\u5E93\u4E0D\u518D\u5199\u5165\u65B0\u7684\u6570\u636E</li><li>\u7ECF\u8FC7\u4E00\u6BB5\u65F6\u95F4\uFF0C\u786E\u5B9A\u65E7\u5E93\u6CA1\u6709\u8BF7\u6C42\u4E4B\u540E\uFF0C\u5C31\u53EF\u4EE5\u4E0B\u7EBF\u8001\u5E93</li></ol><p><img src="http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/sidebar/sanfene/mysql-a122d6d5-fff2-4ccd-8ddb-a9282eb2e2da.jpg" alt=""></p><h3 id="_62-\u5E38\u7528\u7684\u5206\u5E93\u5206\u8868\u4E2D\u95F4\u4EF6\u6709\u54EA\u4E9B" tabindex="-1"><a class="header-anchor" href="#_62-\u5E38\u7528\u7684\u5206\u5E93\u5206\u8868\u4E2D\u95F4\u4EF6\u6709\u54EA\u4E9B" aria-hidden="true">#</a> 62.\u5E38\u7528\u7684\u5206\u5E93\u5206\u8868\u4E2D\u95F4\u4EF6\u6709\u54EA\u4E9B\uFF1F</h3><ul><li>sharding-jdbc</li><li>Mycat</li></ul><h3 id="_63-\u90A3\u4F60\u89C9\u5F97\u5206\u5E93\u5206\u8868\u4F1A\u5E26\u6765\u4EC0\u4E48\u95EE\u9898\u5462" tabindex="-1"><a class="header-anchor" href="#_63-\u90A3\u4F60\u89C9\u5F97\u5206\u5E93\u5206\u8868\u4F1A\u5E26\u6765\u4EC0\u4E48\u95EE\u9898\u5462" aria-hidden="true">#</a> 63.\u90A3\u4F60\u89C9\u5F97\u5206\u5E93\u5206\u8868\u4F1A\u5E26\u6765\u4EC0\u4E48\u95EE\u9898\u5462\uFF1F</h3><p>\u4ECE\u5206\u5E93\u7684\u89D2\u5EA6\u6765\u8BB2\uFF1A</p><ul><li><strong>\u4E8B\u52A1\u7684\u95EE\u9898</strong></li></ul><p>\u4F7F\u7528\u5173\u7CFB\u578B\u6570\u636E\u5E93\uFF0C\u6709\u5F88\u5927\u4E00\u70B9\u5728\u4E8E\u5B83\u4FDD\u8BC1\u4E8B\u52A1\u5B8C\u6574\u6027\u3002</p><p>\u800C\u5206\u5E93\u4E4B\u540E\u5355\u673A\u4E8B\u52A1\u5C31\u7528\u4E0D\u4E0A\u4E86\uFF0C\u5FC5\u987B\u4F7F\u7528\u5206\u5E03\u5F0F\u4E8B\u52A1\u6765\u89E3\u51B3\u3002</p><ul><li><strong>\u8DE8\u5E93 JOIN \u95EE\u9898</strong></li></ul><p>\u5728\u4E00\u4E2A\u5E93\u4E2D\u7684\u65F6\u5019\u6211\u4EEC\u8FD8\u53EF\u4EE5\u5229\u7528 JOIN \u6765\u8FDE\u8868\u67E5\u8BE2\uFF0C\u800C\u8DE8\u5E93\u4E86\u4E4B\u540E\u5C31\u65E0\u6CD5\u4F7F\u7528 JOIN \u4E86\u3002</p><p>\u6B64\u65F6\u7684\u89E3\u51B3\u65B9\u6848\u5C31\u662F<strong>\u5728\u4E1A\u52A1\u4EE3\u7801\u4E2D\u8FDB\u884C\u5173\u8054</strong>\uFF0C\u4E5F\u5C31\u662F\u5148\u628A\u4E00\u4E2A\u8868\u7684\u6570\u636E\u67E5\u51FA\u6765\uFF0C\u7136\u540E\u901A\u8FC7\u5F97\u5230\u7684\u7ED3\u679C\u518D\u53BB\u67E5\u53E6\u4E00\u5F20\u8868\uFF0C\u7136\u540E\u5229\u7528\u4EE3\u7801\u6765\u5173\u8054\u5F97\u5230\u6700\u7EC8\u7684\u7ED3\u679C\u3002</p><p>\u8FD9\u79CD\u65B9\u5F0F\u5B9E\u73B0\u8D77\u6765\u7A0D\u5FAE\u6BD4\u8F83\u590D\u6742\uFF0C\u4E0D\u8FC7\u4E5F\u662F\u53EF\u4EE5\u63A5\u53D7\u7684\u3002</p><p>\u8FD8\u6709\u53EF\u4EE5<strong>\u9002\u5F53\u7684\u5197\u4F59\u4E00\u4E9B\u5B57\u6BB5</strong>\u3002\u6BD4\u5982\u4EE5\u524D\u7684\u8868\u5C31\u5B58\u50A8\u4E00\u4E2A\u5173\u8054 ID\uFF0C\u4F46\u662F\u4E1A\u52A1\u65F6\u5E38\u8981\u6C42\u8FD4\u56DE\u5BF9\u5E94\u7684 Name \u6216\u8005\u5176\u4ED6\u5B57\u6BB5\u3002\u8FD9\u65F6\u5019\u5C31\u53EF\u4EE5\u628A\u8FD9\u4E9B\u5B57\u6BB5\u5197\u4F59\u5230\u5F53\u524D\u8868\u4E2D\uFF0C\u6765\u53BB\u9664\u9700\u8981\u5173\u8054\u7684\u64CD\u4F5C\u3002</p><p>\u8FD8\u6709\u4E00\u79CD\u65B9\u5F0F\u5C31\u662F<strong>\u6570\u636E\u5F02\u6784</strong>\uFF0C\u901A\u8FC7 binlog \u540C\u6B65\u7B49\u65B9\u5F0F\uFF0C\u628A\u9700\u8981\u8DE8\u5E93 join \u7684\u6570\u636E\u5F02\u6784\u5230 ES \u7B49\u5B58\u50A8\u7ED3\u6784\u4E2D\uFF0C\u901A\u8FC7 ES \u8FDB\u884C\u67E5\u8BE2\u3002</p><p>\u4ECE\u5206\u8868\u7684\u89D2\u5EA6\u6765\u770B\uFF1A</p><ul><li><strong>\u8DE8\u8282\u70B9\u7684 count,order by,group by \u4EE5\u53CA\u805A\u5408\u51FD\u6570\u95EE\u9898</strong></li></ul><p>\u53EA\u80FD\u7531\u4E1A\u52A1\u4EE3\u7801\u6765\u5B9E\u73B0\u6216\u8005\u7528\u4E2D\u95F4\u4EF6\u5C06\u5404\u8868\u4E2D\u7684\u6570\u636E\u6C47\u603B\u3001\u6392\u5E8F\u3001\u5206\u9875\u7136\u540E\u8FD4\u56DE\u3002</p><ul><li><strong>\u6570\u636E\u8FC1\u79FB\uFF0C\u5BB9\u91CF\u89C4\u5212\uFF0C\u6269\u5BB9\u7B49\u95EE\u9898</strong></li></ul><p>\u6570\u636E\u7684\u8FC1\u79FB\uFF0C\u5BB9\u91CF\u5982\u4F55\u89C4\u5212\uFF0C\u672A\u6765\u662F\u5426\u53EF\u80FD\u518D\u6B21\u9700\u8981\u6269\u5BB9\uFF0C\u7B49\u7B49\uFF0C\u90FD\u662F\u9700\u8981\u8003\u8651\u7684\u95EE\u9898\u3002</p><ul><li><strong>ID \u95EE\u9898</strong></li></ul><p>\u6570\u636E\u5E93\u8868\u88AB\u5207\u5206\u540E\uFF0C\u4E0D\u80FD\u518D\u4F9D\u8D56\u6570\u636E\u5E93\u81EA\u8EAB\u7684\u4E3B\u952E\u751F\u6210\u673A\u5236\uFF0C\u6240\u4EE5\u9700\u8981\u4E00\u4E9B\u624B\u6BB5\u6765\u4FDD\u8BC1\u5168\u5C40\u4E3B\u952E\u552F\u4E00\u3002</p><ol><li>\u8FD8\u662F\u81EA\u589E\uFF0C\u53EA\u4E0D\u8FC7\u81EA\u589E\u6B65\u957F\u8BBE\u7F6E\u4E00\u4E0B\u3002\u6BD4\u5982\u73B0\u5728\u6709\u4E09\u5F20\u8868\uFF0C\u6B65\u957F\u8BBE\u7F6E\u4E3A 3\uFF0C\u4E09\u5F20\u8868 ID \u521D\u59CB\u503C\u5206\u522B\u662F 1\u30012\u30013\u3002\u8FD9\u6837\u7B2C\u4E00\u5F20\u8868\u7684 ID \u589E\u957F\u662F 1\u30014\u30017\u3002\u7B2C\u4E8C\u5F20\u8868\u662F 2\u30015\u30018\u3002\u7B2C\u4E09\u5F20\u8868\u662F 3\u30016\u30019\uFF0C\u8FD9\u6837\u5C31\u4E0D\u4F1A\u91CD\u590D\u4E86\u3002</li><li>UUID\uFF0C\u8FD9\u79CD\u6700\u7B80\u5355\uFF0C\u4F46\u662F\u4E0D\u8FDE\u7EED\u7684\u4E3B\u952E\u63D2\u5165\u4F1A\u5BFC\u81F4\u4E25\u91CD\u7684\u9875\u5206\u88C2\uFF0C\u6027\u80FD\u6BD4\u8F83\u5DEE\u3002</li><li>\u5206\u5E03\u5F0F ID\uFF0C\u6BD4\u8F83\u51FA\u540D\u7684\u5C31\u662F Twitter \u5F00\u6E90\u7684 sonwflake \u96EA\u82B1\u7B97\u6CD5</li></ol><h2 id="\u8FD0\u7EF4" tabindex="-1"><a class="header-anchor" href="#\u8FD0\u7EF4" aria-hidden="true">#</a> \u8FD0\u7EF4</h2><h3 id="_64-\u767E\u4E07\u7EA7\u522B\u4EE5\u4E0A\u7684\u6570\u636E\u5982\u4F55\u5220\u9664" tabindex="-1"><a class="header-anchor" href="#_64-\u767E\u4E07\u7EA7\u522B\u4EE5\u4E0A\u7684\u6570\u636E\u5982\u4F55\u5220\u9664" aria-hidden="true">#</a> 64.\u767E\u4E07\u7EA7\u522B\u4EE5\u4E0A\u7684\u6570\u636E\u5982\u4F55\u5220\u9664\uFF1F</h3><p>\u5173\u4E8E\u7D22\u5F15\uFF1A\u7531\u4E8E\u7D22\u5F15\u9700\u8981\u989D\u5916\u7684\u7EF4\u62A4\u6210\u672C\uFF0C\u56E0\u4E3A\u7D22\u5F15\u6587\u4EF6\u662F\u5355\u72EC\u5B58\u5728\u7684\u6587\u4EF6,\u6240\u4EE5\u5F53\u6211\u4EEC\u5BF9\u6570\u636E\u7684\u589E\u52A0,\u4FEE\u6539,\u5220\u9664,\u90FD\u4F1A\u4EA7\u751F\u989D\u5916\u7684\u5BF9\u7D22\u5F15\u6587\u4EF6\u7684\u64CD\u4F5C,\u8FD9\u4E9B\u64CD\u4F5C\u9700\u8981\u6D88\u8017\u989D\u5916\u7684 IO,\u4F1A\u964D\u4F4E\u589E/\u6539/\u5220\u7684\u6267\u884C\u6548\u7387\u3002</p><p>\u6240\u4EE5\uFF0C\u5728\u6211\u4EEC\u5220\u9664\u6570\u636E\u5E93\u767E\u4E07\u7EA7\u522B\u6570\u636E\u7684\u65F6\u5019\uFF0C\u67E5\u8BE2 MySQL \u5B98\u65B9\u624B\u518C\u5F97\u77E5\u5220\u9664\u6570\u636E\u7684\u901F\u5EA6\u548C\u521B\u5EFA\u7684\u7D22\u5F15\u6570\u91CF\u662F\u6210\u6B63\u6BD4\u7684\u3002</p><ol><li>\u6240\u4EE5\u6211\u4EEC\u60F3\u8981\u5220\u9664\u767E\u4E07\u6570\u636E\u7684\u65F6\u5019\u53EF\u4EE5\u5148\u5220\u9664\u7D22\u5F15</li><li>\u7136\u540E\u5220\u9664\u5176\u4E2D\u65E0\u7528\u6570\u636E</li><li>\u5220\u9664\u5B8C\u6210\u540E\u91CD\u65B0\u521B\u5EFA\u7D22\u5F15\u521B\u5EFA\u7D22\u5F15\u4E5F\u975E\u5E38\u5FEB</li></ol><h3 id="_65-\u767E\u4E07\u5343\u4E07\u7EA7\u5927\u8868\u5982\u4F55\u6DFB\u52A0\u5B57\u6BB5" tabindex="-1"><a class="header-anchor" href="#_65-\u767E\u4E07\u5343\u4E07\u7EA7\u5927\u8868\u5982\u4F55\u6DFB\u52A0\u5B57\u6BB5" aria-hidden="true">#</a> 65.\u767E\u4E07\u5343\u4E07\u7EA7\u5927\u8868\u5982\u4F55\u6DFB\u52A0\u5B57\u6BB5\uFF1F</h3><p>\u5F53\u7EBF\u4E0A\u7684\u6570\u636E\u5E93\u6570\u636E\u91CF\u5230\u8FBE\u51E0\u767E\u4E07\u3001\u4E0A\u5343\u4E07\u7684\u65F6\u5019\uFF0C\u52A0\u4E00\u4E2A\u5B57\u6BB5\u5C31\u6CA1\u90A3\u4E48\u7B80\u5355\uFF0C\u56E0\u4E3A\u53EF\u80FD\u4F1A\u957F\u65F6\u95F4\u9501\u8868\u3002</p><p>\u5927\u8868\u6DFB\u52A0\u5B57\u6BB5\uFF0C\u901A\u5E38\u6709\u8FD9\u4E9B\u505A\u6CD5\uFF1A</p><ul><li>\u901A\u8FC7\u4E2D\u95F4\u8868\u8F6C\u6362\u8FC7\u53BB</li></ul><p>\u521B\u5EFA\u4E00\u4E2A\u4E34\u65F6\u7684\u65B0\u8868\uFF0C\u628A\u65E7\u8868\u7684\u7ED3\u6784\u5B8C\u5168\u590D\u5236\u8FC7\u53BB\uFF0C\u6DFB\u52A0\u5B57\u6BB5\uFF0C\u518D\u628A\u65E7\u8868\u6570\u636E\u590D\u5236\u8FC7\u53BB\uFF0C\u5220\u9664\u65E7\u8868\uFF0C\u65B0\u8868\u547D\u540D\u4E3A\u65E7\u8868\u7684\u540D\u79F0\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u53EF\u80FD\u56DE\u4E22\u6389\u4E00\u4E9B\u6570\u636E\u3002</p><ul><li>\u7528 pt-online-schema-change</li></ul><p><code>pt-online-schema-change</code>\u662F percona \u516C\u53F8\u5F00\u53D1\u7684\u4E00\u4E2A\u5DE5\u5177\uFF0C\u5B83\u53EF\u4EE5\u5728\u7EBF\u4FEE\u6539\u8868\u7ED3\u6784\uFF0C\u5B83\u7684\u539F\u7406\u4E5F\u662F\u901A\u8FC7\u4E2D\u95F4\u8868\u3002</p><ul><li>\u5148\u5728\u4ECE\u5E93\u6DFB\u52A0 \u518D\u8FDB\u884C\u4E3B\u4ECE\u5207\u6362</li></ul><p>\u5982\u679C\u4E00\u5F20\u8868\u6570\u636E\u91CF\u5927\u4E14\u662F\u70ED\u8868\uFF08\u8BFB\u5199\u7279\u522B\u9891\u7E41\uFF09\uFF0C\u5219\u53EF\u4EE5\u8003\u8651\u5148\u5728\u4ECE\u5E93\u6DFB\u52A0\uFF0C\u518D\u8FDB\u884C\u4E3B\u4ECE\u5207\u6362\uFF0C\u5207\u6362\u540E\u518D\u5C06\u5176\u4ED6\u51E0\u4E2A\u8282\u70B9\u4E0A\u6DFB\u52A0\u5B57\u6BB5\u3002</p><h3 id="_66-mysql-\u6570\u636E\u5E93-cpu-\u98D9\u5347\u7684\u8BDD-\u8981\u600E\u4E48\u5904\u7406\u5462" tabindex="-1"><a class="header-anchor" href="#_66-mysql-\u6570\u636E\u5E93-cpu-\u98D9\u5347\u7684\u8BDD-\u8981\u600E\u4E48\u5904\u7406\u5462" aria-hidden="true">#</a> 66.MySQL \u6570\u636E\u5E93 cpu \u98D9\u5347\u7684\u8BDD\uFF0C\u8981\u600E\u4E48\u5904\u7406\u5462\uFF1F</h3><p>\u6392\u67E5\u8FC7\u7A0B\uFF1A</p><p>\uFF081\uFF09\u4F7F\u7528 top \u547D\u4EE4\u89C2\u5BDF\uFF0C\u786E\u5B9A\u662F mysqld \u5BFC\u81F4\u8FD8\u662F\u5176\u4ED6\u539F\u56E0\u3002</p><p>\uFF082\uFF09\u5982\u679C\u662F mysqld \u5BFC\u81F4\u7684\uFF0Cshow processlist\uFF0C\u67E5\u770B session \u60C5\u51B5\uFF0C\u786E\u5B9A\u662F\u4E0D\u662F\u6709\u6D88\u8017\u8D44\u6E90\u7684 sql \u5728\u8FD0\u884C\u3002</p><p>\uFF083\uFF09\u627E\u51FA\u6D88\u8017\u9AD8\u7684 sql\uFF0C\u770B\u770B\u6267\u884C\u8BA1\u5212\u662F\u5426\u51C6\u786E\uFF0C \u7D22\u5F15\u662F\u5426\u7F3A\u5931\uFF0C\u6570\u636E\u91CF\u662F\u5426\u592A\u5927\u3002</p><p>\u5904\u7406\uFF1A</p><p>\uFF081\uFF09kill \u6389\u8FD9\u4E9B\u7EBF\u7A0B (\u540C\u65F6\u89C2\u5BDF cpu \u4F7F\u7528\u7387\u662F\u5426\u4E0B\u964D)\uFF0C</p><p>\uFF082\uFF09\u8FDB\u884C\u76F8\u5E94\u7684\u8C03\u6574 (\u6BD4\u5982\u8BF4\u52A0\u7D22\u5F15\u3001\u6539 sql\u3001\u6539\u5185\u5B58\u53C2\u6570)</p><p>\uFF083\uFF09\u91CD\u65B0\u8DD1\u8FD9\u4E9B SQL\u3002</p><p>\u5176\u4ED6\u60C5\u51B5\uFF1A</p><p>\u4E5F\u6709\u53EF\u80FD\u662F\u6BCF\u4E2A sql \u6D88\u8017\u8D44\u6E90\u5E76\u4E0D\u591A\uFF0C\u4F46\u662F\u7A81\u7136\u4E4B\u95F4\uFF0C\u6709\u5927\u91CF\u7684 session \u8FDE\u8FDB\u6765\u5BFC\u81F4 cpu \u98D9\u5347\uFF0C\u8FD9\u79CD\u60C5\u51B5\u5C31\u9700\u8981\u8DDF\u5E94\u7528\u4E00\u8D77\u6765\u5206\u6790\u4E3A\u4F55\u8FDE\u63A5\u6570\u4F1A\u6FC0\u589E\uFF0C\u518D\u505A\u51FA\u76F8\u5E94\u7684\u8C03\u6574\uFF0C\u6BD4\u5982\u8BF4\u9650\u5236\u8FDE\u63A5\u6570\u7B49</p><hr><p><em>\u6CA1\u6709\u4EC0\u4E48\u4F7F\u6211\u505C\u7559\u2014\u2014\u9664\u4E86\u76EE\u7684\uFF0C\u7EB5\u7136\u5CB8\u65C1\u6709\u73AB\u7470\u3001\u6709\u7EFF\u836B\u3001\u6709\u5B81\u9759\u7684\u6E2F\u6E7E\uFF0C\u6211\u662F\u4E0D\u7CFB\u4E4B\u821F</em>\u3002</p><p><strong>\u7CFB\u5217\u5185\u5BB9</strong>\uFF1A</p>`,552),h={href:"https://tobebetterjavaer.com/sidebar/sanfene/javase.html",target:"_blank",rel:"noopener noreferrer"},g={href:"https://tobebetterjavaer.com/sidebar/sanfene/javathread.html",target:"_blank",rel:"noopener noreferrer"},u={href:"https://tobebetterjavaer.com/sidebar/sanfene/collection.html",target:"_blank",rel:"noopener noreferrer"},m={href:"https://tobebetterjavaer.com/sidebar/sanfene/jvm.html",target:"_blank",rel:"noopener noreferrer"},f={href:"https://tobebetterjavaer.com/sidebar/sanfene/spring.html",target:"_blank",rel:"noopener noreferrer"},_={href:"https://tobebetterjavaer.com/sidebar/sanfene/redis.html",target:"_blank",rel:"noopener noreferrer"},y={href:"https://tobebetterjavaer.com/sidebar/sanfene/mybatis.html",target:"_blank",rel:"noopener noreferrer"},v={href:"https://tobebetterjavaer.com/sidebar/sanfene/mysql.html",target:"_blank",rel:"noopener noreferrer"},j={href:"https://tobebetterjavaer.com/sidebar/sanfene/os.html",target:"_blank",rel:"noopener noreferrer"},x={href:"https://tobebetterjavaer.com/sidebar/sanfene/network.html",target:"_blank",rel:"noopener noreferrer"},L={href:"https://tobebetterjavaer.com/sidebar/sanfene/rocketmq.html",target:"_blank",rel:"noopener noreferrer"},q=e("hr",null,null,-1),M={href:"https://mp.weixin.qq.com/s/JFjFs_7xduCmHOegbJ-Gbg",target:"_blank",rel:"noopener noreferrer"},S={href:"https://mp.weixin.qq.com/s/zSTyZ-8CFalwAYSB0PN6wA",target:"_blank",rel:"noopener noreferrer"};function I(B,D){const t=n("ExternalLinkIcon");return l(),o("div",null,[e("blockquote",null,[e("p",null,[a("\u56FE\u6587\u8BE6\u89E3 66 \u9053 MySQL \u9762\u8BD5\u9AD8\u9891\u9898\uFF0C\u8FD9\u6B21\u540A\u6253\u9762\u8BD5\u5B98\uFF0C\u6211\u89C9\u5F97\u7A33\u4E86\uFF08\u624B\u52A8 dog\uFF09\u3002\u6574\u7406\uFF1Amusk\uFF0C\u6233"),e("a",c,[a("\u8F6C\u8F7D\u94FE\u63A5"),r(t)]),a("\uFF0C\u4F5C\u8005\uFF1A\u4E09\u5206\u6076\uFF0C\u6233"),e("a",p,[a("\u539F\u6587\u94FE\u63A5"),r(t)]),a("\u3002")])]),b,e("ul",null,[e("li",null,[e("a",h,[a("\u9762\u8BD5\u9006\u88AD Java SE \u7BC7\u{1F44D}"),r(t)])]),e("li",null,[e("a",g,[a("\u9762\u8BD5\u9006\u88AD Java \u96C6\u5408\u6846\u67B6\u7BC7\u{1F44D}"),r(t)])]),e("li",null,[e("a",u,[a("\u9762\u8BD5\u9006\u88AD Java \u5E76\u53D1\u7F16\u7A0B\u7BC7\u{1F44D}"),r(t)])]),e("li",null,[e("a",m,[a("\u9762\u8BD5\u9006\u88AD JVM \u7BC7\u{1F44D}"),r(t)])]),e("li",null,[e("a",f,[a("\u9762\u8BD5\u9006\u88AD Spring \u7BC7\u{1F44D}"),r(t)])]),e("li",null,[e("a",_,[a("\u9762\u8BD5\u9006\u88AD Redis \u7BC7\u{1F44D}"),r(t)])]),e("li",null,[e("a",y,[a("\u9762\u8BD5\u9006\u88AD MyBatis \u7BC7\u{1F44D}"),r(t)])]),e("li",null,[e("a",v,[a("\u9762\u8BD5\u9006\u88AD MySQL \u7BC7\u{1F44D}"),r(t)])]),e("li",null,[e("a",j,[a("\u9762\u8BD5\u9006\u88AD\u64CD\u4F5C\u7CFB\u7EDF\u7BC7\u{1F44D}"),r(t)])]),e("li",null,[e("a",x,[a("\u9762\u8BD5\u9006\u88AD\u8BA1\u7B97\u673A\u7F51\u7EDC\u7BC7\u{1F44D}"),r(t)])]),e("li",null,[e("a",L,[a("\u9762\u8BD5\u9006\u88ADRocketMQ\u7BC7\u{1F44D}"),r(t)])])]),q,e("blockquote",null,[e("p",null,[a("\u56FE\u6587\u8BE6\u89E3 66 \u9053 MySQL \u9762\u8BD5\u9AD8\u9891\u9898\uFF0C\u8FD9\u6B21\u540A\u6253\u9762\u8BD5\u5B98\uFF0C\u6211\u89C9\u5F97\u7A33\u4E86\uFF08\u624B\u52A8 dog\uFF09\u3002\u6574\u7406\uFF1Amusk\uFF0C\u6233"),e("a",M,[a("\u8F6C\u8F7D\u94FE\u63A5"),r(t)]),a("\uFF0C\u4F5C\u8005\uFF1A\u4E09\u5206\u6076\uFF0C\u6233"),e("a",S,[a("\u539F\u6587\u94FE\u63A5"),r(t)]),a("\u3002")])])])}const R=i(s,[["render",I],["__file","mysql.html.vue"]]);export{R as default};
