import{_ as a}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as e,c as t,a as n,b as p,d as o,f as c,r as i}from"./app.7c2c1c79.js";const l={},u=c(`<h1 id="\u524D\u540E\u7AEF\u5206\u79BB\u9879\u76EE\u8DE8\u57DF\u89E3\u51B3" tabindex="-1"><a class="header-anchor" href="#\u524D\u540E\u7AEF\u5206\u79BB\u9879\u76EE\u8DE8\u57DF\u89E3\u51B3" aria-hidden="true">#</a> \u524D\u540E\u7AEF\u5206\u79BB\u9879\u76EE\u8DE8\u57DF\u89E3\u51B3</h1><h2 id="_1-\u4EC0\u4E48\u662F\u8DE8\u57DF" tabindex="-1"><a class="header-anchor" href="#_1-\u4EC0\u4E48\u662F\u8DE8\u57DF" aria-hidden="true">#</a> 1. \u4EC0\u4E48\u662F\u8DE8\u57DF</h2><blockquote><p><strong>\u8DE8\u57DF</strong>\u662F\u6307 \u4E0D\u540C\u57DF\u540D\u4E4B\u95F4\u76F8\u4E92\u8BBF\u95EE\u3002\u5373\u6D4F\u89C8\u5668\u63A7\u5236\u5F53\u524D\u7F51\u9875\u4E0B\u4E0D\u80FD\u6267\u884C\u5176\u4ED6\u7F51\u7AD9\u7684\u811A\u672C\uFF0C\u8FD9\u662F\u7531\u6D4F\u89C8\u5668\u7684\u540C\u6E90\u7B56\u7565\u9020\u6210\u7684\uFF0C\u662F\u6D4F\u89C8\u5668\u5BF9JavaScript\u65BD\u52A0\u7684\u5B89\u5168\u9650\u5236\u3002</p></blockquote><p>\u4E5F\u5C31\u662F\u5982\u679C\u5728A\u7F51\u7AD9\u4E2D\uFF0C\u6211\u4EEC\u5E0C\u671B\u4F7F\u7528Ajax\u6765\u83B7\u5F97B\u7F51\u7AD9\u4E2D\u7684\u7279\u5B9A\u5185\u5BB9 \u5982\u679CA\u7F51\u7AD9\u4E0EB\u7F51\u7AD9\u4E0D\u5728\u540C\u4E00\u4E2A\u57DF\u4E2D\uFF0C\u90A3\u4E48\u5C31\u51FA\u73B0\u4E86\u8DE8\u57DF\u8BBF\u95EE\u95EE\u9898\u3002</p><p><strong>\u8DE8\u57DF\u7684\u5B89\u5168\u9650\u5236\u90FD\u662F\u5BF9\u6D4F\u89C8\u5668\u7AEF\u6765\u8BF4\u7684\uFF0C\u670D\u52A1\u5668\u7AEF\u662F\u4E0D\u5B58\u5728\u8DE8\u57DF\u5B89\u5168\u9650\u5236\u7684\u3002</strong></p><h2 id="_2-\u540C\u6E90\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#_2-\u540C\u6E90\u7B56\u7565" aria-hidden="true">#</a> 2. \u540C\u6E90\u7B56\u7565</h2><p>\u540C\u6E90\u7B56\u7565/SOP\uFF08Same origin policy\uFF09\u662F\u4E00\u79CD\u7EA6\u5B9A\uFF0C\u7531Netscape\u516C\u53F81995\u5E74\u5F15\u5165\u6D4F\u89C8\u5668\uFF0C\u5B83\u662F\u6D4F\u89C8\u5668\u6700\u6838\u5FC3\u4E5F\u6700\u57FA\u672C\u7684\u5B89\u5168\u529F\u80FD\uFF0C\u5982\u679C\u7F3A\u5C11\u4E86\u540C\u6E90\u7B56\u7565\uFF0C\u6D4F\u89C8\u5668\u5F88\u5BB9\u6613\u53D7\u5230XSS\u3001CSFR\u7B49\u653B\u51FB\u3002\u6240\u8C13\u540C\u6E90\u662F\u6307&quot;\u534F\u8BAE+\u57DF\u540D+\u7AEF\u53E3&quot;\u4E09\u8005\u76F8\u540C\uFF0C\u5373\u4FBF\u4E24\u4E2A\u4E0D\u540C\u7684\u57DF\u540D\u6307\u5411\u540C\u4E00\u4E2Aip\u5730\u5740\uFF0C\u4E5F\u975E\u540C\u6E90\u3002 \u524D\u7AEF\u53D1\u8D77\u7684\u8BF7\u6C42\u53EA\u8981\u4E0D\u7B26\u5408\u540C\u6E90\u7B56\u7565\u5C31\u4F1A\u51FA\u73B0\u8DE8\u57DF\u95EE\u9898\u3002</p><p><strong>\u6848\u4F8B\u5206\u6790</strong></p><p><img src="https://abelsun-1256449468.cos.ap-beijing.myqcloud.com/image/image-20211017111604402.png" alt="image-20211017111604402"></p><h2 id="_3-\u4E3A\u4EC0\u4E48\u524D\u540E\u7AEF\u5206\u79BB\u540E\u4F1A\u5BFC\u81F4\u8DE8\u57DF\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_3-\u4E3A\u4EC0\u4E48\u524D\u540E\u7AEF\u5206\u79BB\u540E\u4F1A\u5BFC\u81F4\u8DE8\u57DF\u95EE\u9898" aria-hidden="true">#</a> 3. \u4E3A\u4EC0\u4E48\u524D\u540E\u7AEF\u5206\u79BB\u540E\u4F1A\u5BFC\u81F4\u8DE8\u57DF\u95EE\u9898\uFF1F</h2><p>\u524D\u540E\u7AEF\u5206\u79BB\u540E\uFF0C\u524D\u7AEF\u4EE3\u7801\u548C\u540E\u7AEF\u4EE3\u7801\u90FD\u662F\u72EC\u7ACB\u90E8\u7F72\u7684\uFF0C\u4E00\u822C\u524D\u7AEF\u91C7\u7528Nginx\u4F5C\u4E3Aweb\u670D\u52A1\u5668\u90E8\u7F72\uFF0C\u540E\u7AEFspring boot\u7531\u4E8E\u5185\u7F6E\u4E86tomcat\uFF0C\u4E00\u822C\u90FD\u662F\u901A\u8FC7jar\u5305\u76F4\u63A5\u542F\u52A8\u3002</p><ul><li>\u5047\u8BBE\u524D\u540E\u7AEF\u90E8\u7F72\u5728\u540C\u4E00\u53F0\u670D\u52A1\u5668\u4E0A\uFF0C\u90A3\u4E482\u8005\u8BBF\u95EE\u7684\u7AEF\u53E3\u5FC5\u5B9A\u4E0D\u4E00\u81F4\uFF0C\u4E0D\u7B26\u5408\u540C\u6E90\u7B56\u7565\uFF0C\u6240\u4EE5\u51FA\u73B0\u8DE8\u57DF\u95EE\u9898\u3002</li><li>\u5982\u679C\u524D\u540E\u7AEF\u90E8\u7F72\u5728\u4E0D\u540C\u670D\u52A1\u5668\u4E0A\uFF0C\u90A3\u4E48\u8BBF\u95EE\u7684ip\u6216\u8005\u57DF\u540D\u5FC5\u7136\u4E0D\u4E00\u81F4\uFF0C\u4E5F\u4F1A\u51FA\u73B0\u8DE8\u57DF\u95EE\u9898\u3002</li></ul><h2 id="_4-\u89E3\u51B3" tabindex="-1"><a class="header-anchor" href="#_4-\u89E3\u51B3" aria-hidden="true">#</a> 4. \u89E3\u51B3</h2><h3 id="_4-1-\u5229\u7528nginx\u89E3\u51B3\u8DE8\u57DF" tabindex="-1"><a class="header-anchor" href="#_4-1-\u5229\u7528nginx\u89E3\u51B3\u8DE8\u57DF" aria-hidden="true">#</a> 4.1 \u5229\u7528Nginx\u89E3\u51B3\u8DE8\u57DF</h3><p>\u901A\u8FC7\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\u76D1\u542C\u540C\u7AEF\u53E3\uFF0C\u540C\u57DF\u540D\u7684\u8BBF\u95EE\uFF0C\u4E0D\u540C\u8DEF\u5F84\u6620\u5C04\u5230\u4E0D\u540C\u7684\u5730\u5740\uFF0C\u6BD4\u5982\uFF0C\u5728nginx\u670D\u52A1\u5668\u4E2D\uFF0C\u76D1\u542C\u540C\u4E00\u4E2A\u57DF\u540D\u548C\u7AEF\u53E3\uFF0C\u4E0D\u540C\u8DEF\u5F84\u8F6C\u53D1\u5230\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\uFF0C\u628A\u4E0D\u540C\u7AEF\u53E3\u548C\u57DF\u540D\u7684\u9650\u5236\u901A\u8FC7\u53CD\u5411\u4EE3\u7406\uFF0C\u6765\u89E3\u51B3\u8DE8\u57DF\u7684\u95EE\u9898\u3002</p><p>\u901A\u8FC7Nginx\u53CD\u5411\u4EE3\u7406\uFF0C\u5C06\u8DE8\u57DF\u8BF7\u6C42\u8F6C\u53D8\u4E3A\u975E\u8DE8\u57DF\u8BF7\u6C42\uFF0C\u4E0D\u540C\u8BF7\u6C42\u8DEF\u5F84\u4EE3\u7406\u5230\u4E0D\u540C\u7684\u5730\u5740\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>          <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span>     www.mysite.com</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token comment">#allow all;</span>
            <span class="token directive"><span class="token keyword">root</span>   /mysite/my-web/</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token directive"><span class="token keyword">location</span> /prod-api/</span> <span class="token punctuation">{</span>
            <span class="token comment">#allow all;</span>
            <span class="token directive"><span class="token keyword">rewrite</span>  ^/prod-api/(.*)$ /<span class="token variable">$1</span> break</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span> http://localhost:9602</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-\u670D\u52A1\u7AEF\u4E0D\u8BBE\u7F6E\u8DE8\u57DF" tabindex="-1"><a class="header-anchor" href="#_4-2-\u670D\u52A1\u7AEF\u4E0D\u8BBE\u7F6E\u8DE8\u57DF" aria-hidden="true">#</a> 4.2 \u670D\u52A1\u7AEF\u4E0D\u8BBE\u7F6E\u8DE8\u57DF</h3><p>\u8FDD\u6CD5\u4E86\u8DE8\u57DF\u539F\u5219\uFF0C\u4E0D\u5B89\u5168\u3002\u4F46\u662F\u975E\u5E38\u597D\u7528\uFF0C\u5FEB\u901F\u89E3\u51B3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>cors<span class="token punctuation">.</span></span><span class="token class-name">CorsConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>cors<span class="token punctuation">.</span></span><span class="token class-name">UrlBasedCorsConfigurationSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">CorsFilter</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CorsConfig</span> <span class="token punctuation">{</span>


    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">CorsFilter</span> <span class="token function">corsFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">CorsConfiguration</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorsConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        config<span class="token punctuation">.</span><span class="token function">setAllowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// SpringBoot 2.4.0\u540E \u6B64\u65B9\u6CD5\u5DF2\u5931\u6548</span>
<span class="token comment">//        config.setAllowedOrigins(Arrays.asList(&quot;*&quot;)); //http:www.a.com</span>
        <span class="token comment">// \u65B0\u7248\u672C\u7684springboot \u91C7\u7528\u6B64\u65B9\u6CD5</span>
        config<span class="token punctuation">.</span><span class="token function">setAllowedOriginPatterns</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setAllowedHeaders</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setAllowedMethods</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">300L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        source<span class="token punctuation">.</span><span class="token function">registerCorsConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CorsFilter</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u53C2\u8003\u6587\u7AE0" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u6587\u7AE0" aria-hidden="true">#</a> \u53C2\u8003\u6587\u7AE0</h2>`,21),r={href:"https://blog.csdn.net/w1014074794/article/details/106226429",target:"_blank",rel:"noopener noreferrer"};function d(k,m){const s=i("ExternalLinkIcon");return e(),t("div",null,[u,n("p",null,[n("a",r,[p("Spring boot\u524D\u540E\u7AEF\u5206\u79BB\u540E\uFF0C\u8DE8\u57DF\u95EE\u9898\u600E\u4E48\u89E3\u51B3\uFF1F"),o(s)])])])}const g=a(l,[["render",d],["__file","fe-lib-cross-domain.html.vue"]]);export{g as default};
