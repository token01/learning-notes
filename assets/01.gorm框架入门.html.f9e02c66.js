import{_ as t}from"./_plugin-vue_export-helper.cdc0426e.js";import{o,c as i,a as n,b as s,d as e,f as p,r as l}from"./app.09fc910f.js";const c={},d=n("h1",{id:"_01-gorm\u6846\u67B6\u5165\u95E8",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_01-gorm\u6846\u67B6\u5165\u95E8","aria-hidden":"true"},"#"),s(" 01.gorm\u6846\u67B6\u5165\u95E8")],-1),u=n("p",null,"gorm\u662F\u4E00\u4E2A\u4F7F\u7528Go\u8BED\u8A00\u7F16\u5199\u7684ORM\u6846\u67B6\u3002\u5B83\u6587\u6863\u9F50\u5168\uFF0C\u5BF9\u5F00\u53D1\u8005\u53CB\u597D\uFF0C\u652F\u6301\u4E3B\u6D41\u6570\u636E\u5E93\u3002",-1),r=n("h2",{id:"_1-gorm\u4ECB\u7ECD",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-gorm\u4ECB\u7ECD","aria-hidden":"true"},"#"),s(" 1\uFF0Cgorm\u4ECB\u7ECD")],-1),m={href:"https://github.com/jinzhu/gorm",target:"_blank",rel:"noopener noreferrer"},k={href:"https://gorm.io/zh_CN/",target:"_blank",rel:"noopener noreferrer"},v=p(`<h2 id="_2-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_2-\u5B89\u88C5" aria-hidden="true">#</a> 2\uFF0C\u5B89\u88C5</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>go get <span class="token parameter variable">-u</span> github.com/jinzhu/gorm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3-\u8FDE\u63A5\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_3-\u8FDE\u63A5\u6570\u636E\u5E93" aria-hidden="true">#</a> 3\uFF0C\u8FDE\u63A5\u6570\u636E\u5E93</h2><p>\u8FDE\u63A5\u4E0D\u540C\u7684\u6570\u636E\u5E93\u90FD\u9700\u8981\u5BFC\u5165\u5BF9\u5E94\u6570\u636E\u7684\u9A71\u52A8\u7A0B\u5E8F\uFF0C<code>GORM</code>\u5DF2\u7ECF\u8D34\u5FC3\u7684\u4E3A\u6211\u4EEC\u5305\u88C5\u4E86\u4E00\u4E9B\u9A71\u52A8\u7A0B\u5E8F\uFF0C\u53EA\u9700\u8981\u6309\u5982\u4E0B\u65B9\u5F0F\u5BFC\u5165\u9700\u8981\u7684\u6570\u636E\u5E93\u9A71\u52A8\u5373\u53EF\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token boolean">_</span> <span class="token string">&quot;github.com/jinzhu/gorm/dialects/mysql&quot;</span>
<span class="token comment">// import _ &quot;github.com/jinzhu/gorm/dialects/postgres&quot;</span>
<span class="token comment">// import _ &quot;github.com/jinzhu/gorm/dialects/sqlite&quot;</span>
<span class="token comment">// import _ &quot;github.com/jinzhu/gorm/dialects/mssql&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-\u8FDE\u63A5mysql" tabindex="-1"><a class="header-anchor" href="#_1-\u8FDE\u63A5mysql" aria-hidden="true">#</a> 1\uFF0C\u8FDE\u63A5MySQL</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;github.com/jinzhu/gorm&quot;</span>
  <span class="token boolean">_</span> <span class="token string">&quot;github.com/jinzhu/gorm/dialects/mysql&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  db<span class="token punctuation">,</span> err <span class="token operator">:=</span> gorm<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;mysql&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;user:password@(localhost)/dbname?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">defer</span> db<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-\u8FDE\u63A5postgresql" tabindex="-1"><a class="header-anchor" href="#_2-\u8FDE\u63A5postgresql" aria-hidden="true">#</a> 2\uFF0C\u8FDE\u63A5PostgreSQL</h3><p>\u57FA\u672C\u4EE3\u7801\u540C\u4E0A\uFF0C\u6CE8\u610F\u5F15\u5165\u5BF9\u5E94<code>postgres</code>\u9A71\u52A8\u5E76\u6B63\u786E\u6307\u5B9A<code>gorm.Open()</code>\u53C2\u6570\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;github.com/jinzhu/gorm&quot;</span>
  <span class="token boolean">_</span> <span class="token string">&quot;github.com/jinzhu/gorm/dialects/postgres&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  db<span class="token punctuation">,</span> err <span class="token operator">:=</span> gorm<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;host=myhost port=myport user=gorm dbname=gorm password=mypassword&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">defer</span> db<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u8FDE\u63A5sqlite3" tabindex="-1"><a class="header-anchor" href="#_3-\u8FDE\u63A5sqlite3" aria-hidden="true">#</a> 3\uFF0C\u8FDE\u63A5Sqlite3</h3><p>\u57FA\u672C\u4EE3\u7801\u540C\u4E0A\uFF0C\u6CE8\u610F\u5F15\u5165\u5BF9\u5E94<code>sqlite</code>\u9A71\u52A8\u5E76\u6B63\u786E\u6307\u5B9A<code>gorm.Open()</code>\u53C2\u6570\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;github.com/jinzhu/gorm&quot;</span>
  <span class="token boolean">_</span> <span class="token string">&quot;github.com/jinzhu/gorm/dialects/sqlite&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  db<span class="token punctuation">,</span> err <span class="token operator">:=</span> gorm<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;sqlite3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/tmp/gorm.db&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">defer</span> db<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-\u8FDE\u63A5sql-server" tabindex="-1"><a class="header-anchor" href="#_4-\u8FDE\u63A5sql-server" aria-hidden="true">#</a> 4\uFF0C\u8FDE\u63A5SQL Server</h3><p>\u57FA\u672C\u4EE3\u7801\u540C\u4E0A\uFF0C\u6CE8\u610F\u5F15\u5165\u5BF9\u5E94<code>mssql</code>\u9A71\u52A8\u5E76\u6B63\u786E\u6307\u5B9A<code>gorm.Open()</code>\u53C2\u6570\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;github.com/jinzhu/gorm&quot;</span>
  <span class="token boolean">_</span> <span class="token string">&quot;github.com/jinzhu/gorm/dialects/mssql&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  db<span class="token punctuation">,</span> err <span class="token operator">:=</span> gorm<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;mssql&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sqlserver://username:password@localhost:1433?database=dbname&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">defer</span> db<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-gorm\u57FA\u672C\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-gorm\u57FA\u672C\u793A\u4F8B" aria-hidden="true">#</a> 4\uFF0CGORM\u57FA\u672C\u793A\u4F8B</h2><p><strong>\u6CE8\u610F:</strong></p><ol><li>\u672C\u6587\u4EE5MySQL\u6570\u636E\u5E93\u4E3A\u4F8B\uFF0C\u8BB2\u89E3GORM\u5404\u9879\u529F\u80FD\u7684\u4E3B\u8981\u4F7F\u7528\u65B9\u6CD5\u3002</li><li>\u5F80\u4E0B\u9605\u8BFB\u672C\u6587\u524D\uFF0C\u4F60\u9700\u8981\u6709\u4E00\u4E2A\u80FD\u591F\u6210\u529F\u8FDE\u63A5\u4E0A\u7684MySQL\u6570\u636E\u5E93\u5B9E\u4F8B\u3002</li></ol><h3 id="_1-docker\u5FEB\u901F\u521B\u5EFAmysql\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_1-docker\u5FEB\u901F\u521B\u5EFAmysql\u5B9E\u4F8B" aria-hidden="true">#</a> 1\uFF0CDocker\u5FEB\u901F\u521B\u5EFAMySQL\u5B9E\u4F8B</h3><p>\u5F88\u591A\u540C\u5B66\u5982\u679C\u4E0D\u4F1A\u5B89\u88C5MySQL\u6216\u8005\u61D2\u5F97\u5B89\u88C5MySQL\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4E00\u4E0B\u547D\u4EE4\u5FEB\u901F\u8FD0\u884C\u4E00\u4E2AMySQL8.0.19\u5B9E\u4F8B\uFF0C\u5F53\u7136\u524D\u63D0\u662F\u4F60\u8981\u6709docker\u73AF\u5883\u2026</p><p>\u5728\u672C\u5730\u7684<code>13306</code>\u7AEF\u53E3\u8FD0\u884C\u4E00\u4E2A\u540D\u4E3A<code>mysql8019</code>\uFF0Croot\u7528\u6237\u540D\u5BC6\u7801\u4E3A<code>root1234</code>\u7684MySQL\u5BB9\u5668\u73AF\u5883:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span> mysql8019 <span class="token parameter variable">-p</span> <span class="token number">13306</span>:3306 <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root1234 <span class="token parameter variable">-d</span> mysql:8.0.19
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728\u53E6\u5916\u542F\u52A8\u4E00\u4E2A<code>MySQL Client</code>\u8FDE\u63A5\u4E0A\u9762\u7684MySQL\u73AF\u5883\uFF0C\u5BC6\u7801\u4E3A\u4E0A\u4E00\u6B65\u6307\u5B9A\u7684\u5BC6\u7801<code>root1234</code>:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--network</span> <span class="token function">host</span> <span class="token parameter variable">--rm</span> mysql mysql <span class="token parameter variable">-h127.0.0.1</span> <span class="token parameter variable">-P13306</span> --default-character-set<span class="token operator">=</span>utf8mb4 <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-\u521B\u5EFA\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_2-\u521B\u5EFA\u6570\u636E\u5E93" aria-hidden="true">#</a> 2\uFF0C\u521B\u5EFA\u6570\u636E\u5E93</h3><p>\u5728\u4F7F\u7528GORM\u524D\u624B\u52A8\u521B\u5EFA\u6570\u636E\u5E93<code>db1</code>\uFF1A</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> db1<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3-gorm\u64CD\u4F5Cmysql" tabindex="-1"><a class="header-anchor" href="#_3-gorm\u64CD\u4F5Cmysql" aria-hidden="true">#</a> 3\uFF0CGORM\u64CD\u4F5CMySQL</h3><p>\u4F7F\u7528GORM\u8FDE\u63A5\u4E0A\u9762\u7684<code>db1</code>\u8FDB\u884C\u521B\u5EFA\u3001\u67E5\u8BE2\u3001\u66F4\u65B0\u3001\u5220\u9664\u64CD\u4F5C\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
 <span class="token string">&quot;fmt&quot;</span>
 <span class="token string">&quot;github.com/jinzhu/gorm&quot;</span>
 <span class="token boolean">_</span> <span class="token string">&quot;github.com/jinzhu/gorm/dialects/mysql&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> UserInfo <span class="token keyword">struct</span> <span class="token punctuation">{</span>
 Id     <span class="token builtin">uint</span>
 Name   <span class="token builtin">string</span>
 Gender <span class="token builtin">string</span>
 Hobby  <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 db<span class="token punctuation">,</span> err <span class="token operator">:=</span> gorm<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;mysql&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root:root1234@(127.0.0.1:13306)/db1?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
  <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">defer</span> db<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token comment">// \u521B\u5EFA\u8868\uFF0C\u81EA\u52A8\u8FC1\u79FB\uFF08\u628A\u7ED3\u6784\u4F53\u548C\u6570\u636E\u8868\u8FDB\u884C\u5BF9\u5E94\uFF09</span>
 db<span class="token punctuation">.</span><span class="token function">AutoMigrate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>UserInfo<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

 <span class="token comment">// \u521B\u5EFA\u6570\u636E\u884C</span>
 <span class="token comment">//u1 := UserInfo{1, &quot;eryajf&quot;, &quot;\u7537&quot;, &quot;\u7BEE\u7403&quot;}</span>
 <span class="token comment">//db.Create(&amp;u1)</span>

 <span class="token comment">// \u67E5\u8BE2\u6570\u636E</span>
 <span class="token keyword">var</span> u UserInfo
 db<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>u<span class="token punctuation">)</span> <span class="token comment">//\u67E5\u8BE2\u8868\u4E2D\u7B2C\u4E00\u6761\u6570\u636E\u4FDD\u5B58\u5230u\u4E2D</span>
 fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;u:%#v\\n&quot;</span><span class="token punctuation">,</span> u<span class="token punctuation">)</span>

 <span class="token comment">// \u66F4\u65B0\u6570\u636E</span>
 db<span class="token punctuation">.</span><span class="token function">Model</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>u<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token string">&quot;hobby&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u53CC\u8272\u7403&quot;</span><span class="token punctuation">)</span>

 <span class="token comment">// \u5220\u9664\u6570\u636E</span>
 db<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>u<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-gorm-model\u5B9A\u4E49" tabindex="-1"><a class="header-anchor" href="#_5-gorm-model\u5B9A\u4E49" aria-hidden="true">#</a> 5\uFF0CGORM Model\u5B9A\u4E49</h2><p>\u5728\u4F7F\u7528ORM\u5DE5\u5177\u65F6\uFF0C\u901A\u5E38\u6211\u4EEC\u9700\u8981\u5728\u4EE3\u7801\u4E2D\u5B9A\u4E49\u6A21\u578B\uFF08Models\uFF09\u4E0E\u6570\u636E\u5E93\u4E2D\u7684\u6570\u636E\u8868\u8FDB\u884C\u6620\u5C04\uFF0C\u5728GORM\u4E2D\u6A21\u578B\uFF08Models\uFF09\u901A\u5E38\u662F\u6B63\u5E38\u5B9A\u4E49\u7684\u7ED3\u6784\u4F53\u3001\u57FA\u672C\u7684go\u7C7B\u578B\u6216\u5B83\u4EEC\u7684\u6307\u9488\u3002 \u540C\u65F6\u4E5F\u652F\u6301<code>sql.Scanner</code>\u53CA<code>driver.Valuer</code>\u63A5\u53E3\uFF08interfaces\uFF09\u3002</p><h3 id="_1-gorm-model" tabindex="-1"><a class="header-anchor" href="#_1-gorm-model" aria-hidden="true">#</a> 1\uFF0Cgorm.Model</h3><p>\u4E3A\u4E86\u65B9\u4FBF\u6A21\u578B\u5B9A\u4E49\uFF0CGORM\u5185\u7F6E\u4E86\u4E00\u4E2A<code>gorm.Model</code>\u7ED3\u6784\u4F53\u3002<code>gorm.Model</code>\u662F\u4E00\u4E2A\u5305\u542B\u4E86<code>ID</code>, <code>CreatedAt</code>, <code>UpdatedAt</code>, <code>DeletedAt</code>\u56DB\u4E2A\u5B57\u6BB5\u7684Golang\u7ED3\u6784\u4F53\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// gorm.Model \u5B9A\u4E49</span>
<span class="token keyword">type</span> Model <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  ID        <span class="token builtin">uint</span> <span class="token string">\`gorm:&quot;primary_key&quot;\`</span>
  CreatedAt time<span class="token punctuation">.</span>Time
  UpdatedAt time<span class="token punctuation">.</span>Time
  DeletedAt <span class="token operator">*</span>time<span class="token punctuation">.</span>Time
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F60\u53EF\u4EE5\u5C06\u5B83\u5D4C\u5165\u5230\u4F60\u81EA\u5DF1\u7684\u6A21\u578B\u4E2D\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// \u5C06 \`ID\`, \`CreatedAt\`, \`UpdatedAt\`, \`DeletedAt\`\u5B57\u6BB5\u6CE8\u5165\u5230\`User\`\u6A21\u578B\u4E2D</span>
<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  gorm<span class="token punctuation">.</span>Model
  Name <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u7136\u4F60\u4E5F\u53EF\u4EE5\u5B8C\u5168\u81EA\u5DF1\u5B9A\u4E49\u6A21\u578B\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// \u4E0D\u4F7F\u7528gorm.Model\uFF0C\u81EA\u884C\u5B9A\u4E49\u6A21\u578B</span>
<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  ID   <span class="token builtin">int</span>
  Name <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-\u6A21\u578B\u5B9A\u4E49\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#_2-\u6A21\u578B\u5B9A\u4E49\u793A\u4F8B" aria-hidden="true">#</a> 2\uFF0C\u6A21\u578B\u5B9A\u4E49\u793A\u4F8B</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  gorm<span class="token punctuation">.</span>Model
  Name         <span class="token builtin">string</span>
  Age          sql<span class="token punctuation">.</span>NullInt64
  Birthday     <span class="token operator">*</span>time<span class="token punctuation">.</span>Time
  Email        <span class="token builtin">string</span>  <span class="token string">\`gorm:&quot;type:varchar(100);unique_index&quot;\`</span>
  Role         <span class="token builtin">string</span>  <span class="token string">\`gorm:&quot;size:255&quot;\`</span> <span class="token comment">// \u8BBE\u7F6E\u5B57\u6BB5\u5927\u5C0F\u4E3A255</span>
  MemberNumber <span class="token operator">*</span><span class="token builtin">string</span> <span class="token string">\`gorm:&quot;unique;not null&quot;\`</span> <span class="token comment">// \u8BBE\u7F6E\u4F1A\u5458\u53F7\uFF08member number\uFF09\u552F\u4E00\u5E76\u4E14\u4E0D\u4E3A\u7A7A</span>
  Num          <span class="token builtin">int</span>     <span class="token string">\`gorm:&quot;AUTO_INCREMENT&quot;\`</span> <span class="token comment">// \u8BBE\u7F6E num \u4E3A\u81EA\u589E\u7C7B\u578B</span>
  Address      <span class="token builtin">string</span>  <span class="token string">\`gorm:&quot;index:addr&quot;\`</span> <span class="token comment">// \u7ED9address\u5B57\u6BB5\u521B\u5EFA\u540D\u4E3Aaddr\u7684\u7D22\u5F15</span>
  IgnoreMe     <span class="token builtin">int</span>     <span class="token string">\`gorm:&quot;-&quot;\`</span> <span class="token comment">// \u5FFD\u7565\u672C\u5B57\u6BB5</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u7ED3\u6784\u4F53\u6807\u8BB0-tags" tabindex="-1"><a class="header-anchor" href="#_3-\u7ED3\u6784\u4F53\u6807\u8BB0-tags" aria-hidden="true">#</a> 3\uFF0C\u7ED3\u6784\u4F53\u6807\u8BB0\uFF08tags\uFF09</h3><p>\u4F7F\u7528\u7ED3\u6784\u4F53\u58F0\u660E\u6A21\u578B\u65F6\uFF0C\u6807\u8BB0\uFF08tags\uFF09\u662F\u53EF\u9009\u9879\u3002gorm\u652F\u6301\u4EE5\u4E0B\u6807\u8BB0:</p><h4 id="_1-\u652F\u6301\u7684\u7ED3\u6784\u4F53\u6807\u8BB0-struct-tags" tabindex="-1"><a class="header-anchor" href="#_1-\u652F\u6301\u7684\u7ED3\u6784\u4F53\u6807\u8BB0-struct-tags" aria-hidden="true">#</a> 1\uFF0C\u652F\u6301\u7684\u7ED3\u6784\u4F53\u6807\u8BB0\uFF08Struct tags\uFF09</h4><table><thead><tr><th style="text-align:right;">\u7ED3\u6784\u4F53\u6807\u8BB0\uFF08Tag\uFF09</th><th style="text-align:left;">\u63CF\u8FF0</th></tr></thead><tbody><tr><td style="text-align:right;">Column</td><td style="text-align:left;">\u6307\u5B9A\u5217\u540D</td></tr><tr><td style="text-align:right;">Type</td><td style="text-align:left;">\u6307\u5B9A\u5217\u6570\u636E\u7C7B\u578B</td></tr><tr><td style="text-align:right;">Size</td><td style="text-align:left;">\u6307\u5B9A\u5217\u5927\u5C0F, \u9ED8\u8BA4\u503C255</td></tr><tr><td style="text-align:right;">PRIMARY_KEY</td><td style="text-align:left;">\u5C06\u5217\u6307\u5B9A\u4E3A\u4E3B\u952E</td></tr><tr><td style="text-align:right;">UNIQUE</td><td style="text-align:left;">\u5C06\u5217\u6307\u5B9A\u4E3A\u552F\u4E00</td></tr><tr><td style="text-align:right;">DEFAULT</td><td style="text-align:left;">\u6307\u5B9A\u5217\u9ED8\u8BA4\u503C</td></tr><tr><td style="text-align:right;">PRECISION</td><td style="text-align:left;">\u6307\u5B9A\u5217\u7CBE\u5EA6</td></tr><tr><td style="text-align:right;">NOT NULL</td><td style="text-align:left;">\u5C06\u5217\u6307\u5B9A\u4E3A\u975E NULL</td></tr><tr><td style="text-align:right;">AUTO_INCREMENT</td><td style="text-align:left;">\u6307\u5B9A\u5217\u662F\u5426\u4E3A\u81EA\u589E\u7C7B\u578B</td></tr><tr><td style="text-align:right;">INDEX</td><td style="text-align:left;">\u521B\u5EFA\u5177\u6709\u6216\u4E0D\u5E26\u540D\u79F0\u7684\u7D22\u5F15, \u5982\u679C\u591A\u4E2A\u7D22\u5F15\u540C\u540D\u5219\u521B\u5EFA\u590D\u5408\u7D22\u5F15</td></tr><tr><td style="text-align:right;">UNIQUE_INDEX</td><td style="text-align:left;">\u548C <code>INDEX</code> \u7C7B\u4F3C\uFF0C\u53EA\u4E0D\u8FC7\u521B\u5EFA\u7684\u662F\u552F\u4E00\u7D22\u5F15</td></tr><tr><td style="text-align:right;">EMBEDDED</td><td style="text-align:left;">\u5C06\u7ED3\u6784\u8BBE\u7F6E\u4E3A\u5D4C\u5165</td></tr><tr><td style="text-align:right;">EMBEDDED_PREFIX</td><td style="text-align:left;">\u8BBE\u7F6E\u5D4C\u5165\u7ED3\u6784\u7684\u524D\u7F00</td></tr><tr><td style="text-align:right;">-</td><td style="text-align:left;">\u5FFD\u7565\u6B64\u5B57\u6BB5</td></tr></tbody></table><h4 id="_2-\u5173\u8054\u76F8\u5173\u6807\u8BB0-tags" tabindex="-1"><a class="header-anchor" href="#_2-\u5173\u8054\u76F8\u5173\u6807\u8BB0-tags" aria-hidden="true">#</a> 2\uFF0C\u5173\u8054\u76F8\u5173\u6807\u8BB0\uFF08tags\uFF09</h4><table><thead><tr><th style="text-align:right;">\u7ED3\u6784\u4F53\u6807\u8BB0\uFF08Tag\uFF09</th><th style="text-align:left;">\u63CF\u8FF0</th></tr></thead><tbody><tr><td style="text-align:right;">MANY2MANY</td><td style="text-align:left;">\u6307\u5B9A\u8FDE\u63A5\u8868</td></tr><tr><td style="text-align:right;">FOREIGNKEY</td><td style="text-align:left;">\u8BBE\u7F6E\u5916\u952E</td></tr><tr><td style="text-align:right;">ASSOCIATION_FOREIGNKEY</td><td style="text-align:left;">\u8BBE\u7F6E\u5173\u8054\u5916\u952E</td></tr><tr><td style="text-align:right;">POLYMORPHIC</td><td style="text-align:left;">\u6307\u5B9A\u591A\u6001\u7C7B\u578B</td></tr><tr><td style="text-align:right;">POLYMORPHIC_VALUE</td><td style="text-align:left;">\u6307\u5B9A\u591A\u6001\u503C</td></tr><tr><td style="text-align:right;">JOINTABLE_FOREIGNKEY</td><td style="text-align:left;">\u6307\u5B9A\u8FDE\u63A5\u8868\u7684\u5916\u952E</td></tr><tr><td style="text-align:right;">ASSOCIATION_JOINTABLE_FOREIGNKEY</td><td style="text-align:left;">\u6307\u5B9A\u8FDE\u63A5\u8868\u7684\u5173\u8054\u5916\u952E</td></tr><tr><td style="text-align:right;">SAVE_ASSOCIATIONS</td><td style="text-align:left;">\u662F\u5426\u81EA\u52A8\u5B8C\u6210 save \u7684\u76F8\u5173\u64CD\u4F5C</td></tr><tr><td style="text-align:right;">ASSOCIATION_AUTOUPDATE</td><td style="text-align:left;">\u662F\u5426\u81EA\u52A8\u5B8C\u6210 update \u7684\u76F8\u5173\u64CD\u4F5C</td></tr><tr><td style="text-align:right;">ASSOCIATION_AUTOCREATE</td><td style="text-align:left;">\u662F\u5426\u81EA\u52A8\u5B8C\u6210 create \u7684\u76F8\u5173\u64CD\u4F5C</td></tr><tr><td style="text-align:right;">ASSOCIATION_SAVE_REFERENCE</td><td style="text-align:left;">\u662F\u5426\u81EA\u52A8\u5B8C\u6210\u5F15\u7528\u7684 save \u7684\u76F8\u5173\u64CD\u4F5C</td></tr><tr><td style="text-align:right;">PRELOAD</td><td style="text-align:left;">\u662F\u5426\u81EA\u52A8\u5B8C\u6210\u9884\u52A0\u8F7D\u7684\u76F8\u5173\u64CD\u4F5C</td></tr></tbody></table><h2 id="_6-\u4E3B\u952E\u3001\u8868\u540D\u3001\u5217\u540D\u7684\u7EA6\u5B9A" tabindex="-1"><a class="header-anchor" href="#_6-\u4E3B\u952E\u3001\u8868\u540D\u3001\u5217\u540D\u7684\u7EA6\u5B9A" aria-hidden="true">#</a> 6\uFF0C\u4E3B\u952E\u3001\u8868\u540D\u3001\u5217\u540D\u7684\u7EA6\u5B9A</h2><h3 id="_1-\u4E3B\u952E-primary-key" tabindex="-1"><a class="header-anchor" href="#_1-\u4E3B\u952E-primary-key" aria-hidden="true">#</a> 1\uFF0C\u4E3B\u952E\uFF08Primary Key\uFF09</h3><p>GORM \u9ED8\u8BA4\u4F1A\u4F7F\u7528\u540D\u4E3AID\u7684\u5B57\u6BB5\u4F5C\u4E3A\u8868\u7684\u4E3B\u952E\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  ID   <span class="token builtin">string</span> <span class="token comment">// \u540D\u4E3A\`ID\`\u7684\u5B57\u6BB5\u4F1A\u9ED8\u8BA4\u4F5C\u4E3A\u8868\u7684\u4E3B\u952E</span>
  Name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u4F7F\u7528\`AnimalID\`\u4F5C\u4E3A\u4E3B\u952E</span>
<span class="token keyword">type</span> Animal <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  AnimalID <span class="token builtin">int64</span> <span class="token string">\`gorm:&quot;primary_key&quot;\`</span>
  Name     <span class="token builtin">string</span>
  Age      <span class="token builtin">int64</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-\u8868\u540D-table-name" tabindex="-1"><a class="header-anchor" href="#_2-\u8868\u540D-table-name" aria-hidden="true">#</a> 2\uFF0C\u8868\u540D\uFF08Table Name\uFF09</h3><p>\u8868\u540D\u9ED8\u8BA4\u5C31\u662F\u7ED3\u6784\u4F53\u540D\u79F0\u7684\u590D\u6570\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// \u9ED8\u8BA4\u8868\u540D\u662F \`users\`</span>

<span class="token comment">// \u65B9\u6CD5\u4E00\uFF1A\u5C06 User \u7684\u8868\u540D\u8BBE\u7F6E\u4E3A \`profiles\`</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>User<span class="token punctuation">)</span> <span class="token function">TableName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;profiles&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u User<span class="token punctuation">)</span> <span class="token function">TableName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> u<span class="token punctuation">.</span>Role <span class="token operator">==</span> <span class="token string">&quot;admin&quot;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;admin_users&quot;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;users&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u65B9\u6CD5\u4E8C\uFF1A\u7981\u7528\u9ED8\u8BA4\u8868\u540D\u7684\u590D\u6570\u5F62\u5F0F\uFF0C\u5982\u679C\u7F6E\u4E3A true\uFF0C\u5219 \`User\` \u7684\u9ED8\u8BA4\u8868\u540D\u662F \`user\`</span>
db<span class="token punctuation">.</span><span class="token function">SingularTable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E5F\u53EF\u4EE5\u901A\u8FC7<code>Table()</code>\u6307\u5B9A\u8868\u540D\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// \u65B9\u6CD5\u4E09\uFF1A\u4F7F\u7528User\u7ED3\u6784\u4F53\u521B\u5EFA\u540D\u4E3A\`deleted_users\`\u7684\u8868</span>
db<span class="token punctuation">.</span><span class="token function">Table</span><span class="token punctuation">(</span><span class="token string">&quot;deleted_users&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CreateTable</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>User<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> deleted_users <span class="token punctuation">[</span><span class="token punctuation">]</span>User
db<span class="token punctuation">.</span><span class="token function">Table</span><span class="token punctuation">(</span><span class="token string">&quot;deleted_users&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>deleted_users<span class="token punctuation">)</span>
<span class="token comment">//// SELECT * FROM deleted_users;</span>

db<span class="token punctuation">.</span><span class="token function">Table</span><span class="token punctuation">(</span><span class="token string">&quot;deleted_users&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;name = ?&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jinzhu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//// DELETE FROM deleted_users WHERE name = &#39;jinzhu&#39;;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>GORM\u8FD8\u652F\u6301\u66F4\u6539\u9ED8\u8BA4\u8868\u540D\u79F0\u89C4\u5219\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>gorm<span class="token punctuation">.</span>DefaultTableNameHandler <span class="token operator">=</span> <span class="token keyword">func</span> <span class="token punctuation">(</span>db <span class="token operator">*</span>gorm<span class="token punctuation">.</span>DB<span class="token punctuation">,</span> defaultTableName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span>  <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;prefix_&quot;</span> <span class="token operator">+</span> defaultTableName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u5217\u540D-column-name" tabindex="-1"><a class="header-anchor" href="#_3-\u5217\u540D-column-name" aria-hidden="true">#</a> 3\uFF0C\u5217\u540D\uFF08Column Name\uFF09</h3><p>\u5217\u540D\u7531\u5B57\u6BB5\u540D\u79F0\u8FDB\u884C\u4E0B\u5212\u7EBF\u5206\u5272\u6765\u751F\u6210</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  ID        <span class="token builtin">uint</span>      <span class="token comment">// column name is \`id\`</span>
  Name      <span class="token builtin">string</span>    <span class="token comment">// column name is \`name\`</span>
  Birthday  time<span class="token punctuation">.</span>Time <span class="token comment">// column name is \`birthday\`</span>
  CreatedAt time<span class="token punctuation">.</span>Time <span class="token comment">// column name is \`created_at\`</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u4F7F\u7528\u7ED3\u6784\u4F53tag\u6307\u5B9A\u5217\u540D\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> Animal <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  AnimalId    <span class="token builtin">int64</span>     <span class="token string">\`gorm:&quot;column:beast_id&quot;\`</span>         <span class="token comment">// set column name to \`beast_id\`</span>
  Birthday    time<span class="token punctuation">.</span>Time <span class="token string">\`gorm:&quot;column:day_of_the_beast&quot;\`</span> <span class="token comment">// set column name to \`day_of_the_beast\`</span>
  Age         <span class="token builtin">int64</span>     <span class="token string">\`gorm:&quot;column:age_of_the_beast&quot;\`</span> <span class="token comment">// set column name to \`age_of_the_beast\`</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-\u65F6\u95F4\u6233\u8DDF\u8E2A" tabindex="-1"><a class="header-anchor" href="#_4-\u65F6\u95F4\u6233\u8DDF\u8E2A" aria-hidden="true">#</a> 4\uFF0C\u65F6\u95F4\u6233\u8DDF\u8E2A</h3><h4 id="_1-createdat" tabindex="-1"><a class="header-anchor" href="#_1-createdat" aria-hidden="true">#</a> 1\uFF0CCreatedAt</h4><p>\u5982\u679C\u6A21\u578B\u6709 <code>CreatedAt</code>\u5B57\u6BB5\uFF0C\u8BE5\u5B57\u6BB5\u7684\u503C\u5C06\u4F1A\u662F\u521D\u6B21\u521B\u5EFA\u8BB0\u5F55\u7684\u65F6\u95F4\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>db<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>user<span class="token punctuation">)</span> <span class="token comment">// \`CreatedAt\`\u5C06\u4F1A\u662F\u5F53\u524D\u65F6\u95F4</span>

<span class="token comment">// \u53EF\u4EE5\u4F7F\u7528\`Update\`\u65B9\u6CD5\u6765\u6539\u53D8\`CreateAt\`\u7684\u503C</span>
db<span class="token punctuation">.</span><span class="token function">Model</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token string">&quot;CreatedAt&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-updatedat" tabindex="-1"><a class="header-anchor" href="#_2-updatedat" aria-hidden="true">#</a> 2\uFF0CUpdatedAt</h4><p>\u5982\u679C\u6A21\u578B\u6709<code>UpdatedAt</code>\u5B57\u6BB5\uFF0C\u8BE5\u5B57\u6BB5\u7684\u503C\u5C06\u4F1A\u662F\u6BCF\u6B21\u66F4\u65B0\u8BB0\u5F55\u7684\u65F6\u95F4\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>db<span class="token punctuation">.</span><span class="token function">Save</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>user<span class="token punctuation">)</span> <span class="token comment">// \`UpdatedAt\`\u5C06\u4F1A\u662F\u5F53\u524D\u65F6\u95F4</span>

db<span class="token punctuation">.</span><span class="token function">Model</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jinzhu&quot;</span><span class="token punctuation">)</span> <span class="token comment">// \`UpdatedAt\`\u5C06\u4F1A\u662F\u5F53\u524D\u65F6\u95F4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-deletedat" tabindex="-1"><a class="header-anchor" href="#_3-deletedat" aria-hidden="true">#</a> 3\uFF0CDeletedAt</h4><p>\u5982\u679C\u6A21\u578B\u6709<code>DeletedAt</code>\u5B57\u6BB5\uFF0C\u8C03\u7528<code>Delete</code>\u5220\u9664\u8BE5\u8BB0\u5F55\u65F6\uFF0C\u5C06\u4F1A\u8BBE\u7F6E<code>DeletedAt</code>\u5B57\u6BB5\u4E3A\u5F53\u524D\u65F6\u95F4\uFF0C\u800C\u4E0D\u662F\u76F4\u63A5\u5C06\u8BB0\u5F55\u4ECE\u6570\u636E\u5E93\u4E2D\u5220\u9664\u3002</p><p>CRUD\u901A\u5E38\u6307\u6570\u636E\u5E93\u7684\u589E\u5220\u6539\u67E5\u64CD\u4F5C\uFF0C\u672C\u6587\u8BE6\u7EC6\u4ECB\u7ECD\u4E86\u5982\u4F55\u4F7F\u7528GORM\u5B9E\u73B0\u521B\u5EFA\u3001\u67E5\u8BE2\u3001\u66F4\u65B0\u548C\u5220\u9664\u64CD\u4F5C\u3002</p>`,74);function g(b,h){const a=l("ExternalLinkIcon");return o(),i("div",null,[d,u,r,n("p",null,[n("a",m,[s("Github GORM"),e(a)])]),n("p",null,[n("a",k,[s("\u4E2D\u6587\u5B98\u65B9\u7F51\u7AD9"),e(a)]),s("\u5185\u542B\u5341\u5206\u9F50\u5168\u7684\u4E2D\u6587\u6587\u6863\uFF0C\u6709\u4E86\u5B83\u4F60\u751A\u81F3\u4E0D\u9700\u8981\u518D\u7EE7\u7EED\u5411\u4E0B\u9605\u8BFB\u672C\u6587\u3002")]),v])}const f=t(c,[["render",g],["__file","01.gorm\u6846\u67B6\u5165\u95E8.html.vue"]]);export{f as default};
